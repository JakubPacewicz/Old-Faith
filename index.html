<!doctype html><html><head><title>old faith</title><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><script type="module" crossorigin>
var Wn=Object.defineProperty;var Zn=(n,e,t)=>e in n?Wn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var U=(n,e,t)=>(Zn(n,typeof e!="symbol"?e+"":e,t),t),St=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var pe=(n,e,t)=>(St(n,e,"read from private field"),t?t.call(n):e.get(n)),Et=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},_t=(n,e,t,r)=>(St(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();const Gn={"config.logger.show.parse":!1,"config.logger.show.render":!1,"config.logger.show.sound":!1,"config.logger.show.state":!1,"config.logger.show.story":!1,"config.logger.show.style":!1};function Jt(n){return n+": "}const Me={inserts:!0};function Jn(n){Me[n]=!1}function Xn(n){Me[n]=!0}function Xt(n,e){Me[n]&&(console.log(Jt(n)+e),window.dispatchEvent(new CustomEvent("log-info",{detail:{message:e,source:n}})))}function Qt(n,e){Me[n]&&(console.warn(Jt(n)+e),window.dispatchEvent(new CustomEvent("log-warning",{detail:{message:e,source:n}})))}function F(n){return{log(e){Xt(n,e)},warn(e){Qt(n,e)}}}function Qn(){window.addEventListener("state-change",n=>{const e=/^config\.logger\.show\.(.+)$/.exec(n.detail.name);e&&e[1]&&(n.detail.value?Xn(e[1]):Jn(e[1]))})}var Kn=typeof global=="object"&&global&&global.Object===Object&&global;const Yn=Kn;var er=typeof self=="object"&&self&&self.Object===Object&&self,tr=Yn||er||Function("return this")();const it=tr;var nr=it.Symbol;const le=nr;var Kt=Object.prototype,rr=Kt.hasOwnProperty,ir=Kt.toString,ge=le?le.toStringTag:void 0;function sr(n){var e=rr.call(n,ge),t=n[ge];try{n[ge]=void 0;var r=!0}catch{}var i=ir.call(n);return r&&(e?n[ge]=t:delete n[ge]),i}var or=Object.prototype,ar=or.toString;function lr(n){return ar.call(n)}var cr="[object Null]",ur="[object Undefined]",Tt=le?le.toStringTag:void 0;function Yt(n){return n==null?n===void 0?ur:cr:Tt&&Tt in Object(n)?sr(n):lr(n)}function dr(n){return n!=null&&typeof n=="object"}var fr="[object Symbol]";function st(n){return typeof n=="symbol"||dr(n)&&Yt(n)==fr}function hr(n,e){for(var t=-1,r=n==null?0:n.length,i=Array(r);++t<r;)i[t]=e(n[t],t,n);return i}var pr=Array.isArray;const ot=pr;var gr=1/0,Ct=le?le.prototype:void 0,At=Ct?Ct.toString:void 0;function en(n){if(typeof n=="string")return n;if(ot(n))return hr(n,en)+"";if(st(n))return At?At.call(n):"";var e=n+"";return e=="0"&&1/n==-gr?"-0":e}function Pe(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var mr="[object AsyncFunction]",br="[object Function]",yr="[object GeneratorFunction]",wr="[object Proxy]";function kr(n){if(!Pe(n))return!1;var e=Yt(n);return e==br||e==yr||e==mr||e==wr}var xr=it["__core-js_shared__"];const Fe=xr;var Lt=function(){var n=/[^.]+$/.exec(Fe&&Fe.keys&&Fe.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function vr(n){return!!Lt&&Lt in n}var $r=Function.prototype,Sr=$r.toString;function Er(n){if(n!=null){try{return Sr.call(n)}catch{}try{return n+""}catch{}}return""}var _r=/[\\^$.*+?()[\]{}|]/g,Tr=/^\[object .+?Constructor\]$/,Cr=Function.prototype,Ar=Object.prototype,Lr=Cr.toString,zr=Ar.hasOwnProperty,Pr=RegExp("^"+Lr.call(zr).replace(_r,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Or(n){if(!Pe(n)||vr(n))return!1;var e=kr(n)?Pr:Tr;return e.test(Er(n))}function Ir(n,e){return n==null?void 0:n[e]}function at(n,e){var t=Ir(n,e);return Or(t)?t:void 0}var Nr=function(){try{var n=at(Object,"defineProperty");return n({},"",{}),n}catch{}}();const zt=Nr;var Rr=9007199254740991,Mr=/^(?:0|[1-9]\d*)$/;function Dr(n,e){var t=typeof n;return e=e??Rr,!!e&&(t=="number"||t!="symbol"&&Mr.test(n))&&n>-1&&n%1==0&&n<e}function jr(n,e,t){e=="__proto__"&&zt?zt(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function tn(n,e){return n===e||n!==n&&e!==e}var qr=Object.prototype,Hr=qr.hasOwnProperty;function Fr(n,e,t){var r=n[e];(!(Hr.call(n,e)&&tn(r,t))||t===void 0&&!(e in n))&&jr(n,e,t)}var Br=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ur=/^\w*$/;function Vr(n,e){if(ot(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||st(n)?!0:Ur.test(n)||!Br.test(n)||e!=null&&n in Object(e)}var Wr=at(Object,"create");const we=Wr;function Zr(){this.__data__=we?we(null):{},this.size=0}function Gr(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var Jr="__lodash_hash_undefined__",Xr=Object.prototype,Qr=Xr.hasOwnProperty;function Kr(n){var e=this.__data__;if(we){var t=e[n];return t===Jr?void 0:t}return Qr.call(e,n)?e[n]:void 0}var Yr=Object.prototype,ei=Yr.hasOwnProperty;function ti(n){var e=this.__data__;return we?e[n]!==void 0:ei.call(e,n)}var ni="__lodash_hash_undefined__";function ri(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=we&&e===void 0?ni:e,this}function ee(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}ee.prototype.clear=Zr;ee.prototype.delete=Gr;ee.prototype.get=Kr;ee.prototype.has=ti;ee.prototype.set=ri;function ii(){this.__data__=[],this.size=0}function De(n,e){for(var t=n.length;t--;)if(tn(n[t][0],e))return t;return-1}var si=Array.prototype,oi=si.splice;function ai(n){var e=this.__data__,t=De(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():oi.call(e,t,1),--this.size,!0}function li(n){var e=this.__data__,t=De(e,n);return t<0?void 0:e[t][1]}function ci(n){return De(this.__data__,n)>-1}function ui(n,e){var t=this.__data__,r=De(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}function de(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}de.prototype.clear=ii;de.prototype.delete=ai;de.prototype.get=li;de.prototype.has=ci;de.prototype.set=ui;var di=at(it,"Map");const fi=di;function hi(){this.size=0,this.__data__={hash:new ee,map:new(fi||de),string:new ee}}function pi(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function je(n,e){var t=n.__data__;return pi(e)?t[typeof e=="string"?"string":"hash"]:t.map}function gi(n){var e=je(this,n).delete(n);return this.size-=e?1:0,e}function mi(n){return je(this,n).get(n)}function bi(n){return je(this,n).has(n)}function yi(n,e){var t=je(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}function re(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}re.prototype.clear=hi;re.prototype.delete=gi;re.prototype.get=mi;re.prototype.has=bi;re.prototype.set=yi;var wi="Expected a function";function lt(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(wi);var t=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=t.cache;if(s.has(i))return s.get(i);var a=n.apply(this,r);return t.cache=s.set(i,a)||s,a};return t.cache=new(lt.Cache||re),t}lt.Cache=re;var ki=500;function xi(n){var e=lt(n,function(r){return t.size===ki&&t.clear(),r}),t=e.cache;return e}var vi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$i=/\\(\\)?/g,Si=xi(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(vi,function(t,r,i,s){e.push(i?s.replace($i,"$1"):r||t)}),e});const Ei=Si;function ct(n){return n==null?"":en(n)}function ut(n,e){return ot(n)?n:Vr(n,e)?[n]:Ei(ct(n))}var _i=1/0;function dt(n){if(typeof n=="string"||st(n))return n;var e=n+"";return e=="0"&&1/n==-_i?"-0":e}function nn(n,e){e=ut(e,n);for(var t=0,r=e.length;n!=null&&t<r;)n=n[dt(e[t++])];return t&&t==r?n:void 0}function Be(n,e,t){var r=n==null?void 0:nn(n,e);return r===void 0?t:r}function Ti(n,e,t){var r=-1,i=n.length;e<0&&(e=-e>i?0:i+e),t=t>i?i:t,t<0&&(t+=i),i=e>t?0:t-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=n[r+e];return s}function rn(n){return function(e){return n==null?void 0:n[e]}}function Ci(n){var e=n==null?0:n.length;return e?n[e-1]:void 0}var Ai={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Li=rn(Ai);const zi=Li;var sn=/[&<>"']/g,Pi=RegExp(sn.source);function H(n){return n=ct(n),n&&Pi.test(n)?n.replace(sn,zi):n}function Oi(n,e){return e.length<2?n:nn(n,Ti(e,0,-1))}function Ii(n,e){return e=ut(e,n),n=Oi(n,e),n==null||delete n[dt(Ci(e))]}function Ni(n,e,t,r){if(!Pe(n))return n;e=ut(e,n);for(var i=-1,s=e.length,a=s-1,l=n;l!=null&&++i<s;){var o=dt(e[i]),u=t;if(o==="__proto__"||o==="constructor"||o==="prototype")return n;if(i!=a){var c=l[o];u=r?r(c,o,l):void 0,u===void 0&&(u=Pe(c)?c:Dr(e[i+1])?[]:{})}Fr(l,o,u),l=l[o]}return n}function ft(n,e,t){return n==null?n:Ni(n,e,t)}var Ri={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Mi=rn(Ri);const Di=Mi;var on=/&(?:amp|lt|gt|quot|#39);/g,ji=RegExp(on.source);function qi(n){return n=ct(n),n&&ji.test(n)?n.replace(on,Di):n}function Hi(n,e){return n==null?!0:Ii(n,e)}const an=F("story"),P={customScripts:[],customStyles:[],passages:[]};function ln(n){for(const r of["name","creator","ifid","options"])P[r]=n.getAttribute(r)??void 0;const e=parseInt(n.getAttribute("startnode")??"");isNaN(e)||(P.startNode=e),P.creatorVersion=n.getAttribute("creator-version")??void 0;const t=r=>[...r].map(i=>i.textContent??"");P.customScripts=t(n.querySelectorAll('[type="text/twine-javascript"]')),P.customStyles=t(n.querySelectorAll('[type="text/twine-css"]')),P.passages=[...n.querySelectorAll("tw-passagedata")].map(r=>{const i=parseInt(r.getAttribute("pid")??""),s=r.getAttribute("tags");return{id:isNaN(i)?void 0:i,name:r.getAttribute("name")??void 0,source:r.textContent??"",tags:s?s.split(" "):[]}})}function cn(){const n=pt();if(!n||!n.name)throw new Error("There is no starting passage for this story, or it has no name.");ie({trail:[n.name],"config.testing":typeof P.options=="string"&&P.options.indexOf("debug")!==-1||!1}),P.name&&(document.title=P.name)}function un(){an.log(`Running custom scripts (${P.customScripts.length})`);for(const n of P.customScripts)new Function(n).apply(window)}function dn(){an.log(`Adding custom styles (${P.customStyles.length})`);for(const n of P.customStyles){const e=document.createElement("style");e.innerHTML=n,document.head.appendChild(e)}}function fn(){return P.ifid}function ht(){return P.name}function Fi(){return P.passages}function pt(){return P.passages.find(n=>n.id===P.startNode)}function Se(n){return P.passages.find(e=>e.name===n)}function Bi(n){return P.passages.find(e=>e.id===n)}function hn(n){let e=[],t=!1;return async(...r)=>{t||(t=!0,Promise.resolve().then(()=>{try{n(e),e=[],t=!1}catch(i){window.setTimeout(()=>{throw i})}})),e.push(r)}}function ke(n,e,t=[]){const r=document.createElement(n);if(e)for(const i of Object.keys(e))e[i]!==void 0&&r.setAttribute(i,e[i]);for(const i of t)typeof i=="string"||typeof i=="number"?r.appendChild(document.createTextNode(i.toString())):r.appendChild(i);return r}function R(...n){return ke(...n).outerHTML}function Je(n){return Array.isArray(n)?n.every(Je):n===null?!0:typeof n=="object"?Object.getPrototypeOf(n)!==Object.prototype?!1:Object.values(n).every(Je):typeof n=="number"?isFinite(n)&&!isNaN(n):["boolean","string","undefined"].includes(typeof n)}const{log:Q,warn:Ui}=F("state");let te;const gt={},pn={},ce={};function mt(n,e){if(n[e])return;Object.defineProperty(n,e,{get(){return p(e)},set(r){$(e,r)},configurable:!0});const t=e.split(".");t.length>1&&(t.pop(),mt(n,t.join(".")))}function Vi(n,e){if(n[e])return;const t=e.split("."),r=t[t.length-1];for(let i=0;i<t.length-1;i++)n[t[i]]=n[t[i]]||{},n=n[t[i]];Object.defineProperty(n,r,{get(){return p(e)},set(){throw new Error("Chapbook lookup variables may only be read.")},configurable:!0})}function Wi(n,e){Hi(n,e)}function gn(){const n=fn(),e=ht();if(e===void 0)throw new Error("Cannot set up state: the story has no name");te=`chapbook-${e}-${n}`,qe("config.state.autosave",!0)}function bt(){function n(e,t){Object.keys(e).forEach(r=>{const i=t===""?r:`${t}.${r}`;if(typeof e[r]=="object"&&!Array.isArray(e[r]))n(e[r],i);else{const s=e[r];delete e[r],Wi(window,t),window.dispatchEvent(new CustomEvent("state-change",{detail:{name:i,value:p(i),previous:s}}))}})}n(ce,""),window.dispatchEvent(new CustomEvent("state-reset")),p("config.state.autosave")&&yt()}function $(n,e){const t=p(n);Je(e)||Ui(`Setting ${n} to ${JSON.stringify(e)} can't be saved permanently. This will work in the current session, but will not persist between sessions.`),ft(ce,n,e),mt(window,n),e!==t&&window.dispatchEvent(new CustomEvent("state-change",{detail:{previous:t,name:n,value:e}})),p("config.state.autosave")&&yt()}function qe(n,e){const t=p(n);Q(`Defaulting "${n}" to ${JSON.stringify(e)}`),ft(gt,n,e),mt(window,n),t==null&&window.dispatchEvent(new CustomEvent("state-change",{detail:{previous:t,name:n,value:e}}))}function ie(n){for(const e in n)qe(e,n[e])}function _(n,e){const t=p(n);Q(`Adding lookup variable ${n}`),ft(pn,n,e),Vi(window,n),t==null&&window.dispatchEvent(new CustomEvent("state-change",{detail:{previous:t,name:n,value:p(n)}}))}function p(n){const e=Be(pn,n);if(typeof e=="function")return e(p,$);const t=Be(ce,n),r=Be(gt,n);if(t==null)return r;if(typeof t=="object"&&t!==null&&!Array.isArray(t)&&typeof r=="object"&&r!==null&&!Array.isArray(r)){const i={},s=[...Object.keys(r),...Object.keys(t)];for(const a of s)Object.defineProperty(i,a,{get(){return p(n+"."+a)},set(l){$(n+"."+a,l)},configurable:!0,enumerable:!0});return i}return t}function xe(){return{...ce}}function Ee(n){bt();for(const e in n)$(e,n[e])}function mn(){try{return window.localStorage.setItem("chapbook-test","a"),window.localStorage.removeItem("chapbook-test"),!0}catch{return!1}}function yt(){Q("Saving to local storage: "+JSON.stringify(xe())),window.localStorage.setItem(te,JSON.stringify(xe())),Q("Save complete")}function bn(){return mn()&&window.localStorage.getItem(te)!==null}function yn(){Q("Restoring variables from local storage");const n=window.localStorage.getItem(te);if(!n)throw new Error(`No value is set in local storage at "${te}"`);Ee(JSON.parse(n)),Q("Restore complete")}function wn(n){n||Q("Purging variables from local storage");const e=window.localStorage.getItem(te);if(!e)throw new Error(`No value is set in local storage at "${te}"`);Ee(JSON.parse(e)),n||Q("Purge complete")}function ve(n){function e(t,r,i=[]){return Object.keys(t).reduce((s,a)=>{if(typeof t[a]=="object"&&t[a]&&!Array.isArray(t[a]))e(t[a],r?`${r}.${a}`:a,s);else{const l=r?`${r}.${a}`:a;s.includes(l)||s.push(l)}return s},i)}return n?e(gt,void 0,e(ce)).sort():e(ce).sort()}const Zi=Object.freeze(Object.defineProperty({__proto__:null,canRestoreFromStorage:bn,canSaveToStorage:mn,get:p,initState:gn,purgeFromStorage:wn,reset:bt,restoreFromObject:Ee,restoreFromStorage:yn,saveToObject:xe,saveToStorage:yt,set:$,setDefault:qe,setDefaults:ie,setLookup:_,varNames:ve},Symbol.toStringTag,{value:"Module"})),Gi=Object.freeze(Object.defineProperty({__proto__:null,addCustomStyles:dn,ifid:fn,initStory:cn,loadFromData:ln,name:ht,passageNamed:Se,passageWithId:Bi,passages:Fi,runCustomScripts:un,startPassage:pt},Symbol.toStringTag,{value:"Module"})),{log:kn}=F("actions");function xn(n){kn(`Going to passage "${n}"`);const e=Se(n);if(!e)throw new Error(`There is no passage with the name "${n}"`);document.activeElement instanceof HTMLElement&&document.activeElement.blur();const t=p("trail");if(!Array.isArray(t))throw new Error(`The trail variable has been set to a ${typeof t}, not an array.`);$("trail",[...t,e.name])}function vn(){kn("Restarting"),bt(),window.location.reload()}let X=[],Oe=!0;function Ji(){Oe&&(X=[],window.dispatchEvent(new CustomEvent("backstage-state-recorder-update")))}function Xi({detail:n}){if(!Oe)return;X.length===p("config.backstage.trail.maxLength")&&X.shift();const{name:e,value:t}=n;X.push({change:{name:e,value:t},state:xe()}),window.dispatchEvent(new CustomEvent("backstage-state-recorder-update"))}function Qi(){return[...X]}function Ki(n){if(!X[n])throw new Error(`There is no history at index ${n} to rewind to.`);Oe=!1,Ee(X[n].state),X.length=n+1,Oe=!0,window.dispatchEvent(new CustomEvent("backstage-state-recorder-update"))}function Yi(){qe("config.backstage.trail.maxLength",100),window.addEventListener("state-change",Xi),window.addEventListener("state-reset",Ji)}let V=[];function es(n){V.push({name:n,state:xe()}),$n(),window.dispatchEvent(new CustomEvent("backstage-state-snapshots-update"))}function ts(n){const e=V.find(t=>t.name===n);if(!e)throw new Error(`There is no snapshot named "${n}".`);Ee(e.state)}function ns(n){V=V.filter(({name:e})=>n!==e),$n(),window.dispatchEvent(new CustomEvent("backstage-state-snapshots-update"))}function rs(){try{V=JSON.parse(window.localStorage.getItem(`chapbookbackstage-snapshots-${p("config.state.saveKey")}`)),Array.isArray(V)||(V=[])}catch{V=[]}}function $n(){window.localStorage.setItem(`chapbookbackstage-snapshots-${p("config.state.saveKey")}`,JSON.stringify(V))}function Pt(){return V.map(({name:n})=>n)}function is(){rs()}function wt(n){for(const e in n)window.customElements.get(e)||window.customElements.define(e,n[e])}class z extends HTMLElement{defaultHtml(e){this.innerHTML.trim()===""&&(this.innerHTML=e)}delegate(e,t,r){this.addEventListener(e,i=>{if(!i.target)return;const s=i.target.closest(t);s&&r(i,s)})}query(e){const t=this.querySelector(e);if(!t)throw new Error(`Couldn't find element matching "${e}"`);return t}queryAll(e){return[...this.querySelectorAll(e)]}}class Sn extends z{constructor(){super(),this.addEventListener("click",e=>{e.target.closest("[data-toggle-collapsed]")&&(this.hasAttribute("collapsed")?this.removeAttribute("collapsed"):this.setAttribute("collapsed",""))})}connectedCallback(){this.innerHTML=`
			<button data-toggle-collapsed></button>
			<div class="content">
				<backstage-tabs aria-label="Backstage">
				<backstage-tab
					aria-controls="backstage-state-tab-panel"
					id="backstage-state-tab"
				>
					State
				</backstage-tab>
				<backstage-tab
					aria-controls="backstage-history-tab-panel"
					id="backstage-history-tab"
				>
					History
				</backstage-tab>
				<backstage-tab
					aria-controls="backstage-style-tab-panel"
					id="backstage-style-tab"
				>
					Style
				</backstage-tab>
				<backstage-tab
					aria-controls="backstage-notes-tab-panel"
					id="backstage-notes-tab"
				>
					Notes
				</backstage-tab>
			</backstage-tabs>
			<backstage-tab-panel
				aria-labelledby="backstage-state-tab"
				id="backstage-state-tab-panel"
			>
				<backstage-state-variables></backstage-state-variables>
				<backstage-state-snapshots></backstage-state-snapshots>
			</backstage-tab-panel>
			<backstage-tab-panel
				aria-labelledby="backstage-history-tab"
				id="backstage-history-tab-panel"
			>
				<backstage-history-table></backstage-history-table>
			</backstage-tab-panel>
			<backstage-tab-panel
				aria-labelledby="backstage-style-tab"
				id="backstage-style-tab-panel"
			>
				<backstage-style-theme></backstage-style-theme>
				<backstage-style-config></backstage-style-config>
				<backstage-style-group title="Page" prefix="page"></backstage-style-group>
				<backstage-style-group title="Header"></backstage-style-group>
				<backstage-style-group title="Footer"></backstage-style-group>
			</backstage-tab-panel>
			<backstage-tab-panel
				aria-labelledby="backstage-notes-tab"
				id="backstage-notes-tab-panel"
			>
				<backstage-notes></backstage-notes>
			</backstage-tab-panel>
		</div>`,this.update()}attributeChangedCallback(){this.update()}update(){const e=this.querySelectorAll("[data-toggle-collapsed]");if(this.hasAttribute("collapsed")){for(const t of e)t.innerHTML="&larr;",t.setAttribute("aria-label","Show Backstage");document.body.classList.remove("backstage-visible")}else{for(const t of e)t.innerHTML="&rarr;",t.setAttribute("aria-label","Hide Backstage");document.body.classList.add("backstage-visible")}}}U(Sn,"observedAttributes",["collapsed"]);function ss(n){const e=[];let t=[],r;return n.forEach(({change:i},s)=>{if(i.name==="trail"){const a=i.value;e.push({historyIndex:s-1,passage:r,varChanges:t}),t=[],r=a[a.length-1]}else t.push({name:i.name,value:i.value})}),e.push({historyIndex:n.length-1,passage:r,varChanges:t}),e}class os extends z{constructor(){super();U(this,"root",document.createElement("div"));this.delegate("click","button[data-rewind]",(t,r)=>{const i=parseInt(r.dataset.rewind??"");isNaN(i)||Ki(i)})}connectedCallback(){window.addEventListener("backstage-state-recorder-update",this),this.update()}disconnectedCallback(){window.removeEventListener("backstage-state-recorder-update",this)}handleEvent(){this.update()}update(){this.innerHTML=ss(Qi()).reduce((t,{historyIndex:r,passage:i,varChanges:s})=>{t+=`
					<button
						data-rewind="${r}"
						aria-label="Rewind to ${i?H(i):"Startup"}">&#x21aa;
					${i?H(i):"<em>Startup</em>"}</button><table><thead><tr><th>Variable</th><th>Value</th></thead><tbody>`;for(const a of s)t+=`
						<tr>
							<td>${H(a.name)}</td><td>${H(JSON.stringify(a.value))}</td>
						</tr>`;return t+"</tbody></table>"},"")}}let N={};function as(){N={},kt()}function ls(){const n=Object.keys(N).reduce((t,r)=>t+`<li class="note"><span class="passage">${H(r)}</span><pre>${H(N[r])}</pre></li>`,"");let e=p("story.name");return typeof e!="string"&&(e="Story"),`<h1>Notes for &ldquo;${H(e)}&rdquo;</h1><ul data-cb-backstage-notes data-cb-version="${p("engine.version")}">${n}</ul>`}function cs(n){return N[n]}function us(n){const e=document.createElement("div"),t={...N};let r=0;e.innerHTML=n;for(const i of e.querySelectorAll("ul[data-cb-backstage-notes] li")){const s=i.querySelector("span.passage"),a=i.querySelector("pre");s!=null&&s.textContent&&(a!=null&&a.textContent)&&(t[s.textContent]?t[s.textContent]=`${t[s.textContent]??""}

${a.textContent}`:t[s.textContent]=a.textContent,r++)}return N=t,kt(),r}function ds(){const n=window.localStorage.getItem(`chapbookbackstage-passage-notes-${p("config.state.saveKey")}`);try{n&&(N=JSON.parse(n),(typeof N!="object"||Array.isArray(N))&&(N={}))}catch{N={}}}function kt(){window.localStorage.setItem(`chapbookbackstage-passage-notes-${p("config.state.saveKey")}`,JSON.stringify(N))}function fs(n,e){N[n]=e,kt()}function hs(){ds()}function Ot(){const n=p("trail");if(Array.isArray(n))return n[n.length-1]}class ps extends z{constructor(){super(),this.delegate("change",'input[type="file"]',e=>{var r;const t=(r=e.target.files)==null?void 0:r[0];if(t){const i=new FileReader;i.onload=s=>{const a=us(s.target.result);window.alert(`${a} note(s) were imported.`)},i.readAsText(t)}}),this.delegate("change","textarea",e=>{const t=Ot();t&&fs(t,e.target.value)}),this.delegate("click","[data-export]",()=>{const e=ls(),t=document.createElement("a");p("story.name"),t.setAttribute("download",`${p("story.name")} Notes - ${new Date().toDateString()} ${new Date().toTimeString()}.html`),t.setAttribute("href","data:text/html;base64,"+window.btoa(e)),document.body.appendChild(t),t.click(),document.body.removeChild(t)}),this.delegate("click","[data-import]",()=>{this.query('input[type="file"]').click()}),this.delegate("click","[data-reset]",()=>{window.confirm("Are you sure? This will delete all text entered in the Notes panel of Backstage, and cannot be undone.")&&as()})}connectedCallback(){this.defaultHtml(`
			<label for="backstage-notes-textarea"></label>
				<textarea id="backstage-notes-textarea"></textarea>
				<div class="actions">
					<button data-export>Export All Notes</button>
					<button data-import>Import Notes</button>
					<button data-reset>Delete All Notes</button>
				</div>
				<input type="file" hidden />
		`),window.addEventListener("state-change",this),this.update()}disconnectedCallback(){window.removeEventListener("state-change",this)}handleEvent(e){e.detail.name==="trail"&&this.update()}update(){const e=Ot();e&&(this.query("#backstage-notes-textarea").value=cs(e)??"",this.query('label[for="backstage-notes-textarea"]').textContent=`Notes on "${e}"`)}}class gs extends z{constructor(){super(),this.delegate("click","[data-add-snapshot]",()=>{const e=window.prompt("Enter a name for this snapshot:");e&&(Pt().includes(e)?window.alert("A snapshot already exists with this name."):es(e))}),this.delegate("click","[data-remove]",({target:e})=>{const t=e.dataset.remove;t&&window.confirm(`Are you sure you want to delete the snapshot "${t}"? This cannot be undone.`)&&ns(t)}),this.delegate("click","[data-restore]",({target:e})=>{ts(e.dataset.restore)})}connectedCallback(){this.defaultHtml(`
			<details open>
				<summary>Snapshots</summary>
				<div class="snapshots"></div>
				<button data-add-snapshot>Add Snapshot</button>
			</details>
		`),window.addEventListener("backstage-state-snapshots-update",this),this.update()}disconnectedCallback(){window.removeEventListener("backstage-state-snapshots-update",this)}handleEvent(){this.update()}update(){const e=this.querySelector(".snapshots");e&&(e.innerHTML=Pt().map(t=>{const r=H(t);return`
					<div class="snapshot-button">
						<button data-restore="${r}" aria-label="Restore '${r}' snapshot">
							${r}
						</button>
						<button data-remove="${r}" aria-label="Remove '${r}' snapshot">
							&times;
						</button>
					</div class="snapshot-button">
				`}).join(""))}}const ms=["config.random.privateState"];class bs extends z{constructor(){super();U(this,"showDefaults",!1);this.delegate("change",'input[type="checkbox"]',t=>{this.showDefaults=t.target.checked,this.update()})}connectedCallback(){this.defaultHtml(`
			<details open>
				<summary>Variables</summary>
				<label>
					<input type="checkbox" />
					Show Defaults
				</label>
				<div class="variables"></div>
			</details>
		`),this.update(),window.addEventListener("state-change",this)}disconnectedCallback(){window.removeEventListener("state-change",this)}handleEvent(){this.update()}update(){this.query(".variables").innerHTML=ve(this.showDefaults).filter(t=>!ms.some(r=>t.startsWith(r))).map(t=>`<div><label><span>${H(t)}</span><backstage-variable-input name="${H(t)}"></backstage-variable-input></label></div>`).join("")}}const ys=["config.style.page.theme.override"];class ws extends z{connectedCallback(){this.defaultHtml(`
			<details open>
				<summary>Config</summary>
				<label for="cb-backstage-style-config">
					Enter this code into your first passage&rsquo;s variables section to
					permanently use this style:
				</label>
				<textarea
					readonly
					id="cb-backstage-style-config"
				></textarea>
			</details>
		`),window.addEventListener("state-change",this),this.update()}disconnectedCallback(){window.removeEventListener("state-change",this)}handleEvent(){this.update()}update(){this.query("textarea").value=ve(!1).reduce((e,t)=>!/^config.style/.test(t)||ys.includes(t)||p(t)===void 0?e:e+`${t}: ${JSON.stringify(p(t))}
`,"").trim()}}const ks=[{name:"Font",suffix:"font"},{name:"Color",suffix:"color"},{name:"Link Font",suffix:"link.font"},{name:"Link Color",suffix:"link.color"},{name:"Link Line Color",suffix:"link.lineColor"},{name:"Active Link Font",suffix:"link.active.font"},{name:"Active Link Color",suffix:"link.active.color"},{name:"Active Link Line Color",suffix:"link.active.lineColor"}];class En extends z{connectedCallback(){const e=this.getAttribute("prefix"),t=this.getAttribute("title");this.defaultHtml(`
			<details open>
				<summary>${t}</summary>
				${ks.map(({name:r,suffix:i})=>`
						<label data-prefix="%.${i}">
							${r}
							<backstage-variable-input name="${e}.${i}" string />
						</label>
					`).join("")}
			</details>
		`),window.addEventListener("state-change",this),window.addEventListener("system-theme-change",this),this.updateInputs()}updateInputs(){var i;const e=this.getAttribute("prefix")??"",t=p("browser.darkTheme");let r="config.style.";t&&(r+="dark.");for(const s of this.queryAll("backstage-variable-input")){const a=(i=s.closest("[data-prefix]"))==null?void 0:i.dataset.prefix;if(a&&(s.setAttribute("name",r+a.replace("%",e)),s.removeAttribute("placeholder"),t)){const l=p(`config.style.${a.replace("%",e)}`);typeof l=="string"&&s.setAttribute("placeholder",l)}}}attributeChangedCallback(e,t,r){if(this.innerHTML!=="")switch(e){case"title":this.query("summary").innerText=r;break;case"prefix":this.updateInputs();break}}handleEvent(e){(e.type==="system-theme-change"||e.detail.name==="config.style.page.theme.override")&&this.updateInputs()}}U(En,"observedAttributes",["prefix","title"]);class xs extends z{connectedCallback(){this.defaultHtml(`
      <details open>
      <summary>Theme</summary>
      <p>The <strong data-theme-name></strong> theme is active. <button>Switch Theme</button></p>
      <p>
      <label><input type="checkbox"> Theme switching</label>
      </p>
      </details>
    `),this.update(),this.query("button").addEventListener("click",()=>this.switchTheme()),this.query("input").addEventListener("change",()=>this.toggleThemeSwitching()),window.addEventListener("system-theme-change",this),window.addEventListener("state-change",this),this.update()}disconnectedCallback(){window.removeEventListener("system-theme-change",this)}handleEvent(e){(e.type==="system-theme-change"||["config.style.page.theme.override","config.style.page.theme.enableSwitching"].includes(e.detail.name))&&this.update()}switchTheme(){$("config.style.page.theme.override",p("browser.darkTheme")?"light":"dark")}toggleThemeSwitching(){$("config.style.page.theme.enableSwitching",!p("config.style.page.theme.enableSwitching")),this.update()}update(){const e=!!p("config.style.page.theme.enableSwitching");this.query("input").checked=e,this.query("button").disabled=!e,this.query("[data-theme-name]").innerHTML=p("browser.darkTheme")?"dark":"light"}}class vs extends z{constructor(){super(),this.addEventListener("click",()=>{var e;this.textContent&&((e=this.closest("backstage-tabs"))==null||e.selectTab(this.textContent))})}connectedCallback(){this.setAttribute("role","tab")}}class $s extends z{connectedCallback(){this.setAttribute("role","tabpanel")}}class Ss extends z{connectedCallback(){this.setAttribute("role","tablist"),window.setTimeout(()=>this.selectTab(0))}selectTab(e){[...this.children].filter(t=>t.getAttribute("role")==="tab").forEach((t,r)=>{var a,l;const i=t.getAttribute("aria-controls"),s=typeof e=="number"?r==e:t.textContent===e;t.setAttribute("aria-selected",s.toString()),i&&(s?(a=document.getElementById(i))==null||a.removeAttribute("hidden"):(l=document.getElementById(i))==null||l.setAttribute("hidden",""))})}}class _n extends z{constructor(){super(),this.addEventListener("input",e=>{const t=this.getAttribute("name");if(!t||!e.target)return;const r=e.target.value;try{this.hasAttribute("string")?$(t,r):$(t,JSON.parse(r))}catch{}})}attributeChangedCallback(){const e=this.getAttribute("name");if(!e)return;const t=p(e);let r=JSON.stringify(t);this.hasAttribute("string")&&(t==null?r="":r=t.toString()),this.innerHTML=`<input type="text" placeholder="${this.getAttribute("placeholder")??""}" value="${H(r)}" />`}}U(_n,"observedAttributes",["name","placeholder","string"]);function Es(){wt({"backstage-history-table":os,"backstage-notes":ps,"backstage-sidebar":Sn,"backstage-state-snapshots":gs,"backstage-state-variables":bs,"backstage-style-config":ws,"backstage-style-group":En,"backstage-style-theme":xs,"backstage-tab":vs,"backstage-tab-panel":$s,"backstage-tabs":Ss,"backstage-variable-input":_n})}function _s(){hs(),Yi(),is(),Es(),document.body.appendChild(document.createElement("backstage-sidebar"))}class Ts extends z{constructor(){super(),this.delegate("click","[data-back]",()=>{const e=p("trail");this.classList.remove("active"),Array.isArray(e)?$("trail",e.slice(0,e.length-1)):window.alert("Sorry, going back was not successful. Please try hard restarting.")}),this.delegate("click","[data-refresh]",()=>{var t;const e=p("trail");this.classList.remove("active"),Array.isArray(e)?$("trail",[...e]):$("trail",[(t=pt())==null?void 0:t.name])}),this.delegate("click","[data-hard-restart]",()=>{wn(!0),window.location.reload()})}connectedCallback(){window.addEventListener("error",this),window.addEventListener("unhandledrejection",this)}disconnectedCallback(){window.removeEventListener("error",this),window.removeEventListener("unhandledrejection",this)}handleEvent(e){const t=`
Please report this to https://github.com/markedjs/marked.`,r=e.type==="unhandledrejection"?e.reason:e.error;try{let i="";r!=null&&r.stack?i=`${r.message}

Stack trace:
${r.stack}`:i=`${r.message}

[No stack trace available]`,i=i.replace(t,"");const s=p("trail");this.classList.add("active"),this.innerHTML=`
			<p>
			An unexpected error has occurred.
			</p>
			<pre>${p("config.testing")?i:""}</pre>
			<ul>
				<li>
					<inline-button class="link" ${Array.isArray(s)&&s.length>1?"data-back":"data-refresh"}>Go back</inline-button> to the previous passage.
				</li>
				<li>
					<inline-button class="link" data-hard-restart>Hard restart</inline-button>, clearing all progress and beginning from the start.
				</li>
			</ul>
		`}catch(i){console.error(i)}}}const{log:Te}=F("display");class Cs extends z{connectedCallback(){window.addEventListener("state-change",this),this.defaultHtml("<div data-google></div><div data-typekit></div>")}disconnectedCallback(){window.removeEventListener("state-change",this)}handleEvent({detail:e}){if(["config","config.style","config.style.fonts"].includes(e.name)){const i=p("config.style.fonts");if(!i)return;for(const s in i){const a=i[s].name,l=i[s].url;typeof a=="string"&&typeof l=="string"&&this.loadUrlFont(s,l,a)}return}const r=e.name.match(/^config\.style\.fonts\.([^.]+)/i);if(r){const i=r[1],s=p(`config.style.fonts.${i}.name`),a=p(`config.style.fonts.${i}.url`);typeof a=="string"&&typeof s=="string"&&(Te(`Adding font from URL (${s})`),this.loadUrlFont(i,a,s));return}e.name==="config.style.googleFont"&&typeof e.value=="string"?this.loadGoogleFont(e.value):e.name==="config.style.typekitFont"&&typeof e.value=="string"&&this.loadTypekitFont(e.value)}loadGoogleFont(e){Te("Adding Google font"),this.query("[data-google]").innerHTML=e}loadTypekitFont(e){Te("Adding Typekit font"),this.query("[data-typekit]").innerHTML=e}loadUrlFont(e,t,r){Te("Adding font from URL");const i=t.match(/\.(.+)$/);if(!i||!i[1])return;const s=i[1],a=this.querySelector(`[data-url-${e}]`)??document.createElement("style");a.setAttribute(`data-url-${e}`,""),a.innerHTML=`@font-face { font-family: "${r}"; src: url("${t}") format("${s}"); }`,a.parentNode||this.appendChild(a)}}class As extends HTMLElement{constructor(){super(),this.addEventListener("body-content-change",this)}handleEvent({target:e}){if(!e)return;const t=[...e.querySelectorAll("[skippable-delay]")].map(l=>{const o={delay:0,el:l};try{o.delay=parseInt(l.getAttribute("skippable-delay")??"0")}catch{}return o}).filter(({delay:l})=>!!l).sort((l,o)=>l.delay-o.delay);if(t.length===0)return;let r=Date.now(),i;const s=()=>{var u;const l=Date.now()-r,o=(u=t.find(({delay:c})=>c>l))==null?void 0:u.delay;if(!o){this.dispatchEvent(new CustomEvent("page-skip-indicator-hide"));return}for(const c of t)c.delay<=0||(c.delay<=o?(c.delay=0,c.el.setAttribute("skippable-delay","0")):(c.delay-=o,c.el.setAttribute("skippable-delay",c.delay.toString())));r=Date.now(),window.clearTimeout(i),a()},a=()=>{i&&window.clearTimeout(i),i=window.setTimeout(()=>{window.removeEventListener("click",s),window.removeEventListener("keyup",s),this.dispatchEvent(new CustomEvent("page-skip-indicator-hide"))},t[t.length-1].delay)};window.addEventListener("click",s),window.addEventListener("keyup",s),a(),this.dispatchEvent(new CustomEvent("page-skip-indicator-show"))}}class Ls extends z{connectedCallback(){var e,t;(e=this.closest("page-skip"))==null||e.addEventListener("page-skip-indicator-hide",this),(t=this.closest("page-skip"))==null||t.addEventListener("page-skip-indicator-show",this)}disconnectedCallback(){var e,t;(e=this.closest("page-skip"))==null||e.removeEventListener("page-skip-indicator-hide",this),(t=this.closest("page-skip"))==null||t.removeEventListener("page-skip-indicator-show",this)}handleEvent(e){switch(e.type){case"page-skip-indicator-hide":this.removeAttribute("active");break;case"page-skip-indicator-show":this.setAttribute("active","");break}}}var se=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zs(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){if(this instanceof r){var i=[null];i.push.apply(i,arguments);var s=Function.bind.apply(e,i);return new s}return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var Ie=Os;const Ps={hoursPerDay:24,daysPerWeek:7,weeksPerMonth:4,monthsPerYear:12,daysPerYear:365.25},It={ms:["ms","milli","millisecond","milliseconds"],s:["s","sec","secs","second","seconds"],m:["m","min","mins","minute","minutes"],h:["h","hr","hrs","hour","hours"],d:["d","day","days"],w:["w","week","weeks"],mth:["mon","mth","mths","month","months"],y:["y","yr","yrs","year","years"]};function Os(n,e,t){t=Object.assign({},Ps,t||{});let r=0,i=Is(t),s=n.toLowerCase().replace(/[^.\w+-]+/g,"").match(/[-+]?[0-9.]+[a-z]+/g);if(s===null)throw new Error(`The string [${n}] could not be parsed by timestring`);return s.forEach(a=>{let l=a.match(/[0-9.]+/g)[0],o=a.match(/[a-z]+/g)[0];r+=Ns(l,o,i)}),e?Rs(r,e,i):r}function Is(n){let e={ms:.001,s:1,m:60,h:3600};return e.d=n.hoursPerDay*e.h,e.w=n.daysPerWeek*e.d,e.mth=n.daysPerYear/n.monthsPerYear*e.d,e.y=n.daysPerYear*e.d,e}function Tn(n){for(let e of Object.keys(It))if(It[e].indexOf(n)>-1)return e;throw new Error(`The unit [${n}] is not supported by timestring`)}function Ns(n,e,t){return n*t[Tn(e)]}function Rs(n,e,t){return n/t[Tn(e)]}class Ms extends z{connectedCallback(){window.addEventListener("display-change",this)}disconnectedCallback(){window.removeEventListener("display-change",this)}async startTransition(e,t={}){const r=p("config.body.transition.name"),i=p("config.body.transition.duration"),s=typeof i=="string"?Ie(i,"s"):0;document.startViewTransition&&typeof r=="string"&&["crossfade","fadeInOut"].includes(r)&&s>0?r==="crossfade"?(document.documentElement.style.setProperty("--page-transition-duration",`${s}s`),document.startViewTransition(async()=>{await e(),t.preserveWindowScroll||window.scrollTo(0,0)})):(document.documentElement.style.setProperty("--page-transition-duration",`${s/2}s`),await document.startViewTransition(async()=>{this.style.visibility="hidden"}).finished,document.startViewTransition(async()=>{this.style.visibility="visible",await e(),t.preserveWindowScroll||window.scrollTo(0,0)})):(await e(),t.preserveWindowScroll||window.scrollTo(0,0))}handleEvent({detail:e}){this.startTransition(()=>{const t=this.querySelector("article");t&&(t.innerHTML=`<div>${e.body}</div>`,t.dispatchEvent(new CustomEvent("body-content-change",{bubbles:!0})));const r=["left","center","right"];for(const i of["footer","header"]){const s=this.querySelector(i);s&&(r.some(a=>e[i][a].trim()!=="")?s.removeAttribute("hidden"):s.setAttribute("hidden",""),s.innerHTML=["left","center","right"].reduce((a,l)=>a+`<div class="${l}">${e[i][l]}</div>`,""))}})}}const Nt=["gray","red","pink","grape","violet","indigo","blue","cyan","teal","green","lime","yellow","orange"].map(n=>`oc-${n}`),Ds=["gray","rose","raspberry","red","orange","cinnamon","amber","yellow","lime","chartreuse","green","emerald","aquamarine","teal","cyan","powder","sky","cerulean","azure","blue","indigo","violet","purple","magenta","pink"];function Rt(n){if(typeof n!="string")throw new Error("Only strings can be parsed as color values.");if(Nt.includes(n))return`var(--${n}-9)`;const e=/^(oc-\w+)-\d$/.exec(n);if(e&&Nt.includes(e[1]))return`var(--${n})`;const t=/^(\w+)-([1-6])$/.exec(n);return t&&Ds.includes(t[1])?`var(--color-${n})`:n}function me(n){const e={backgroundColor:"inherit",color:"inherit"};if(n===void 0)return e;if(typeof n!="string")throw new Error("Only strings can be parsed as colors.");const t=n.split(/ on /i);return e.color=Rt(t[0].trim().toLowerCase()),e.color===""&&(e.color="inherit"),t.length===2&&(e.backgroundColor=Rt(t[1].trim().toLowerCase())),e}function js(n,{scaling:e}){const t={fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariant:"inherit",fontWeight:"inherit",textDecoration:"inherit",textTransform:"inherit"};if(n===void 0)return t;if(typeof n!="string")throw new Error("Only strings can be parsed as fonts.");function r(c,d){c.fontFamily=d.split("/").map(f=>{let h=f;return["monospace","sans-serif","serif"].includes(h)||(h[0]!=='"'&&(h='"'+h),h[h.length-1]!=='"'&&(h=h+'"')),h}).join(",")}function i(c){c.fontWeight="bold"}function s(c){c.fontStyle="italic"}function a(c){c.fontStyle="none",c.fontWeight="normal",c.textDecoration="none",c.textTransform="none"}function l(c){c.fontVariant="small-caps",c.textTransform="lowercase"}function o(c){c.textDecoration="underline"}const u=/\b\d+(?:\.\d+)?(ch|cm|ex|in|mm|pc|pt|px|r?em|vh|vmax|vmin|vw|%)?/i.exec(n);if(u){t.fontSize=u[0],/^\d+$/.test(u[0])&&(t.fontSize=`${u[0]}px`),e&&(t.fontSize=`calc(${t.fontSize} + max(${e.addAtDoubleWidth} * (100vw - ${e.baseViewportWidth}px) / ${e.baseViewportWidth}, 0px))`,e.maximumSize&&(t.fontSize=`min(${t.fontSize}, ${e.maximumSize})`)),u.index!==0&&r(t,n.substring(0,u.index).trim());const c=n.substring(u.index);/\bregular\b/i.test(c)?a(t):(/\bbold\b/.test(c)&&i(t),/\bitalics?\b/.test(c)&&s(t),/\bunderlined?/.test(c)&&o(t),/\bsmall caps?\b/.test(c)&&l(t))}else{let c,d=n;for(;c=/(bold|italics?|regular|small caps|underlined?)$/.exec(d);){switch(c[0]){case"bold":i(t);break;case"italic":case"italics":s(t);break;case"regular":a(t);break;case"small caps":l(t);break;case"underline":case"underlined":o(t);break}d=d.substring(0,c.index).trim()}d.trim()!==""&&r(t,d)}return t}const qs={"config.style.dark.backdrop":"hsl(0, 0%, 10%)","config.style.dark.page.footer.border":"thin-line","config.style.dark.page.footer.borderColor":"white","config.style.dark.page.footer.link.active.color":"raspberry-3 on raspberry-6","config.style.dark.page.fork.divider.color":"gray-5","config.style.dark.page.color":"white on gray-6","config.style.dark.page.header.border":"thin-line","config.style.dark.page.header.borderColor":"white","config.style.dark.page.header.link.active.color":"raspberry-3 on raspberry-6","config.style.dark.page.link.color":"white","config.style.dark.page.link.lineColor":"raspberry-4","config.style.dark.page.link.active.color":"raspberry-3 on raspberry-6","config.style.backdrop":"gray-1","config.style.fontScaling.enabled":!0,"config.style.fontScaling.baseViewportWidth":1e3,"config.style.fontScaling.addAtDoubleWidth":6,"config.style.page.style.border":"shadow","config.style.page.style.borderColor":"gray-2","config.style.page.font":"Iowan Old Style/Constantia/Georgia/serif 18","config.style.page.color":"gray-6 on white","config.style.page.fork.divider.color":"gray-2","config.style.page.fork.divider.style":"dashed","config.style.page.fork.divider.size":1,"config.style.page.link.color":"gray-6","config.style.page.link.lineColor":"raspberry-4","config.style.page.link.font":"underline","config.style.page.link.active.color":"raspberry-4 on raspberry-1","config.style.page.verticalAlign":"center","config.style.page.header.border":"thin-line","config.style.page.header.borderColor":"gray-6","config.style.page.header.font":"16","config.style.page.header.link.font":"small caps underlined","config.style.page.header.link.lineColor":"raspberry-4","config.style.page.header.link.active.color":"raspberry-4 on raspberry-1","config.style.page.header.link.active.font":"small caps underlined","config.style.page.header.link.active.lineColor":"raspberry-4","config.style.page.footer.border":"thin-line","config.style.page.footer.borderColor":"gray-6","config.style.page.footer.font":"16","config.style.page.footer.link.font":"small caps underlined","config.style.page.footer.link.lineColor":"raspberry-4","config.style.page.footer.link.active.color":"raspberry-4 on raspberry-1","config.style.page.footer.link.active.font":"small caps underlined","config.style.page.footer.link.active.lineColor":"raspberry-4","config.style.page.theme.override":void 0,"config.style.page.theme.enableSwitching":!0};function Hs(){ie(qs)}class Fs extends z{connectedCallback(){window.addEventListener("state-change",this)}disconnectedCallback(){window.removeEventListener("state-change",this)}handleEvent(e){const{name:t,value:r}=e.detail;if(t==="config"||t==="config.style"){for(const i of ve())if(i.startsWith("config.style.")){const s=p(i);typeof s=="string"&&this.handleStateChange(i,s)}}else t.startsWith("config.style.")&&this.handleStateChange(t,r)}handleStateChange(e,t){const r=`--${e.replace(/^config\.style\./,"").replace(/\./g,"-")}`;if(typeof t=="string"&&r.endsWith("-color")){this.updateColor(r.replace(/-color$/,""),t);return}if(typeof t=="string"&&r.endsWith("-lineColor")){this.updateLineColor(r.replace(/-lineColor$/,""),t);return}if(typeof t=="string"&&r.endsWith("-font")){this.updateFont(r.replace(/-font$/,""),t);return}switch(r){case"--backdrop":case"--dark-backdrop":{const{color:i}=me(t);this.style.setProperty(`${r}-color`,i);break}case"--fontScaling-enabled":case"--fontScaling-baseViewportWidth":case"--fontScaling-addAtDoubleWidth":case"--fontScaling-maximumSize":this.recalculateFontSizes();break;case"--page-fork-divider-size":case"--dark-page-fork-divider-size":(typeof t=="string"||typeof t=="number")&&this.style.setProperty(r,`${t}px`);break;case"--page-fork-divider-style":case"--dark-page-fork-divider-style":typeof t=="string"&&this.style.setProperty(r,t);break;case"--page-verticalAlign":case"--dark-page-verticalAlign":{if(typeof t!="string")break;const i=r.replace(/-verticalAlign$/,"");switch(t){case"top":this.style.setProperty(`${i}-current-passage-justify-content`,"flex-start");break;case"center":this.style.setProperty(`${i}-current-passage-justify-content`,"center");break;case"bottom":this.style.setProperty(`${i}-current-passage-justify-content`,"flex-end");break}break}case"--page-footer-border":case"--page-footer-borderColor":case"--page-header-border":case"--page-header-borderColor":case"--dark-page-footer-border":case"--dark-page-footer-borderColor":case"--dark-page-header-border":case"--dark-page-header-borderColor":case"--page-style-border":case"--dark-page-style-border":case"--page-style-borderColor":case"--dark-page-style-borderColor":{const i=r.replace(/-style-[^-]*?$/,"").replace(/-border(Color)?$/,""),s=e.replace(/\.[^.]*?$/,""),a=p(`${s}.border`),l=p(`${s}.borderColor`);switch(a){case"none":this.style.setProperty(`${i}-border`,"none"),this.style.setProperty(`${i}-box-shadow`,"none");break;case"shadow":this.style.setProperty(`${i}-border`,"none"),this.style.setProperty(`${i}-box-shadow`,"inset 0 0 2px 2px hsla(0, 0%, 100%, 0.05), 0 0 0 1px hsla(0, 0%, 0%, 0.05), 0 2px 2px hsla(0, 0%, 0%, 0.05), 0 4px 4px hsla(0, 0%, 0%, 0.05), 0 8px 8px hsla(0, 0%, 0%, 0.05), 0 16px 16px hsla(0, 0%, 0%, 0.05)");break;case"thick-line":this.style.setProperty(`${i}-border`,`4px solid ${me(l).color}`),this.style.setProperty(`${i}-box-shadow`,"none");break;case"thin-line":this.style.setProperty(`${i}-border`,`1px solid ${me(l).color}`),this.style.setProperty(`${i}-box-shadow`,"none");break}}}}recalculateFontSizes(){for(const e of ve(!0)){const t=/^config\.style\.(.*)\.font$/.exec(e);if(t){const r=p(e);typeof r=="string"&&this.updateFont(`--${t[1].replace(/\./g,"-")}`,r)}}}updateColor(e,t){const{backgroundColor:r,color:i}=me(t);this.style.setProperty(`${e}-background-color`,r),this.style.setProperty(`${e}-color`,i)}updateFont(e,t){const r=p("config.style.fontScaling.enabled"),i={};if(r){const a=p("config.style.fontScaling.baseViewportWidth"),l=p("config.style.fontScaling.addAtDoubleWidth"),o=p("config.style.fontScaling.maximumSize");typeof a=="number"&&typeof l=="number"&&(i.scaling={baseViewportWidth:a,addAtDoubleWidth:l},typeof o=="string"&&(i.scaling.maximumSize=o))}const s=js(t,i);this.style.setProperty(`${e}-font-family`,s.fontFamily),this.style.setProperty(`${e}-font-size`,s.fontSize),this.style.setProperty(`${e}-font-style`,s.fontStyle),this.style.setProperty(`${e}-font-variant`,s.fontVariant),this.style.setProperty(`${e}-font-weight`,s.fontWeight),this.style.setProperty(`${e}-text-decoration`,s.textDecoration),this.style.setProperty(`${e}-text-transform`,s.textTransform)}updateLineColor(e,t){const{color:r}=me(t);this.style.setProperty(`${e}-text-decoration-color`,r)}}class Bs extends z{connectedCallback(){window.addEventListener("state-change",this),window.addEventListener("system-theme-change",this),Promise.resolve().then(()=>this.update())}disconnectedCallback(){window.removeEventListener("state-change",this),window.removeEventListener("system-theme-change",this)}update(){p("browser.darkTheme")?this.enable():this.disable()}disable(){this.style.cssText=""}enable(){const e=this.closest("state-css-variables");if(e){this.style.cssText="";for(let t=0;t<e.style.length;t++){const r=/^--dark-(.*)/.exec(e.style.item(t));r!=null&&r[1]&&this.style.setProperty(`--${r[1]}`,`var(--dark-${r[1]})`)}}}handleEvent(e){if(e.type==="system-theme-change")this.update();else{const{name:t}=e.detail;(["config","config.style","config.style.page.theme.enableSwitching","config.style.page.theme.override"].includes(t)||t.startsWith("config.style.dark"))&&this.update()}}}var J;class Us extends z{constructor(){super();U(this,"warnings");Et(this,J,void 0);this.warnings=[]}connectedCallback(){window.addEventListener("state-change",this),this.spyOnWarnings(),this.update()}disconnectedCallback(){window.removeEventListener("state-change",this),this.unspyOnWarnings()}handleEvent(t){t.type==="state-change"&&t.detail.name==="trail"&&(this.warnings=[],this.update())}spyOnWarnings(){_t(this,J,console.warn),console.warn=(...t)=>{this.warnings.push(...t),this.update(),pe(this,J).apply(pe(this,J),t)}}unspyOnWarnings(){pe(this,J)&&(console.warn=pe(this,J))}update(){this.isConnected&&(this.warnings.length>0&&p("config.testing")?(this.removeAttribute("hidden"),this.innerHTML=`<ul>${this.warnings.map(t=>`<li>Warning: ${t}</li>`).join("")}</ul>`):this.setAttribute("hidden",""))}}J=new WeakMap;function Vs(){wt({"error-handler":Ts,"external-fonts":Cs,"page-skip":As,"page-skip-indicator":Ls,"page-transition":Ms,"state-css-variables":Fs,"state-dark-theme-css-overrides":Bs,"warning-list":Us})}class fe extends z{constructor(){super(),this.addEventListener("keydown",e=>{(e.key===" "||e.key==="Enter")&&(e.preventDefault(),this.dispatchEvent(new MouseEvent("click",{bubbles:!0})))})}connectedCallback(){this.setAttribute("tabindex","0"),this.hasAttribute("role")||this.setAttribute("role","button")}}const{warn:Mt}=F("inserts");class Ws extends fe{constructor(){super(),this.addEventListener("click",()=>{const e=this.getAttribute("choices");if(e){let t;try{t=JSON.parse(e)}catch{Mt(`The choices attribute, "${e}" couldn't be parsed.`);return}if(!Array.isArray(t)){Mt("The choices attribute of this cycling link doesn't deserialize to an array.");return}let r=t.map(a=>typeof a=="string"?a:a.toString()).indexOf((this.textContent??"").trim())+1;r===t.length&&(r=0);const i=this.closest("page-transition");if(!i)throw new Error("Couldn't find suitable parent element to do a cycle link transition on.");i.startTransition(()=>{this.textContent=t[r].toString()});const s=this.getAttribute("set");s&&$(s,t[r])}})}}function Zs(n){let e=!0;for(const t of n.querySelectorAll("input, select"))e=e&&t.reportValidity();return e}class Gs extends fe{constructor(){super(),this.addEventListener("click",()=>{const e=this.getAttribute("to"),t=this.closest("article, footer, header");t&&!Zs(t)||e&&(this.dispatchEvent(new CustomEvent("passage-navigate",{bubbles:!0})),xn(e))})}connectedCallback(){super.connectedCallback(),this.setAttribute("role","link")}}class Js extends fe{constructor(){super(),this.addEventListener("click",vn)}}const Xs={match:/^(no )?ambient\s+sound/i,render(n,{volume:e}){const t=p("sound.ambient");if(t)for(const i in t)i!==n&&t[i].playing&&$(`sound.ambient.${i}.playing`,!1);if(!n)return;const r=p(`sound.ambient.${n}.description`)??"";return e&&$(`sound.ambient.${n}.volume`,e),$(`sound.ambient.${n}.playing`,!0),`<audio>${r}</audio>`}};function xt(n,e){return/^\w+:\/\/\/?\w/i.test(n)?R("a",{class:"link",href:n},[e??n]):R("passage-link",{class:"link",to:n},[e??n])}function Qs(n){return n.replace(/\[\[(.*?)\]\]/g,(e,t)=>{let r=t;const i=t.indexOf("|");if(i!==-1)r=t.substring(0,i),t=t.substring(i+1);else{const s=t.indexOf("->");if(s!==-1)r=t.substring(0,s),t=t.substring(s+2);else{const a=t.indexOf("<-");a!==-1&&(r=t.substring(a+2),t=t.substring(0,a))}}return r===""||t===""?e:xt(t,r??t)})}const Ks={match:/^back\s+link/i,render(n,e){const t=p("trail");if(!(!Array.isArray(t)||t.length===0))return xt(t.length>1?t[t.length-2]:t[0],e.label??"Back")}},Ys={match:/^cycling\s+link(\s+for)?/i,render(n,{choices:e}){let t="";if(n){const r=p(n);r===void 0?($(n,e[0]),t=e[0].toString()):t=r.toString()}else t=e[0].toString();return R("cycling-link",{class:"link",set:n??void 0,choices:JSON.stringify(e)},[t])}},eo={match:/^dropdown menu(\s+for)?/i,render(n,e){let t;return n&&(t=p(n),t===void 0&&($(n,e.choices[0]),t=e.choices[0])),R("variable-binding",{name:n??void 0},[ke("select",{},e.choices.map(r=>{const i=r.toString(),s={"data-json-value":JSON.stringify(r)};return n&&t===r&&(s.selected=""),ke("option",s,[i])}))])}},to={match:/^embed\s+flickr(\s+image)?/i,render(n,e){var t;if(n)return R("img",{...e,src:(t=/img src="(.+?)"/.exec(n))==null?void 0:t[1]})}},no={match:/^embed\s+image/i,render(n,e){return R("img",{...e,src:n??""})}},ro={match:/^embed\s+passage(\s+named)?/i,render(n){if(!n)return"";const e=Se(n);return e?$e(e.source):""}},io={match:/^embed\s+unsplash(\s+image)?/i,render(n,e){if(n)return R("img",{...e,src:`https://source.unsplash.com/${n.replace(/.*\//,"")}/${e.width}x${e.height}`})}},so={match:/^embed\s+youtube(\s+video)?/i,render(n,e){if(!n)return;let t=`https://www.youtube-nocookie.com/embed/${n.replace(/.*\?v=/,"")}?modestbranding=1&rel=0&controls=${e.controls?1:0}&`;return e.autoplay&&(t+="autoplay=1&"),e.loop&&(t+="loop=1&"),R("div",{style:"position: relative; height: 0; padding-bottom: 56.25%; margin-bottom: 1em"},[ke("iframe",{src:t,frameBorder:"0",style:"position: absolute; top: 0; left: 0; width: 100%; height: 100%"})])}},oo={match:/^link\s+to/i,render(n,{label:e}){if(n)return xt(n,e)}},ao={match:/^restart\s+link/i,render(n,{label:e}){return R("restart-link",{class:"link"},[e??"Restart"])}},lo={match:/^reveal\s+link/i,render(n,e){if(n){if(e.text)return R("reveal-link",{class:"link",text:e.text},[n]);if(e.passage)return R("reveal-link",{class:"link",passage:e.passage},[n])}}},co={match:/^sound\s+effect/i,render(n,{volume:e}){const t=p(`sound.effect.${n}.description`)??"";return e&&$(`sound.effect.${n}.volume`,e),$(`sound.effect.${n}.playing`,!0),`<audio>${t}</audio>`}},uo={match:/^text\s+input(\s+for)?/i,render(n,e){return R("variable-binding",{name:n??void 0},[ke("input",{type:"text",value:n?(p(n)??"").toString():"",required:e.required!==!1?"":void 0})])}},fo={match:/^theme\s+switcher$/i,render(n,{darkLabel:e,lightLabel:t,prefix:r,suffix:i}){return R("theme-switcher",{prefix:r,suffix:i,class:"link","dark-label":e,"light-label":t},[])}},Cn=[Xs,Ks,Ys,eo,to,no,ro,io,so,oo,ao,lo,co,uo,fo];let ue=[...Cn];function An(){return ue}function ho(n){ue=[...ue,n]}function po(n){ue=ue.filter(e=>e!==n)}function go(){ue=[...Cn]}const mo=Object.freeze(Object.defineProperty({__proto__:null,add:ho,all:An,remove:po,reset:go},Symbol.toStringTag,{value:"Module"}));function Ln(n,e,t={}){const r=`<${e}`+Object.keys(t).reduce((s,a)=>`${s} ${a}="${t[a]}"`,"")+">";let i=r+n.replace(/[\r\n]{2,}/g,`</${e}>$&${r}`)+`</${e}>`;return i=i.replace(/(<span.*?>)\s*(#+)/gi,"$2 $1"),i}const bo={match:/^after\s/i,process(n,{invocation:e}){const t=Ie(e.replace(/^after\s/i,""),"ms");n.text=Ln(n.text,"skippable-animation",{"skippable-delay":t.toString(),class:"fade-in"})}},yo={match:/^align\s+(left|right|center)/i,process(n,{invocation:e}){const t=e.replace(/^align\s+/i,"");n.text=Ln(n.text,"span",{style:`display: block; text-align: ${t}`})}},wo={match:/^append$/i,process(n){n.startsNewParagraph=!1}},ko={match:/^if(always|never)?\s|else$|unless\s/i,processRaw(n,{invocation:e,state:t}){const r=e.replace(/\s.*/,"").toLowerCase(),i=()=>new Function("return "+e.replace(/.*?\s/,"")).apply(window);switch(r){case"if":t.conditionEval=i();break;case"ifalways":t.conditionEval=!0;break;case"ifnever":t.conditionEval=!1;break;case"unless":t.conditionEval=!i();break;case"else":if(t.conditionEval===void 0)throw new Error("There was no matching if modifier for an else modifier.");t.conditionEval=!t.conditionEval;break}t.conditionEval||(n.text="")}},xo={match:/^continued?|cont('d)?$/i,process(){}},vo={match:/^css$/i,processRaw(n){n.text=`<style>${n.text}</style>`}},$o={match:/^javascript$/i,processRaw(n){try{const e=new Function(`
						function write() { write.__out += write.__join.call(arguments, ''); }
						write.__out = '';
						write.__join = Array.prototype.join;
						${qi(n.text)};
						return write.__out;
					`);n.text=e.apply(window)}catch(e){if(p("config.testing")){const t=e;let r="unknown error";t.stack?r=t.stack:r=t.message+`
[No stack trace available]`,n.text=`<div class="error">An error occurred evaluating:<pre>${n.text}</pre><p><pre>${r}</pre></p></div>`}else throw e}}},So={match:/^(note(\s+to\s+myself)?|n\.?b\.?|todo|fixme)$/i,process(n){n.text=""}},zn=[bo,yo,wo,ko,xo,vo,$o,So];let ne=[...zn];function Pn(){return ne}function Eo(n){ne=[...ne,n]}function _o(n){ne=ne.filter(e=>e!==n)}function To(){ne=[...zn]}const Co=Object.freeze(Object.defineProperty({__proto__:null,add:Eo,all:Pn,get modifiers(){return ne},remove:_o,reset:To},Symbol.toStringTag,{value:"Module"})),{log:be,warn:Ao}=F("parse"),Lo={varsSep:/^--$/m,modifierPattern:/^\[([^[].+[^\]])\]$/gm};function zo(n,e=Lo){const t={vars:[],blocks:[]},r=n.split(e.varsSep,2);let i,s;r.length===2?(be("Detected vars section"),[i,s]=r,i.split(/\r?\n/).forEach(c=>{if(c.trim()==="")return;const d=c.indexOf(":");if(d!==-1){const f=c.substring(0,d).trim(),h=c.substring(d+1).trim(),m={name:f,value:new Function(`return (${h})`)},v=f.match(/\(.+\)/);if(v){if(!v.index)throw new Error(`A condition was found in "${f}", but no index was present in the regular expression match.`);m.condition=new Function(`return !!(${v[0]})`),m.name=m.name.substring(0,v.index).trim(),be(`Setting variable "${m.name}" to "${h}" with condition (${v[0]})`)}else be(`Setting variable "${f}" to "${h}" without condition`);t.vars.push(m)}else Ao(`The line "${c}" in the vars section is missing a colon. It was ignored.`)})):(be("No vars section detected"),s=r[0]);function a(c,d){const f=d.trim();f!==""&&(be(`Creating '${c}' block with content: "${f}"`),t.blocks.push({type:c,content:f}))}const l=new RegExp(e.modifierPattern);let o=0,u=l.exec(s);for(;u;){a("text",s.substring(o,u.index));const c=u[1];let d="";for(let f=0;f<c.length;f++)switch(c[f]){case'"':for(d+='"',f=f+1;f<c.length&&(d+=c[f],!(c[f]==='"'&&c[f-1]!=="\\"));f++);break;case";":a("modifier",d),d="";break;default:d+=c[f]}a("modifier",d),o=l.lastIndex,u=l.exec(s)}return a("text",s.substring(o)),t}function On(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let oe=On();function Po(n){oe=n}const In=/[&<>"']/,Oo=new RegExp(In.source,"g"),Nn=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Io=new RegExp(Nn.source,"g"),No={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Dt=n=>No[n];function I(n,e){if(e){if(In.test(n))return n.replace(Oo,Dt)}else if(Nn.test(n))return n.replace(Io,Dt);return n}const Ro=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function Rn(n){return n.replace(Ro,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const Mo=/(^|[^\[])\^/g;function E(n,e){n=typeof n=="string"?n:n.source,e=e||"";const t={replace:(r,i)=>(i=i.source||i,i=i.replace(Mo,"$1"),n=n.replace(r,i),t),getRegex:()=>new RegExp(n,e)};return t}const Do=/[^\w:]/g,jo=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function jt(n,e,t){if(n){let r;try{r=decodeURIComponent(Rn(t)).replace(Do,"").toLowerCase()}catch{return null}if(r.indexOf("javascript:")===0||r.indexOf("vbscript:")===0||r.indexOf("data:")===0)return null}e&&!jo.test(t)&&(t=Bo(e,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const Ce={},qo=/^[^:]+:\/*[^/]*$/,Ho=/^([^:]+:)[\s\S]*$/,Fo=/^([^:]+:\/*[^/]*)[\s\S]*$/;function Bo(n,e){Ce[" "+n]||(qo.test(n)?Ce[" "+n]=n+"/":Ce[" "+n]=ze(n,"/",!0)),n=Ce[" "+n];const t=n.indexOf(":")===-1;return e.substring(0,2)==="//"?t?e:n.replace(Ho,"$1")+e:e.charAt(0)==="/"?t?e:n.replace(Fo,"$1")+e:n+e}const Ne={exec:function(){}};function qt(n,e){const t=n.replace(/\|/g,(s,a,l)=>{let o=!1,u=a;for(;--u>=0&&l[u]==="\\";)o=!o;return o?"|":" |"}),r=t.split(/ \|/);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(/\\\|/g,"|");return r}function ze(n,e,t){const r=n.length;if(r===0)return"";let i=0;for(;i<r;){const s=n.charAt(r-i-1);if(s===e&&!t)i++;else if(s!==e&&t)i++;else break}return n.slice(0,r-i)}function Uo(n,e){if(n.indexOf(e[1])===-1)return-1;const t=n.length;let r=0,i=0;for(;i<t;i++)if(n[i]==="\\")i++;else if(n[i]===e[0])r++;else if(n[i]===e[1]&&(r--,r<0))return i;return-1}function Vo(n){n&&n.sanitize&&!n.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function Ht(n,e){if(e<1)return"";let t="";for(;e>1;)e&1&&(t+=n),e>>=1,n+=n;return t+n}function Ft(n,e,t,r){const i=e.href,s=e.title?I(e.title):null,a=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){r.state.inLink=!0;const l={type:"link",raw:t,href:i,title:s,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}return{type:"image",raw:t,href:i,title:s,text:I(a)}}function Wo(n,e){const t=n.match(/^(\s+)(?:```)/);if(t===null)return e;const r=t[1];return e.split(`
`).map(i=>{const s=i.match(/^\s+/);if(s===null)return i;const[a]=s;return a.length>=r.length?i.slice(r.length):i}).join(`
`)}class vt{constructor(e){this.options=e||oe}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const r=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:ze(r,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const r=t[0],i=Wo(r,t[3]||"");return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline._escapes,"$1"):t[2],text:i}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(/#$/.test(r)){const i=ze(r,"#");(this.options.pedantic||!i||/ $/.test(i))&&(r=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const r=t[0].replace(/^ *>[ \t]?/gm,""),i=this.lexer.state.top;this.lexer.state.top=!0;const s=this.lexer.blockTokens(r);return this.lexer.state.top=i,{type:"blockquote",raw:t[0],tokens:s,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r,i,s,a,l,o,u,c,d,f,h,m,v=t[1].trim();const O=v.length>1,x={type:"list",raw:"",ordered:O,start:O?+v.slice(0,-1):"",loose:!1,items:[]};v=O?`\\d{1,9}\\${v.slice(-1)}`:`\\${v}`,this.options.pedantic&&(v=O?v:"[*+-]");const A=new RegExp(`^( {0,3}${v})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;e&&(m=!1,!(!(t=A.exec(e))||this.rules.block.hr.test(e)));){if(r=t[0],e=e.substring(r.length),c=t[2].split(`
`,1)[0].replace(/^\t+/,w=>" ".repeat(3*w.length)),d=e.split(`
`,1)[0],this.options.pedantic?(a=2,h=c.trimLeft()):(a=t[2].search(/[^ ]/),a=a>4?1:a,h=c.slice(a),a+=t[1].length),o=!1,!c&&/^ *$/.test(d)&&(r+=d+`
`,e=e.substring(d.length+1),m=!0),!m){const w=new RegExp(`^ {0,${Math.min(3,a-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),k=new RegExp(`^ {0,${Math.min(3,a-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),T=new RegExp(`^ {0,${Math.min(3,a-1)}}(?:\`\`\`|~~~)`),C=new RegExp(`^ {0,${Math.min(3,a-1)}}#`);for(;e&&(f=e.split(`
`,1)[0],d=f,this.options.pedantic&&(d=d.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(T.test(d)||C.test(d)||w.test(d)||k.test(e)));){if(d.search(/[^ ]/)>=a||!d.trim())h+=`
`+d.slice(a);else{if(o||c.search(/[^ ]/)>=4||T.test(c)||C.test(c)||k.test(c))break;h+=`
`+d}!o&&!d.trim()&&(o=!0),r+=f+`
`,e=e.substring(f.length+1),c=d.slice(a)}}x.loose||(u?x.loose=!0:/\n *\n *$/.test(r)&&(u=!0)),this.options.gfm&&(i=/^\[[ xX]\] /.exec(h),i&&(s=i[0]!=="[ ] ",h=h.replace(/^\[[ xX]\] +/,""))),x.items.push({type:"list_item",raw:r,task:!!i,checked:s,loose:!1,text:h}),x.raw+=r}x.items[x.items.length-1].raw=r.trimRight(),x.items[x.items.length-1].text=h.trimRight(),x.raw=x.raw.trimRight();const M=x.items.length;for(l=0;l<M;l++)if(this.lexer.state.top=!1,x.items[l].tokens=this.lexer.blockTokens(x.items[l].text,[]),!x.loose){const w=x.items[l].tokens.filter(T=>T.type==="space"),k=w.length>0&&w.some(T=>/\n.*\n/.test(T.raw));x.loose=k}if(x.loose)for(l=0;l<M;l++)x.items[l].loose=!0;return x}}html(e){const t=this.rules.block.html.exec(e);if(t){const r={type:"html",raw:t[0],pre:!this.options.sanitizer&&(t[1]==="pre"||t[1]==="script"||t[1]==="style"),text:t[0]};if(this.options.sanitize){const i=this.options.sanitizer?this.options.sanitizer(t[0]):I(t[0]);r.type="paragraph",r.text=i,r.tokens=this.lexer.inline(i)}return r}}def(e){const t=this.rules.block.def.exec(e);if(t){const r=t[1].toLowerCase().replace(/\s+/g," "),i=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline._escapes,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:i,title:s}}}table(e){const t=this.rules.block.table.exec(e);if(t){const r={type:"table",header:qt(t[1]).map(i=>({text:i})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(r.header.length===r.align.length){r.raw=t[0];let i=r.align.length,s,a,l,o;for(s=0;s<i;s++)/^ *-+: *$/.test(r.align[s])?r.align[s]="right":/^ *:-+: *$/.test(r.align[s])?r.align[s]="center":/^ *:-+ *$/.test(r.align[s])?r.align[s]="left":r.align[s]=null;for(i=r.rows.length,s=0;s<i;s++)r.rows[s]=qt(r.rows[s],r.header.length).map(u=>({text:u}));for(i=r.header.length,a=0;a<i;a++)r.header[a].tokens=this.lexer.inline(r.header[a].text);for(i=r.rows.length,a=0;a<i;a++)for(o=r.rows[a],l=0;l<o.length;l++)o[l].tokens=this.lexer.inline(o[l].text);return r}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:I(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):I(t[0]):t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const r=t[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const a=ze(r.slice(0,-1),"\\");if((r.length-a.length)%2===0)return}else{const a=Uo(t[2],"()");if(a>-1){const o=(t[0].indexOf("!")===0?5:4)+t[1].length+a;t[2]=t[2].substring(0,a),t[0]=t[0].substring(0,o).trim(),t[3]=""}}let i=t[2],s="";if(this.options.pedantic){const a=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);a&&(i=a[1],s=a[3])}else s=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(r)?i=i.slice(1):i=i.slice(1,-1)),Ft(t,{href:i&&i.replace(this.rules.inline._escapes,"$1"),title:s&&s.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let i=(r[2]||r[1]).replace(/\s+/g," ");if(i=t[i.toLowerCase()],!i){const s=r[0].charAt(0);return{type:"text",raw:s,text:s}}return Ft(r,i,r[0],this.lexer)}}emStrong(e,t,r=""){let i=this.rules.inline.emStrong.lDelim.exec(e);if(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))return;const s=i[1]||i[2]||"";if(!s||s&&(r===""||this.rules.inline.punctuation.exec(r))){const a=i[0].length-1;let l,o,u=a,c=0;const d=i[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(d.lastIndex=0,t=t.slice(-1*e.length+a);(i=d.exec(t))!=null;){if(l=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!l)continue;if(o=l.length,i[3]||i[4]){u+=o;continue}else if((i[5]||i[6])&&a%3&&!((a+o)%3)){c+=o;continue}if(u-=o,u>0)continue;o=Math.min(o,o+u+c);const f=e.slice(0,a+i.index+(i[0].length-l.length)+o);if(Math.min(a,o)%2){const m=f.slice(1,-1);return{type:"em",raw:f,text:m,tokens:this.lexer.inlineTokens(m)}}const h=f.slice(2,-2);return{type:"strong",raw:f,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(/\n/g," ");const i=/[^ ]/.test(r),s=/^ /.test(r)&&/ $/.test(r);return i&&s&&(r=r.substring(1,r.length-1)),r=I(r,!0),{type:"codespan",raw:t[0],text:r}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e,t){const r=this.rules.inline.autolink.exec(e);if(r){let i,s;return r[2]==="@"?(i=I(this.options.mangle?t(r[1]):r[1]),s="mailto:"+i):(i=I(r[1]),s=i),{type:"link",raw:r[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}url(e,t){let r;if(r=this.rules.inline.url.exec(e)){let i,s;if(r[2]==="@")i=I(this.options.mangle?t(r[0]):r[0]),s="mailto:"+i;else{let a;do a=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])[0];while(a!==r[0]);i=I(r[0]),r[1]==="www."?s="http://"+r[0]:s=r[0]}return{type:"link",raw:r[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e,t){const r=this.rules.inline.text.exec(e);if(r){let i;return this.lexer.state.inRawBlock?i=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):I(r[0]):r[0]:i=I(this.options.smartypants?t(r[0]):r[0]),{type:"text",raw:r[0],text:i}}}}const y={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Ne,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};y._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;y._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;y.def=E(y.def).replace("label",y._label).replace("title",y._title).getRegex();y.bullet=/(?:[*+-]|\d{1,9}[.)])/;y.listItemStart=E(/^( *)(bull) */).replace("bull",y.bullet).getRegex();y.list=E(y.list).replace(/bull/g,y.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+y.def.source+")").getRegex();y._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";y._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;y.html=E(y.html,"i").replace("comment",y._comment).replace("tag",y._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();y.paragraph=E(y._paragraph).replace("hr",y.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",y._tag).getRegex();y.blockquote=E(y.blockquote).replace("paragraph",y.paragraph).getRegex();y.normal={...y};y.gfm={...y.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"};y.gfm.table=E(y.gfm.table).replace("hr",y.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",y._tag).getRegex();y.gfm.paragraph=E(y._paragraph).replace("hr",y.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",y.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",y._tag).getRegex();y.pedantic={...y.normal,html:E(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",y._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ne,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:E(y.normal._paragraph).replace("hr",y.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",y.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const g={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Ne,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Ne,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};g._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";g.punctuation=E(g.punctuation).replace(/punctuation/g,g._punctuation).getRegex();g.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;g.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g;g._comment=E(y._comment).replace("(?:-->|$)","-->").getRegex();g.emStrong.lDelim=E(g.emStrong.lDelim).replace(/punct/g,g._punctuation).getRegex();g.emStrong.rDelimAst=E(g.emStrong.rDelimAst,"g").replace(/punct/g,g._punctuation).getRegex();g.emStrong.rDelimUnd=E(g.emStrong.rDelimUnd,"g").replace(/punct/g,g._punctuation).getRegex();g._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;g._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;g._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;g.autolink=E(g.autolink).replace("scheme",g._scheme).replace("email",g._email).getRegex();g._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;g.tag=E(g.tag).replace("comment",g._comment).replace("attribute",g._attribute).getRegex();g._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;g._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;g._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;g.link=E(g.link).replace("label",g._label).replace("href",g._href).replace("title",g._title).getRegex();g.reflink=E(g.reflink).replace("label",g._label).replace("ref",y._label).getRegex();g.nolink=E(g.nolink).replace("ref",y._label).getRegex();g.reflinkSearch=E(g.reflinkSearch,"g").replace("reflink",g.reflink).replace("nolink",g.nolink).getRegex();g.normal={...g};g.pedantic={...g.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:E(/^!?\[(label)\]\((.*?)\)/).replace("label",g._label).getRegex(),reflink:E(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",g._label).getRegex()};g.gfm={...g.normal,escape:E(g.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/};g.gfm.url=E(g.gfm.url,"i").replace("email",g.gfm._extended_email).getRegex();g.breaks={...g.gfm,br:E(g.br).replace("{2,}","*").getRegex(),text:E(g.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};function Zo(n){return n.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function Bt(n){let e="",t,r;const i=n.length;for(t=0;t<i;t++)r=n.charCodeAt(t),Math.random()>.5&&(r="x"+r.toString(16)),e+="&#"+r+";";return e}class K{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||oe,this.options.tokenizer=this.options.tokenizer||new vt,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:y.normal,inline:g.normal};this.options.pedantic?(t.block=y.pedantic,t.inline=g.pedantic):this.options.gfm&&(t.block=y.gfm,this.options.breaks?t.inline=g.breaks:t.inline=g.gfm),this.tokenizer.rules=t}static get rules(){return{block:y,inline:g}}static lex(e,t){return new K(t).lex(e)}static lexInline(e,t){return new K(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);let t;for(;t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(l,o,u)=>o+"    ".repeat(u.length));let r,i,s,a;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(l=>(r=l.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length),r.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let l=1/0;const o=e.slice(1);let u;this.options.extensions.startBlock.forEach(function(c){u=c.call({lexer:this},o),typeof u=="number"&&u>=0&&(l=Math.min(l,u))}),l<1/0&&l>=0&&(s=e.substring(0,l+1))}if(this.state.top&&(r=this.tokenizer.paragraph(s))){i=t[t.length-1],a&&i.type==="paragraph"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r),a=s.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&i.type==="text"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(e){const l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r,i,s,a=e,l,o,u;if(this.tokens.links){const c=Object.keys(this.tokens.links);if(c.length>0)for(;(l=this.tokenizer.rules.inline.reflinkSearch.exec(a))!=null;)c.includes(l[0].slice(l[0].lastIndexOf("[")+1,-1))&&(a=a.slice(0,l.index)+"["+Ht("a",l[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(l=this.tokenizer.rules.inline.blockSkip.exec(a))!=null;)a=a.slice(0,l.index)+"["+Ht("a",l[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(l=this.tokenizer.rules.inline.escapedEmSt.exec(a))!=null;)a=a.slice(0,l.index+l[0].length-2)+"++"+a.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;e;)if(o||(u=""),o=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(c=>(r=c.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length),i=t[t.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.emStrong(e,a,u)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.autolink(e,Bt)){e=e.substring(r.raw.length),t.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e,Bt))){e=e.substring(r.raw.length),t.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let c=1/0;const d=e.slice(1);let f;this.options.extensions.startInline.forEach(function(h){f=h.call({lexer:this},d),typeof f=="number"&&f>=0&&(c=Math.min(c,f))}),c<1/0&&c>=0&&(s=e.substring(0,c+1))}if(r=this.tokenizer.inlineText(s,Zo)){e=e.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(u=r.raw.slice(-1)),o=!0,i=t[t.length-1],i&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(e){const c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return t}}class He{constructor(e){this.options=e||oe}code(e,t,r){const i=(t||"").match(/\S*/)[0];if(this.options.highlight){const s=this.options.highlight(e,i);s!=null&&s!==e&&(r=!0,e=s)}return e=e.replace(/\n$/,"")+`
`,i?'<pre><code class="'+this.options.langPrefix+I(i)+'">'+(r?e:I(e,!0))+`</code></pre>
`:"<pre><code>"+(r?e:I(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e){return e}heading(e,t,r,i){if(this.options.headerIds){const s=this.options.headerPrefix+i.slug(r);return`<h${t} id="${s}">${e}</h${t}>
`}return`<h${t}>${e}</h${t}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,t,r){const i=t?"ol":"ul",s=t&&r!==1?' start="'+r+'"':"";return"<"+i+s+`>
`+e+"</"+i+`>
`}listitem(e){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>
`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,t){const r=t.header?"th":"td";return(t.align?`<${r} align="${t.align}">`:`<${r}>`)+e+`</${r}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,t,r){if(e=jt(this.options.sanitize,this.options.baseUrl,e),e===null)return r;let i='<a href="'+e+'"';return t&&(i+=' title="'+t+'"'),i+=">"+r+"</a>",i}image(e,t,r){if(e=jt(this.options.sanitize,this.options.baseUrl,e),e===null)return r;let i=`<img src="${e}" alt="${r}"`;return t&&(i+=` title="${t}"`),i+=this.options.xhtml?"/>":">",i}text(e){return e}}class Mn{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,r){return""+r}image(e,t,r){return""+r}br(){return""}}class Dn{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let r=e,i=0;if(this.seen.hasOwnProperty(r)){i=this.seen[e];do i++,r=e+"-"+i;while(this.seen.hasOwnProperty(r))}return t||(this.seen[e]=i,this.seen[r]=0),r}slug(e,t={}){const r=this.serialize(e);return this.getNextSafeSlug(r,t.dryrun)}}class Y{constructor(e){this.options=e||oe,this.options.renderer=this.options.renderer||new He,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Mn,this.slugger=new Dn}static parse(e,t){return new Y(t).parse(e)}static parseInline(e,t){return new Y(t).parseInline(e)}parse(e,t=!0){let r="",i,s,a,l,o,u,c,d,f,h,m,v,O,x,A,M,w,k,T;const C=e.length;for(i=0;i<C;i++){if(h=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[h.type]&&(T=this.options.extensions.renderers[h.type].call({parser:this},h),T!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(h.type))){r+=T||"";continue}switch(h.type){case"space":continue;case"hr":{r+=this.renderer.hr();continue}case"heading":{r+=this.renderer.heading(this.parseInline(h.tokens),h.depth,Rn(this.parseInline(h.tokens,this.textRenderer)),this.slugger);continue}case"code":{r+=this.renderer.code(h.text,h.lang,h.escaped);continue}case"table":{for(d="",c="",l=h.header.length,s=0;s<l;s++)c+=this.renderer.tablecell(this.parseInline(h.header[s].tokens),{header:!0,align:h.align[s]});for(d+=this.renderer.tablerow(c),f="",l=h.rows.length,s=0;s<l;s++){for(u=h.rows[s],c="",o=u.length,a=0;a<o;a++)c+=this.renderer.tablecell(this.parseInline(u[a].tokens),{header:!1,align:h.align[a]});f+=this.renderer.tablerow(c)}r+=this.renderer.table(d,f);continue}case"blockquote":{f=this.parse(h.tokens),r+=this.renderer.blockquote(f);continue}case"list":{for(m=h.ordered,v=h.start,O=h.loose,l=h.items.length,f="",s=0;s<l;s++)A=h.items[s],M=A.checked,w=A.task,x="",A.task&&(k=this.renderer.checkbox(M),O?A.tokens.length>0&&A.tokens[0].type==="paragraph"?(A.tokens[0].text=k+" "+A.tokens[0].text,A.tokens[0].tokens&&A.tokens[0].tokens.length>0&&A.tokens[0].tokens[0].type==="text"&&(A.tokens[0].tokens[0].text=k+" "+A.tokens[0].tokens[0].text)):A.tokens.unshift({type:"text",text:k}):x+=k),x+=this.parse(A.tokens,O),f+=this.renderer.listitem(x,w,M);r+=this.renderer.list(f,m,v);continue}case"html":{r+=this.renderer.html(h.text);continue}case"paragraph":{r+=this.renderer.paragraph(this.parseInline(h.tokens));continue}case"text":{for(f=h.tokens?this.parseInline(h.tokens):h.text;i+1<C&&e[i+1].type==="text";)h=e[++i],f+=`
`+(h.tokens?this.parseInline(h.tokens):h.text);r+=t?this.renderer.paragraph(f):f;continue}default:{const L='Token with "'+h.type+'" type was not found.';if(this.options.silent){console.error(L);return}else throw new Error(L)}}}return r}parseInline(e,t){t=t||this.renderer;let r="",i,s,a;const l=e.length;for(i=0;i<l;i++){if(s=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]&&(a=this.options.extensions.renderers[s.type].call({parser:this},s),a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type))){r+=a||"";continue}switch(s.type){case"escape":{r+=t.text(s.text);break}case"html":{r+=t.html(s.text);break}case"link":{r+=t.link(s.href,s.title,this.parseInline(s.tokens,t));break}case"image":{r+=t.image(s.href,s.title,s.text);break}case"strong":{r+=t.strong(this.parseInline(s.tokens,t));break}case"em":{r+=t.em(this.parseInline(s.tokens,t));break}case"codespan":{r+=t.codespan(s.text);break}case"br":{r+=t.br();break}case"del":{r+=t.del(this.parseInline(s.tokens,t));break}case"text":{r+=t.text(s.text);break}default:{const o='Token with "'+s.type+'" type was not found.';if(this.options.silent){console.error(o);return}else throw new Error(o)}}}return r}}class Re{constructor(e){this.options=e||oe}preprocess(e){return e}postprocess(e){return e}}U(Re,"passThroughHooks",new Set(["preprocess","postprocess"]));function Go(n,e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,n){const i="<p>An error occurred:</p><pre>"+I(r.message+"",!0)+"</pre>";if(e)return Promise.resolve(i);if(t){t(null,i);return}return i}if(e)return Promise.reject(r);if(t){t(r);return}throw r}}function jn(n,e){return(t,r,i)=>{typeof r=="function"&&(i=r,r=null);const s={...r};r={...b.defaults,...s};const a=Go(r.silent,r.async,i);if(typeof t>"u"||t===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(Vo(r),r.hooks&&(r.hooks.options=r),i){const l=r.highlight;let o;try{r.hooks&&(t=r.hooks.preprocess(t)),o=n(t,r)}catch(d){return a(d)}const u=function(d){let f;if(!d)try{r.walkTokens&&b.walkTokens(o,r.walkTokens),f=e(o,r),r.hooks&&(f=r.hooks.postprocess(f))}catch(h){d=h}return r.highlight=l,d?a(d):i(null,f)};if(!l||l.length<3||(delete r.highlight,!o.length))return u();let c=0;b.walkTokens(o,function(d){d.type==="code"&&(c++,setTimeout(()=>{l(d.text,d.lang,function(f,h){if(f)return u(f);h!=null&&h!==d.text&&(d.text=h,d.escaped=!0),c--,c===0&&u()})},0))}),c===0&&u();return}if(r.async)return Promise.resolve(r.hooks?r.hooks.preprocess(t):t).then(l=>n(l,r)).then(l=>r.walkTokens?Promise.all(b.walkTokens(l,r.walkTokens)).then(()=>l):l).then(l=>e(l,r)).then(l=>r.hooks?r.hooks.postprocess(l):l).catch(a);try{r.hooks&&(t=r.hooks.preprocess(t));const l=n(t,r);r.walkTokens&&b.walkTokens(l,r.walkTokens);let o=e(l,r);return r.hooks&&(o=r.hooks.postprocess(o)),o}catch(l){return a(l)}}}function b(n,e,t){return jn(K.lex,Y.parse)(n,e,t)}b.options=b.setOptions=function(n){return b.defaults={...b.defaults,...n},Po(b.defaults),b};b.getDefaults=On;b.defaults=oe;b.use=function(...n){const e=b.defaults.extensions||{renderers:{},childTokens:{}};n.forEach(t=>{const r={...t};if(r.async=b.defaults.async||r.async||!1,t.extensions&&(t.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if(i.renderer){const s=e.renderers[i.name];s?e.renderers[i.name]=function(...a){let l=i.renderer.apply(this,a);return l===!1&&(l=s.apply(this,a)),l}:e.renderers[i.name]=i.renderer}if(i.tokenizer){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");e[i.level]?e[i.level].unshift(i.tokenizer):e[i.level]=[i.tokenizer],i.start&&(i.level==="block"?e.startBlock?e.startBlock.push(i.start):e.startBlock=[i.start]:i.level==="inline"&&(e.startInline?e.startInline.push(i.start):e.startInline=[i.start]))}i.childTokens&&(e.childTokens[i.name]=i.childTokens)}),r.extensions=e),t.renderer){const i=b.defaults.renderer||new He;for(const s in t.renderer){const a=i[s];i[s]=(...l)=>{let o=t.renderer[s].apply(i,l);return o===!1&&(o=a.apply(i,l)),o}}r.renderer=i}if(t.tokenizer){const i=b.defaults.tokenizer||new vt;for(const s in t.tokenizer){const a=i[s];i[s]=(...l)=>{let o=t.tokenizer[s].apply(i,l);return o===!1&&(o=a.apply(i,l)),o}}r.tokenizer=i}if(t.hooks){const i=b.defaults.hooks||new Re;for(const s in t.hooks){const a=i[s];Re.passThroughHooks.has(s)?i[s]=l=>{if(b.defaults.async)return Promise.resolve(t.hooks[s].call(i,l)).then(u=>a.call(i,u));const o=t.hooks[s].call(i,l);return a.call(i,o)}:i[s]=(...l)=>{let o=t.hooks[s].apply(i,l);return o===!1&&(o=a.apply(i,l)),o}}r.hooks=i}if(t.walkTokens){const i=b.defaults.walkTokens;r.walkTokens=function(s){let a=[];return a.push(t.walkTokens.call(this,s)),i&&(a=a.concat(i.call(this,s))),a}}b.setOptions(r)})};b.walkTokens=function(n,e){let t=[];for(const r of n)switch(t=t.concat(e.call(b,r)),r.type){case"table":{for(const i of r.header)t=t.concat(b.walkTokens(i.tokens,e));for(const i of r.rows)for(const s of i)t=t.concat(b.walkTokens(s.tokens,e));break}case"list":{t=t.concat(b.walkTokens(r.items,e));break}default:b.defaults.extensions&&b.defaults.extensions.childTokens&&b.defaults.extensions.childTokens[r.type]?b.defaults.extensions.childTokens[r.type].forEach(function(i){t=t.concat(b.walkTokens(r[i],e))}):r.tokens&&(t=t.concat(b.walkTokens(r.tokens,e)))}return t};b.parseInline=jn(K.lexInline,Y.parseInline);b.Parser=Y;b.parser=Y.parse;b.Renderer=He;b.TextRenderer=Mn;b.Lexer=K;b.lexer=K.lex;b.Tokenizer=vt;b.Slugger=Dn;b.Hooks=Re;b.parse=b;b.options;b.setOptions;b.use;b.walkTokens;b.parseInline;Y.parse;K.lex;const $t=new He;$t.blockquote=n=>`<div class="fork">${n}</div>`;$t.del=n=>`<span class="small-caps">${n}</span>`;function Jo(n,e){var r,i;const t=n.substring(1,n.length-1).trim();if(/\s/.test(t)){const s=(r=t.match(/^[^:,]+/))==null?void 0:r[0];if(!s)return n;const a=e.find(l=>l.match.test(s));if(a){const l=t.replace(s,"");if(l[0]===":"){const o=new Function(`return {"${s}" ${l}}`)(),u=o[s];return delete o[s],a.render(u,o,t)}else if(l[0]===","){const o=new Function(`return {${l.substring(1)}}`)();return a.render(null,o,t)}else if(l==="")return a.render(null,{},t)}}else{const s=/(.+)\[(.+)\]$/.exec(t);let a;if(s?a=(i=p(s[1]))==null?void 0:i[s[2]]:a=p(t),a!==void 0)return a}return n}function Xo(n,e){let t="",r=0,i=n.indexOf("{");if(i===-1)return n;let s=!1,a;for(let l=i+1;l<n.length;l++)switch(n[l]){case"{":s||(i=l);break;case'"':case"'":l>0&&n[l-1]!=="\\"&&(s?s&&a===n[l]&&(s=!1):(s=!0,a=n[l]));break;case"}":if(!s){const o=n.substring(i,l+1);let u="";try{u=Jo(o,e)}catch(c){console.warn(`An error occurred while rendering "${o}": ${c.message}`),u=o}u===void 0&&(u=""),t+=n.substring(r,i)+u,r=l+1,i=n.indexOf("{",r),l=i,i===-1&&(l=n.length)}break}return t+n.substring(r)}const{log:Z}=F("render"),Qo={renderer:$t,smartypants:!0};function Ko(n,e,t,r=!1){if(!n.vars)throw new Error("The renderer was given an object with no vars property.");if(!n.blocks)throw new Error("The renderer was given an object with no blocks property.");let i="";if(!r){Z(`Setting vars (${n.vars.length})`);for(const o of n.vars)o.condition?o.condition()?(Z(`Setting var "${o.name}" (condition is currently true)`),$(o.name,o.value())):Z(`Not setting var "${o.name}" (condition is currently false)`):(Z(`Setting var "${o.name}"`),$(o.name,o.value()))}let s=[];const a=new Map;for(const o of n.blocks)switch(o.type){case"text":{const u={text:o.content,startsNewParagraph:!0},c=s.filter(f=>!!f.modifier.processRaw);Z(`Running ${c.length} modifiers on raw source block`);for(const{invocation:f,modifier:h}of c){const m=a.get(h);if(!m)throw new Error("State for a modifier was unknown, but should have had a value.");if(!h.processRaw)throw new Error("A modifier was added to the raw modifiers list, but it has no processRaw function.");h.processRaw(u,{state:m,invocation:f})}u.text=Xo(Qs(u.text),e);const d=s.filter(f=>!!f.modifier.process);Z(`Running ${d.length} modifiers on source block`);for(const{invocation:f,modifier:h}of d){const m=a.get(h);if(!m)throw new Error("State for a modifier was unknown, but should have had a value.");if(!h.process)throw new Error("A modifier was added to the processed modifiers list, but it has no process function.");h.process(u,{state:m,invocation:f})}Z(`Output after modifiers: ${JSON.stringify(u)}`),u.text.trim()!==""&&(i!==""&&(i+=u.startsNewParagraph?`

`:" "),i+=u.text),s=[];break}case"modifier":{const u=t.filter(c=>c.match.test(o.content));if(u.length===1){const c=u[0];Z(`Activated modifier matching [${o.content}]`),a.has(c)||a.set(c,{}),s.push({modifier:c,invocation:o.content})}else u.length===0?i+=`

[${o.content}]

`:(console.warn(`More than one modifier matched "[${o.content}]".`),i+=`

[${o.content}]

`);break}default:throw new Error(`Don't know how to render a block with type "${o.type}".`)}const l=/^((>|-|(\*\s)).*$)\n{2,}\2/gm;for(;l.test(i);)i=i.replace(l,`$1
$2`);return b.setOptions(Qo),Z(`Final Markdown:
${i}`),b(i)}function $e(n,e=!1){return Ko(zo(n),An(),Pn(),e)}class Yo extends fe{constructor(){super(),this.addEventListener("click",()=>{let e=this.getAttribute("text");const t=this.getAttribute("passage");if(t){const r=Se(t);r&&(e=r.source)}if(e){const r=document.createElement("div");r.innerHTML=$e(e).trim();const i=this.closest("page-transition");if(!i)throw new Error("Couldn't find suitable parent element to do a reveal link transition on.");i.startTransition(()=>{var a,l;const s=r.children.length;if(s>0&&this.parentNode){const o=document.createElement("span");if(o.innerHTML=((a=r.firstElementChild)==null?void 0:a.innerHTML)??"",this.parentNode.insertBefore(o,this),(l=r.firstElementChild)==null||l.remove(),s>1&&this.parentNode.parentNode&&r.lastChild){const u=r.lastChild;for(;r.lastChild;)this.parentNode.parentNode.insertBefore(r.lastChild,this.parentNode.nextSibling);for(;this.nextSibling;)u.insertBefore(this.nextSibling,null)}}this.remove()})}})}}class qn extends z{attributeChangedCallback(){const e=this.getAttribute("skippable-delay");if(!e)return;const t=parseInt(e);if(isFinite(t))if(t===0){this.style.animationDelay="";const r=this.className;this.className="",this.offsetWidth,this.className=r}else this.style.animationDelay=`${t}ms`}}U(qn,"observedAttributes",["skippable-delay"]);class Hn extends fe{constructor(){super(),this.addEventListener("click",this),window.addEventListener("state-change",this)}connectedCallback(){super.connectedCallback(),this.updateLabel(),this.updateVisibility()}disconnectedCallback(){window.removeEventListener("state-change",this)}handleEvent(e){if(e.type==="click")$("config.style.page.theme.override",p("browser.darkTheme")?"light":"dark"),this.updateLabel();else{const{detail:t}=e;t.name==="config.style.page.theme.enableSwitching"&&this.updateVisibility()}}updateLabel(){const e=p("browser.darkTheme")?"dark":"light";this.innerHTML=this.getAttribute(`${e}-label`)??"Switch Theme"}updateVisibility(){p("config.style.page.theme.enableSwitching")?this.removeAttribute("hidden"):this.setAttribute("hidden","")}attributeChangedCallback(){this.updateLabel()}}U(Hn,"observedAttributes",["dark-label","light-label"]);class ea extends z{constructor(){super(),this.delegate("change","input, select",e=>{const t=this.getAttribute("name"),r=e.target;if(t)switch(r.nodeName){case"INPUT":$(t,r.value);break;case"SELECT":{const i=r.querySelectorAll("option")[r.selectedIndex];$(t,i.dataset.jsonValue?JSON.parse(i.dataset.jsonValue):i.value)}}})}}function ta(){wt({"cycling-link":Ws,"inline-button":fe,"passage-link":Gs,"restart-link":Js,"reveal-link":Yo,"skippable-animation":qn,"theme-switcher":Hn,"variable-binding":ea})}function Fn(){ta()}const na=Object.freeze(Object.defineProperty({__proto__:null,initTemplate:Fn,inserts:mo,modifiers:Co,render:$e},Symbol.toStringTag,{value:"Module"})),ra=hn(n=>{if(n.some(e=>e[0])){const e=p("trail");if(!Array.isArray(e))throw new Error("The trail variable has been set to a non-array value.");if(typeof e[e.length-1]!="string")throw new Error("The last value in the trail variable is not a string.");const r=Se(e[e.length-1]);if(!r)throw new Error(`There is no passage named "${e[e.length-1]}".`);const i=$e(r.source),s={footer:{center:"",left:"",right:""},header:{center:"",left:"",right:""}};for(const a in s)for(const l in s[a])s[a][l]=$e(p(`config.${a}.${l}`).toString());window.dispatchEvent(new CustomEvent("display-change",{detail:{body:i,...s}}))}});let Ue;function ia(){window.addEventListener("state-change",({detail:n})=>{ra(n.name==="trail")}),Ue=window.matchMedia("(prefers-color-scheme: dark)"),Ue.addEventListener("change",()=>{window.dispatchEvent(new CustomEvent("system-theme-change",{detail:{theme:Ue.matches?"dark":"light"}}))})}const sa={"config.body.transition.name":"crossfade","config.body.transition.duration":"300ms","config.header.left":"","config.header.center":"","config.header.right":"","config.footer.left":"_{story.name}_","config.footer.center":"","config.footer.right":"{theme switcher}&emsp;{restart link}"};function oa(){ie(sa),Vs(),ia()}const{warn:Ae}=F("extensibility");function Ut(n){return n.split(".").map(window.parseInt)}function aa(){window.engine={extend(n,e){const t=p("engine.version");if(typeof t!="string")throw new Error(`engine.version has been set to a ${typeof t}, not a string.`);const r=Ut(n),i=Ut(t);if(i[0]<r[0]){Ae(`The current engine version (${t}) has a lower major version than requested (${n}); skipping`);return}i[0]>r[0]?Ae(`The current engine version (${t}) has a higher major version than requested (${n}); running code but you may encounter problems`):(i[1]<r[1]&&Ae(`The current engine version (${t}) has a lower minor version than requested (${n}); running code but you may encounter problems`),i[1]===r[1]&&i[2]<r[2]&&Ae(`The current engine version (${t}) has a lower patch version than requested (${n}); running code but you may encounter problems`)),e()},log:Xt,state:Zi,story:Gi,template:na,warn:Qt}}function la(n,e,t,r){return(n/=r/2)<1?t/2*n*n+e:-t/2*(--n*(n-2)-1)+e}function Bn(n,e,t){const r=n.volume,i=e-r;let s,a=0;return n.volume===e?Promise.resolve():new Promise(l=>window.requestAnimationFrame(o=>{function u(c){a+=c-s,n.volume=la(a,r,i,t),a<t?(s=c,window.requestAnimationFrame(u)):l()}s=o,window.requestAnimationFrame(u)}))}const{log:Xe}=F("sound"),S={};function Ve(n,e,t){S[n]?(S[n].setAttribute("src",e),t?S[n].setAttribute("preload","auto"):S[n].removeAttribute("preload"),Xe(`Updated <audio> element in sound bank for "${n}" to use ${e}`)):(S[n]=document.createElement("audio"),S[n].setAttribute("src",e),t&&S[n].setAttribute("preload","auto"),Xe(`Added new <audio> element to sound bank for "${n}" for ${e}`))}async function Le(n,e=!1,t=0){if(!S[n])throw new Error(`There is no sound loaded named ${n}.`);return Xe(`Playing sound "${n}" (looping: ${e})`),t>0&&(S[n].volume=0,Bn(S[n],1,t)),e?(S[n].loop=!0,S[n].play()):(S[n].loop=!1,new Promise((r,i)=>{try{S[n].addEventListener("ended",function s(){S[n].removeEventListener("ended",s),r()}),S[n].play().catch(s=>i(s))}catch(s){i(s)}}))}function Vt(n,e=0){if(!S[n])throw new Error(`There is no sound loaded named ${n}.`);if(e<=0)S[n].pause(),S[n].currentTime=0;else{const t=S[n].volume;Bn(S[n],0,e).then(()=>{S[n].pause(),S[n].volume=t,S[n].currentTime=0})}}function Wt(n,e){if(!S[n])throw new Error(`There is no sound loaded named ${n}.`);S[n].muted=e}function We(n,e){if(!S[n])throw new Error(`There is no sound loaded named ${n}.`);if(e<0||e>1)throw new Error("A sound volume must be between 0 and 1.");S[n].volume=e}const{warn:Zt}=F("sound");function ca(){ie({"sound.mute":!1,"sound.volume":1,"sound.transitionDuration":"1s"}),window.addEventListener("state-change",({detail:n})=>{const{name:e,value:t}=n,r=["sound","sound.ambient"].includes(e),i=["sound","sound.effect"].includes(e);if(r){const a=p("sound.ambient");if(typeof a=="object"&&a){const l=a;for(const o in l)typeof l[o].url=="string"&&Ve(o,l[o].url,!1),typeof l[o].volume=="number"&&We(o,l[o].volume),"muted"in l[o]&&Wt(o,!!l[o].muted),l[o].playing===!0&&Le(o,!0).catch(u=>Zt(`Could not resume playing ambient sound "${o}" (${u.message})`))}}if(i){const a=p("sound.effect");if(typeof a=="object"&&a){const l=a;for(const o in l)typeof l[o].url=="string"&&Ve(o,l[o].url,!0),typeof l[o].volume=="number"&&We(o,l[o].volume),"muted"in l[o]&&Wt(o,!!l[o].muted),l[o].playing&&Le(o,!1).then(()=>$(`sound.effect.${o}.playing`,!1)).catch(u=>Zt(`Could not resume playing sound effect "${o}" (${u.message}`))}}if(r||i)return;const s=/^sound\.(ambient|effect)\.(.+?)\.(.+)$/i.exec(e);if(s)switch(s[3].toLowerCase()){case"playing":{let a="0s";typeof p(`${s[2]}.transitionDuration`)=="string"&&(a=p(`${s[2]}.transitionDuration`)),typeof p("sound.transitionDuration")=="string"&&(a=p("sound.transitionDuration")),t?s[1]==="ambient"?Le(s[2],!0,Ie(a,"ms")):Le(s[2],!1).then(()=>$(e,!1)):s[1]==="ambient"?Vt(s[2],Ie(a,"ms")):Vt(s[2]);break}case"url":Ve(s[2],t,s[1]==="effect");break;case"volume":We(s[2],t);break}})}function ua(){_("browser.darkSystemTheme",()=>!!(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches)),_("browser.darkTheme",()=>{if(!p("config.style.page.theme.enableSwitching"))return!1;switch(p("config.style.page.theme.override")){case"dark":return!0;case"light":return!1;default:return p("browser.darkSystemTheme")}}),_("browser.height",()=>window.innerHeight),_("browser.online",()=>window.navigator.onLine),_("browser.width",()=>window.innerWidth)}const da="2.3.0";function fa(){_("engine.version",()=>da)}function ha(){_("now.datestamp",()=>new Date().toLocaleDateString(navigator.language)),_("now.second",()=>new Date().getSeconds()),_("now.minute",()=>new Date().getMinutes()),_("now.hour",()=>new Date().getHours()),_("now.day",()=>new Date().getDate()),_("now.weekday",()=>new Date().getDay()+1),_("now.weekdayName",()=>new Date().toLocaleString(navigator.language,{weekday:"long"})),_("now.month",()=>new Date().getMonth()+1),_("now.monthName",()=>new Date().toLocaleString(navigator.language,{month:"long"})),_("now.year",()=>new Date().getFullYear()),_("now.timestamp",()=>new Date().toLocaleString(navigator.language,{hour:"numeric",minute:"numeric",second:"numeric"}))}const{warn:Ze}=F("lookups");let Gt;function pa(){_("passage.from",()=>{const n=p("trail");if(!Array.isArray(n)){Ze(`The trail variable has been set to a ${typeof n}, not an array.`);return}if(n.length>1)return n[n.length-2]}),window.addEventListener("passage-navigate",n=>{n.target&&(Gt=n.target.innerText)}),_("passage.fromText",()=>Gt),_("passage.name",()=>{const n=p("trail");if(!Array.isArray(n)){Ze(`The trail variable has been set to a ${typeof n}, not an array.`);return}return n[n.length-1]}),_("passage.visits",()=>{const n=p("trail"),e=p("passage.name");return Array.isArray(n)?n.reduce((t,r)=>r===e?t+1:t,0):(Ze(`The trail variable has been set to a ${typeof n}, not an array.`),0)})}var Qe={},ga={get exports(){return Qe},set exports(n){Qe=n}};(function(n){(function(e,t,r){function i(o){var u=this,c=l();u.next=function(){var d=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=d-(u.c=d|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(o),u.s0<0&&(u.s0+=1),u.s1-=c(o),u.s1<0&&(u.s1+=1),u.s2-=c(o),u.s2<0&&(u.s2+=1),c=null}function s(o,u){return u.c=o.c,u.s0=o.s0,u.s1=o.s1,u.s2=o.s2,u}function a(o,u){var c=new i(o),d=u&&u.state,f=c.next;return f.int32=function(){return c.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,d&&(typeof d=="object"&&s(d,c),f.state=function(){return s(c,{})}),f}function l(){var o=4022871197,u=function(c){c=String(c);for(var d=0;d<c.length;d++){o+=c.charCodeAt(d);var f=.02519603282416938*o;o=f>>>0,f-=o,f*=o,o=f>>>0,f-=o,o+=f*4294967296}return(o>>>0)*23283064365386963e-26};return u}t&&t.exports?t.exports=a:r&&r.amd?r(function(){return a}):this.alea=a})(se,n,!1)})(ga);var Ke={},ma={get exports(){return Ke},set exports(n){Ke=n}};(function(n){(function(e,t,r){function i(l){var o=this,u="";o.x=0,o.y=0,o.z=0,o.w=0,o.next=function(){var d=o.x^o.x<<11;return o.x=o.y,o.y=o.z,o.z=o.w,o.w^=o.w>>>19^d^d>>>8},l===(l|0)?o.x=l:u+=l;for(var c=0;c<u.length+64;c++)o.x^=u.charCodeAt(c)|0,o.next()}function s(l,o){return o.x=l.x,o.y=l.y,o.z=l.z,o.w=l.w,o}function a(l,o){var u=new i(l),c=o&&o.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(f+h)/(1<<21);while(m===0);return m},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&s(c,u),d.state=function(){return s(u,{})}),d}t&&t.exports?t.exports=a:r&&r.amd?r(function(){return a}):this.xor128=a})(se,n,!1)})(ma);var Ye={},ba={get exports(){return Ye},set exports(n){Ye=n}};(function(n){(function(e,t,r){function i(l){var o=this,u="";o.next=function(){var d=o.x^o.x>>>2;return o.x=o.y,o.y=o.z,o.z=o.w,o.w=o.v,(o.d=o.d+362437|0)+(o.v=o.v^o.v<<4^(d^d<<1))|0},o.x=0,o.y=0,o.z=0,o.w=0,o.v=0,l===(l|0)?o.x=l:u+=l;for(var c=0;c<u.length+64;c++)o.x^=u.charCodeAt(c)|0,c==u.length&&(o.d=o.x<<10^o.x>>>4),o.next()}function s(l,o){return o.x=l.x,o.y=l.y,o.z=l.z,o.w=l.w,o.v=l.v,o.d=l.d,o}function a(l,o){var u=new i(l),c=o&&o.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(f+h)/(1<<21);while(m===0);return m},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&s(c,u),d.state=function(){return s(u,{})}),d}t&&t.exports?t.exports=a:r&&r.amd?r(function(){return a}):this.xorwow=a})(se,n,!1)})(ba);var et={},ya={get exports(){return et},set exports(n){et=n}};(function(n){(function(e,t,r){function i(l){var o=this;o.next=function(){var c=o.x,d=o.i,f,h;return f=c[d],f^=f>>>7,h=f^f<<24,f=c[d+1&7],h^=f^f>>>10,f=c[d+3&7],h^=f^f>>>3,f=c[d+4&7],h^=f^f<<7,f=c[d+7&7],f=f^f<<13,h^=f^f<<9,c[d]=h,o.i=d+1&7,h};function u(c,d){var f,h=[];if(d===(d|0))h[0]=d;else for(d=""+d,f=0;f<d.length;++f)h[f&7]=h[f&7]<<15^d.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8?h[7]=-1:h[f],c.x=h,c.i=0,f=256;f>0;--f)c.next()}u(o,l)}function s(l,o){return o.x=l.x.slice(),o.i=l.i,o}function a(l,o){l==null&&(l=+new Date);var u=new i(l),c=o&&o.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(f+h)/(1<<21);while(m===0);return m},d.int32=u.next,d.quick=d,c&&(c.x&&s(c,u),d.state=function(){return s(u,{})}),d}t&&t.exports?t.exports=a:r&&r.amd?r(function(){return a}):this.xorshift7=a})(se,n,!1)})(ya);var tt={},wa={get exports(){return tt},set exports(n){tt=n}};(function(n){(function(e,t,r){function i(l){var o=this;o.next=function(){var c=o.w,d=o.X,f=o.i,h,m;return o.w=c=c+1640531527|0,m=d[f+34&127],h=d[f=f+1&127],m^=m<<13,h^=h<<17,m^=m>>>15,h^=h>>>12,m=d[f]=m^h,o.i=f,m+(c^c>>>16)|0};function u(c,d){var f,h,m,v,O,x=[],A=128;for(d===(d|0)?(h=d,d=null):(d=d+"\0",h=0,A=Math.max(A,d.length)),m=0,v=-32;v<A;++v)d&&(h^=d.charCodeAt((v+32)%d.length)),v===0&&(O=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,v>=0&&(O=O+1640531527|0,f=x[v&127]^=h+O,m=f==0?m+1:0);for(m>=128&&(x[(d&&d.length||0)&127]=-1),m=127,v=4*128;v>0;--v)h=x[m+34&127],f=x[m=m+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,x[m]=h^f;c.w=O,c.X=x,c.i=m}u(o,l)}function s(l,o){return o.i=l.i,o.w=l.w,o.X=l.X.slice(),o}function a(l,o){l==null&&(l=+new Date);var u=new i(l),c=o&&o.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(f+h)/(1<<21);while(m===0);return m},d.int32=u.next,d.quick=d,c&&(c.X&&s(c,u),d.state=function(){return s(u,{})}),d}t&&t.exports?t.exports=a:r&&r.amd?r(function(){return a}):this.xor4096=a})(se,n,!1)})(wa);var nt={},ka={get exports(){return nt},set exports(n){nt=n}};(function(n){(function(e,t,r){function i(l){var o=this,u="";o.next=function(){var d=o.b,f=o.c,h=o.d,m=o.a;return d=d<<25^d>>>7^f,f=f-h|0,h=h<<24^h>>>8^m,m=m-d|0,o.b=d=d<<20^d>>>12^f,o.c=f=f-h|0,o.d=h<<16^f>>>16^m,o.a=m-d|0},o.a=0,o.b=0,o.c=-1640531527,o.d=1367130551,l===Math.floor(l)?(o.a=l/4294967296|0,o.b=l|0):u+=l;for(var c=0;c<u.length+20;c++)o.b^=u.charCodeAt(c)|0,o.next()}function s(l,o){return o.a=l.a,o.b=l.b,o.c=l.c,o.d=l.d,o}function a(l,o){var u=new i(l),c=o&&o.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(f+h)/(1<<21);while(m===0);return m},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&s(c,u),d.state=function(){return s(u,{})}),d}t&&t.exports?t.exports=a:r&&r.amd?r(function(){return a}):this.tychei=a})(se,n,!1)})(ka);var rt={},xa={get exports(){return rt},set exports(n){rt=n}};const va={},$a=Object.freeze(Object.defineProperty({__proto__:null,default:va},Symbol.toStringTag,{value:"Module"})),Sa=zs($a);(function(n){(function(e,t,r){var i=256,s=6,a=52,l="random",o=r.pow(i,s),u=r.pow(2,a),c=u*2,d=i-1,f;function h(w,k,T){var C=[];k=k==!0?{entropy:!0}:k||{};var L=x(O(k.entropy?[w,M(t)]:w??A(),3),C),D=new m(C),q=function(){for(var j=D.g(s),W=o,B=0;j<u;)j=(j+B)*i,W*=i,B=D.g(1);for(;j>=c;)j/=2,W/=2,B>>>=1;return(j+B)/W};return q.int32=function(){return D.g(4)|0},q.quick=function(){return D.g(4)/4294967296},q.double=q,x(M(D.S),t),(k.pass||T||function(j,W,B,G){return G&&(G.S&&v(G,D),j.state=function(){return v(D,{})}),B?(r[l]=j,W):j})(q,L,"global"in k?k.global:this==r,k.state)}function m(w){var k,T=w.length,C=this,L=0,D=C.i=C.j=0,q=C.S=[];for(T||(w=[T++]);L<i;)q[L]=L++;for(L=0;L<i;L++)q[L]=q[D=d&D+w[L%T]+(k=q[L])],q[D]=k;(C.g=function(j){for(var W,B=0,G=C.i,_e=C.j,he=C.S;j--;)W=he[G=d&G+1],B=B*i+he[d&(he[G]=he[_e=d&_e+W])+(he[_e]=W)];return C.i=G,C.j=_e,B})(i)}function v(w,k){return k.i=w.i,k.j=w.j,k.S=w.S.slice(),k}function O(w,k){var T=[],C=typeof w,L;if(k&&C=="object")for(L in w)try{T.push(O(w[L],k-1))}catch{}return T.length?T:C=="string"?w:w+"\0"}function x(w,k){for(var T=w+"",C,L=0;L<T.length;)k[d&L]=d&(C^=k[d&L]*19)+T.charCodeAt(L++);return M(k)}function A(){try{var w;return f&&(w=f.randomBytes)?w=w(i):(w=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(w)),M(w)}catch{var k=e.navigator,T=k&&k.plugins;return[+new Date,e,T,e.screen,M(t)]}}function M(w){return String.fromCharCode.apply(0,w)}if(x(r.random(),t),n.exports){n.exports=h;try{f=Sa}catch{}}else r["seed"+l]=h})(typeof self<"u"?self:se,[],Math)})(xa);var Ea=Qe,_a=Ke,Ta=Ye,Ca=et,Aa=tt,La=nt,ae=rt;ae.alea=Ea;ae.xor128=_a;ae.xorwow=Ta;ae.xorshift7=Ca;ae.xor4096=Aa;ae.tychei=La;var Un=ae;const Vn=Date.now().toString();let ye=Un(Vn,{state:!0});const Ge=hn(()=>{$("config.random.privateState",ye.state())});function za(){ie({"config.random.privateState":null,"config.random.seed":Vn}),window.addEventListener("state-change",({detail:n})=>{n.name==="config.random.seed"&&(ye=Un(n.value,{state:!0}))}),_("random.coinFlip",()=>{const n=ye();return Ge(),n>.5}),_("random.fraction",()=>{const n=ye();return Ge(),n});for(const n of[4,5,6,8,10,12,20,25,50,100,1e3])_(`random.d${n}`,()=>{const e=1+Math.round(ye()*(n-1));return Ge(),e})}function Pa(){_("story.name",ht)}function Oa(){ua(),fa(),ha(),pa(),za(),Pa()}function Ia(){const n=document.querySelectorAll("tw-storydata");if(n.length===0){console.warn("No <tw-storydata> element was found in HTML.");return}n.length>1&&console.warn("Multiple <tw-storydata> elements were found in HTML. Using the first."),ln(n[0]),aa(),gn(),Object.assign(window,{go:xn,restart:vn}),Qn(),ie(Gn),oa(),Hs(),Fn(),Oa(),ca(),cn(),p("config.testing")?_s():bn()&&yn(),dn(),un()}Ia();

</script><style>
:root{--font-monospace: ui-monospace, Menlo, Monaco, "Cascadia Mono", "Segoe UI Mono", "Roboto Mono", "Oxygen Mono", "Ubuntu Monospace", "Source Code Pro", "Fira Mono", "Droid Sans Mono", "Courier New", monospace;--font-system: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif}*{box-sizing:border-box}body{margin:0;padding:0}code{font-family:var(--font-monospace)}img{max-width:100%;height:auto}input[type=text],select{padding:.25em}noscript{align-items:center;background:black;color:#fff;display:flex;height:100vh;font-family:var(--font-system);justify-content:center;width:100vw}pre{font-family:var(--font-monospace);white-space:pre-wrap}tw-storydata{display:none}body.backstage-visible #backdrop{max-width:67vw}backstage-sidebar{--backstage-grid: 10px;background:var(--color-gray-2);border-left:1px solid var(--color-gray-3);bottom:0;color:var(--color-gray-5);display:block;font-family:var(--font-system);font-size:13px;position:fixed;top:0;right:0;width:33vw}backstage-sidebar .content{overflow:auto;padding:var(--backstage-grid);height:100%;width:100%}backstage-sidebar[collapsed]{width:0}backstage-sidebar button[data-toggle-collapsed]{background:var(--color-gray-2);border-bottom:1px solid var(--color-gray-3);border-left:1px solid var(--color-gray-3);border-right:none;border-top:1px solid var(--color-gray-3);border-radius:60px 0 0 60px;color:var(--color-gray-5);font-size:20px;height:60px;min-width:30px;padding:0;position:absolute;top:50%;left:-30px;transform:translateY(-50%);width:30px}backstage-sidebar button[data-toggle-collapsed]:hover{background:var(--color-gray-1);cursor:pointer}backstage-sidebar button{background:var(--color-gray-1);border:1px solid var(--color-gray-3);border-radius:var(--backstage-grid);color:var(--color-gray-5);cursor:pointer;font-size:100%;min-width:40px;padding:calc(var(--backstage-grid) / 2)}backstage-sidebar button:disabled{color:var(--color-gray-3);cursor:not-allowed}backstage-sidebar button:not(:disabled):hover{background:white}backstage-sidebar details summary{cursor:pointer;font-size:110%;font-variant:small-caps;padding:calc(var(--backstage-grid) / 2) 0;text-transform:lowercase}backstage-sidebar input,backstage-sidebar textarea{background:var(--color-gray-1);border:1px solid var(--color-gray-3);color:var(--color-gray-5);font:100% var(--font-system);padding:calc(var(--backstage-grid) / 2)}backstage-sidebar table{max-width:100%;width:100%}backstage-history-table button{display:block;width:100%}backstage-history-table table{border-collapse:collapse;margin:var(--backstage-grid) 0;table-layout:fixed}backstage-history-table thead{height:1px;left:-10000px;overflow:hidden;position:absolute;top:auto;width:1px}backstage-history-table tr:not(:last-child){border-bottom:1px solid var(--oc-gray-8)}backstage-history-table td{text-overflow:ellipsis;overflow-wrap:break-word;padding:calc(var(--backstage-grid) / 2);vertical-align:top}backstage-history-table td:first-child{border-right:1px solid var(--oc-gray-8);width:45%}backstage-notes label{display:block;margin-top:var(--backstage-grid)}backstage-notes textarea{height:10em;margin:var(--backstage-grid) 0;width:100%}backstage-notes .actions{display:flex;gap:var(--backstage-grid)}backstage-notes .actions button{flex-grow:1}backstage-state-snapshots button[data-add-snapshot]{width:100%}backstage-state-snapshots .snapshot-button{display:flex;margin-bottom:var(--backstage-grid)}backstage-state-snapshots .snapshot-button [data-restore]{flex-grow:1;border-right-color:var(--oc-gray-4);border-bottom-right-radius:0;border-top-right-radius:0}backstage-state-snapshots .snapshot-button [data-remove]{border-left:none;border-bottom-left-radius:0;border-top-left-radius:0}backstage-state-variables .variables{display:flex;flex-direction:column;gap:calc(var(--backstage-grid) / 2);margin:calc(var(--backstage-grid)) 0}backstage-state-variables .variables label{align-items:center;display:grid;gap:var(--backstage-grid);grid-template-columns:15em 1fr}backstage-style-config textarea{height:10em;margin:var(--backstage-grid) 0;width:100%}backstage-style-group label{display:grid;gap:.25em;margin-bottom:.5em}backstage-style-theme p{margin:0 0 .5em}backstage-tab{border-left:1px solid var(--color-gray-3);cursor:pointer;flex-grow:1;padding:calc(var(--backstage-grid) / 2);text-align:center}backstage-tab:hover{background:white}backstage-tab:first-child{border-left:none;border-bottom-left-radius:var(--backstage-grid);border-top-left-radius:var(--backstage-grid)}backstage-tab:last-child{border-bottom-right-radius:var(--backstage-grid);border-top-right-radius:var(--backstage-grid)}backstage-tab[aria-selected=true]{background-color:#fff;cursor:default;font-weight:700}backstage-tab-panel{display:block;padding:calc(var(--backstage-grid) / 2) 0}backstage-tab-panel[hidden]{display:none}backstage-tabs{background:var(--color-gray-1);border:1px solid var(--color-gray-3);border-radius:var(--backstage-grid);display:flex}backstage-variable-input input{display:inline-block;width:100%}#backdrop{align-items:center;background-color:var(--backdrop-color);display:flex;justify-content:center;min-height:100vh}#page>header,#page>footer{display:flex;justify-content:space-between}#page>header[hidden],#page>footer[hidden]{border:none}#page>header .center,#page>footer .center{text-align:center}#page>header .right,#page>footer .right{text-align:right}#page>footer{background-color:var(--page-footer-background-color);border-top:var(--page-footer-border);color:var(--page-footer-color);font-family:var(--page-footer-font-family);font-size:var(--page-footer-font-size);font-style:var(--page-footer-font-style);font-variant:var(--page-footer-font-variant);font-weight:var(--page-footer-font-weight);text-decoration:var(--page-footer-text-decoration);text-decoration-color:var(--page-footer-text-decoration-color);text-transform:var(--page-footer-text-transform)}#page>footer .link{background-color:var(--page-footer-link-background-color);color:var(--page-footer-link-color);font-family:var(--page-footer-link-font-family);font-size:var(--page-footer-link-font-size);font-style:var(--page-footer-link-font-style);font-variant:var(--page-footer-link-font-variant);font-weight:var(--page-footer-link-font-weight);text-decoration:var(--page-footer-link-text-decoration);text-decoration-color:var(--page-footer-link-text-decoration-color);text-transform:var(--page-footer-link-text-transform)}#page>footer .link:hover{background-color:var(--page-footer-link-active-background-color);color:var(--page-footer-link-active-color);font-family:var(--page-footer-link-active-font-family);font-size:var(--page-footer-link-active-font-size);font-style:var(--page-footer-link-active-font-style);font-variant:var(--page-footer-link-active-font-variant);font-weight:var(--page-footer-link-active-font-weight);text-decoration:var(--page-footer-link-active-text-decoration);text-decoration-color:var( --page-footer-link-active-text-decoration-color );text-transform:var(--page-footer-link-active-text-transform)}#page>header{background-color:var(--page-header-background-color);border-bottom:var(--page-header-border);color:var(--page-header-color);font-family:var(--page-header-font-family);font-size:var(--page-header-font-size);font-style:var(--page-header-font-style);font-variant:var(--page-header-font-variant);font-weight:var(--page-header-font-weight);text-decoration:var(--page-header-text-decoration);text-decoration-color:var(--page-header-text-decoration-color);text-transform:var(--page-header-text-transform)}#page>header .link{background-color:var(--page-header-link-background-color);color:var(--page-header-link-color);font-family:var(--page-header-link-font-family);font-size:var(--page-header-link-font-size);font-style:var(--page-header-link-font-style);font-variant:var(--page-header-link-font-variant);font-weight:var(--page-header-link-font-weight);text-decoration:var(--page-header-link-text-decoration);text-decoration-color:var(--page-header-link-text-decoration-color);text-transform:var(--page-header-link-text-transform)}#page>header .link:hover{background-color:var(--page-header-link-active-background-color);color:var(--page-header-link-active-color);font-family:var(--page-header-link-active-font-family);font-size:var(--page-header-link-active-font-size);font-style:var(--page-header-link-active-font-style);font-variant:var(--page-header-link-active-font-variant);font-weight:var(--page-header-link-active-font-weight);text-decoration:var(--page-header-link-active-text-decoration);text-decoration-color:var( --page-header-link-active-text-decoration-color );text-transform:var(--page-header-link-active-text-transform)}#page{background-color:var(--page-background-color);border:var(--page-border);border-radius:3px;box-shadow:var(--page-box-shadow);color:var(--page-color);display:grid;font-family:var(--page-font-family);font-size:var(--page-font-size);font-style:var(--page-font-style);font-variant:var(--page-font-variant);font-weight:var(--page-font-weight);grid-template-areas:"header" "body" "footer";grid-template-rows:min-content 1fr min-content;line-height:150%;margin:1em;max-width:calc(100vw - 2em);min-height:calc(100vh - 2em);padding:2em 4em;position:relative;text-decoration:var(--page-text-decoration);text-transform:var(--page-text-transform);width:40em}#page hr{border:none}#page hr:after{content:"* \a0* \a0*";display:block;text-align:center}#page page-skip-indicator{position:absolute;bottom:0;right:0}#page .fork p{display:flex;flex-direction:column;width:100%}#page .fork p .link{display:block;flex-grow:1;text-align:center;padding:.5em}#page .fork p .link+.link{border-top:var(--page-fork-divider-size) var(--page-fork-divider-style) var(--page-fork-divider-color)}#page .link{background-color:var(--page-link-background-color);color:var(--page-link-color);cursor:pointer;font-family:var(--page-link-font-family);font-size:var(--page-link-font-size);font-style:var(--page-link-font-style);font-variant:var(--page-link-font-variant);font-weight:var(--page-link-font-weight);text-decoration:var(--page-link-text-decoration);text-decoration-color:var(--page-link-text-decoration-color);text-transform:var(--page-link-text-transform)}#page .link:hover{background-color:var(--page-link-active-background-color);color:var(--page-link-active-color);font-family:var(--page-link-font-family);font-size:var(--page-link-font-size);font-style:var(--page-link-font-style);font-variant:var(--page-link-font-variant);font-weight:var(--page-link-font-weight);text-decoration:var(--page-link-text-decoration);text-decoration-color:var(--page-link-text-decoration-color);text-transform:var(--page-link-text-transform)}#page .small-caps{font-variant:small-caps;text-transform:lowercase}#page>footer{grid-area:footer}#page>header{grid-area:header}#page>article{display:flex;flex-direction:column;flex-grow:1;grid-area:body;justify-content:var(--page-current-passage-justify-content)}#page>error-handler{grid-area:body;position:relative;z-index:2}@media screen and (max-width: 768px){#page{margin:0;width:100vw;max-width:100vw;min-height:100vh;padding:1em}}.fade-in{opacity:0;animation:fade-in 1s ease-out forwards}.fade-out{animation:fade-in 1s ease-out reverse forwards}@keyframes fade-in{0%{opacity:0}to{opacity:1}}error-handler{display:none}error-handler.active{background:var(--color-red-1);color:var(--color-red-5);display:block;font-family:var(--font-system);font-size:max(90%,16px);padding:.5em;border-left:4px solid var(--color-red-2);position:relative;margin:1em 0;overflow:auto}error-handler pre{font-size:90%}error-handler a{color:var(--color-red-4)}error-handler button{appearance:none;background:none;border:none;color:var(--color-red-4);cursor:pointer;padding:0}external-fonts{display:none}page-skip{display:block}page-skip-indicator{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3e%09%3crect width='38' height='72' x='31' y='14' fill='%23fff' rx='4' /%3e%09%3ccircle cx='50' cy='50' r='28' fill='%23fff' /%3e%09%3crect%09%09width='30'%09%09height='64'%09%09x='35'%09%09y='18'%09%09fill='%23fff'%09%09stroke='%23000'%09%09stroke-width='2'%09%09rx='4'%09/%3e%09%3ccircle%09%09cx='50'%09%09cy='50'%09%09r='20'%09%09fill='%23fff'%09%09stroke='%23000'%09%09stroke-width='2'%09/%3e%09%3cpath%09%09stroke='%23000'%09%09stroke-linecap='round'%09%09stroke-width='2'%09%09d='M50 50V37'%09%3e%09%09%3canimateTransform%09%09%09attributeName='transform'%09%09%09begin='0s'%09%09%09dur='20s'%09%09%09from='0 50 50'%09%09%09repeatCount='indefinite'%09%09%09to='360 50 50'%09%09%09type='rotate'%09%09/%3e%09%3c/path%3e%09%3cpath%09%09stroke='%23000'%09%09stroke-linecap='round'%09%09stroke-width='2'%09%09d='M50 50h-8'%09%3e%09%09%3canimateTransform%09%09%09attributeName='transform'%09%09%09begin='0s'%09%09%09dur='120s'%09%09%09from='0 50 50'%09%09%09repeatCount='indefinite'%09%09%09to='360 50 50'%09%09%09type='rotate'%09%09/%3e%09%3c/path%3e%3c/svg%3e");background-size:contain;display:block;height:50px;opacity:0;pointer-events:none;transition:opacity .3s;width:50px}page-skip-indicator[active]{opacity:1}::view-transition-old(root),::view-transition-new(root){animation-duration:var(--page-transition-duration)}page-transition{display:block}:root{--oc-white: #ffffff;--oc-white-rgb: 255, 255, 255;--oc-black: #000000;--oc-black-rgb: 0, 0, 0;--oc-gray-0: #f8f9fa;--oc-gray-0-rgb: 248, 249, 250;--oc-gray-1: #f1f3f5;--oc-gray-1-rgb: 241, 243, 245;--oc-gray-2: #e9ecef;--oc-gray-2-rgb: 233, 236, 239;--oc-gray-3: #dee2e6;--oc-gray-3-rgb: 222, 226, 230;--oc-gray-4: #ced4da;--oc-gray-4-rgb: 206, 212, 218;--oc-gray-5: #adb5bd;--oc-gray-5-rgb: 173, 181, 189;--oc-gray-6: #868e96;--oc-gray-6-rgb: 134, 142, 150;--oc-gray-7: #495057;--oc-gray-7-rgb: 73, 80, 87;--oc-gray-8: #343a40;--oc-gray-8-rgb: 52, 58, 64;--oc-gray-9: #212529;--oc-gray-9-rgb: 33, 37, 41;--oc-red-0: #fff5f5;--oc-red-0-rgb: 255, 245, 245;--oc-red-1: #ffe3e3;--oc-red-1-rgb: 255, 227, 227;--oc-red-2: #ffc9c9;--oc-red-2-rgb: 255, 201, 201;--oc-red-3: #ffa8a8;--oc-red-3-rgb: 255, 168, 168;--oc-red-4: #ff8787;--oc-red-4-rgb: 255, 135, 135;--oc-red-5: #ff6b6b;--oc-red-5-rgb: 255, 107, 107;--oc-red-6: #fa5252;--oc-red-6-rgb: 250, 82, 82;--oc-red-7: #f03e3e;--oc-red-7-rgb: 240, 62, 62;--oc-red-8: #e03131;--oc-red-8-rgb: 224, 49, 49;--oc-red-9: #c92a2a;--oc-red-9-rgb: 201, 42, 42;--oc-pink-0: #fff0f6;--oc-pink-0-rgb: 255, 240, 246;--oc-pink-1: #ffdeeb;--oc-pink-1-rgb: 255, 222, 235;--oc-pink-2: #fcc2d7;--oc-pink-2-rgb: 252, 194, 215;--oc-pink-3: #faa2c1;--oc-pink-3-rgb: 250, 162, 193;--oc-pink-4: #f783ac;--oc-pink-4-rgb: 247, 131, 172;--oc-pink-5: #f06595;--oc-pink-5-rgb: 240, 101, 149;--oc-pink-6: #e64980;--oc-pink-6-rgb: 230, 73, 128;--oc-pink-7: #d6336c;--oc-pink-7-rgb: 214, 51, 108;--oc-pink-8: #c2255c;--oc-pink-8-rgb: 194, 37, 92;--oc-pink-9: #a61e4d;--oc-pink-9-rgb: 166, 30, 77;--oc-grape-0: #f8f0fc;--oc-grape-0-rgb: 248, 240, 252;--oc-grape-1: #f3d9fa;--oc-grape-1-rgb: 243, 217, 250;--oc-grape-2: #eebefa;--oc-grape-2-rgb: 238, 190, 250;--oc-grape-3: #e599f7;--oc-grape-3-rgb: 229, 153, 247;--oc-grape-4: #da77f2;--oc-grape-4-rgb: 218, 119, 242;--oc-grape-5: #cc5de8;--oc-grape-5-rgb: 204, 93, 232;--oc-grape-6: #be4bdb;--oc-grape-6-rgb: 190, 75, 219;--oc-grape-7: #ae3ec9;--oc-grape-7-rgb: 174, 62, 201;--oc-grape-8: #9c36b5;--oc-grape-8-rgb: 156, 54, 181;--oc-grape-9: #862e9c;--oc-grape-9-rgb: 134, 46, 156;--oc-violet-0: #f3f0ff;--oc-violet-0-rgb: 243, 240, 255;--oc-violet-1: #e5dbff;--oc-violet-1-rgb: 229, 219, 255;--oc-violet-2: #d0bfff;--oc-violet-2-rgb: 208, 191, 255;--oc-violet-3: #b197fc;--oc-violet-3-rgb: 177, 151, 252;--oc-violet-4: #9775fa;--oc-violet-4-rgb: 151, 117, 250;--oc-violet-5: #845ef7;--oc-violet-5-rgb: 132, 94, 247;--oc-violet-6: #7950f2;--oc-violet-6-rgb: 121, 80, 242;--oc-violet-7: #7048e8;--oc-violet-7-rgb: 112, 72, 232;--oc-violet-8: #6741d9;--oc-violet-8-rgb: 103, 65, 217;--oc-violet-9: #5f3dc4;--oc-violet-9-rgb: 95, 61, 196;--oc-indigo-0: #edf2ff;--oc-indigo-0-rgb: 237, 242, 255;--oc-indigo-1: #dbe4ff;--oc-indigo-1-rgb: 219, 228, 255;--oc-indigo-2: #bac8ff;--oc-indigo-2-rgb: 186, 200, 255;--oc-indigo-3: #91a7ff;--oc-indigo-3-rgb: 145, 167, 255;--oc-indigo-4: #748ffc;--oc-indigo-4-rgb: 116, 143, 252;--oc-indigo-5: #5c7cfa;--oc-indigo-5-rgb: 92, 124, 250;--oc-indigo-6: #4c6ef5;--oc-indigo-6-rgb: 76, 110, 245;--oc-indigo-7: #4263eb;--oc-indigo-7-rgb: 66, 99, 235;--oc-indigo-8: #3b5bdb;--oc-indigo-8-rgb: 59, 91, 219;--oc-indigo-9: #364fc7;--oc-indigo-9-rgb: 54, 79, 199;--oc-blue-0: #e7f5ff;--oc-blue-0-rgb: 231, 245, 255;--oc-blue-1: #d0ebff;--oc-blue-1-rgb: 208, 235, 255;--oc-blue-2: #a5d8ff;--oc-blue-2-rgb: 165, 216, 255;--oc-blue-3: #74c0fc;--oc-blue-3-rgb: 116, 192, 252;--oc-blue-4: #4dabf7;--oc-blue-4-rgb: 77, 171, 247;--oc-blue-5: #339af0;--oc-blue-5-rgb: 51, 154, 240;--oc-blue-6: #228be6;--oc-blue-6-rgb: 34, 139, 230;--oc-blue-7: #1c7ed6;--oc-blue-7-rgb: 28, 126, 214;--oc-blue-8: #1971c2;--oc-blue-8-rgb: 25, 113, 194;--oc-blue-9: #1864ab;--oc-blue-9-rgb: 24, 100, 171;--oc-cyan-0: #e3fafc;--oc-cyan-0-rgb: 227, 250, 252;--oc-cyan-1: #c5f6fa;--oc-cyan-1-rgb: 197, 246, 250;--oc-cyan-2: #99e9f2;--oc-cyan-2-rgb: 153, 233, 242;--oc-cyan-3: #66d9e8;--oc-cyan-3-rgb: 102, 217, 232;--oc-cyan-4: #3bc9db;--oc-cyan-4-rgb: 59, 201, 219;--oc-cyan-5: #22b8cf;--oc-cyan-5-rgb: 34, 184, 207;--oc-cyan-6: #15aabf;--oc-cyan-6-rgb: 21, 170, 191;--oc-cyan-7: #1098ad;--oc-cyan-7-rgb: 16, 152, 173;--oc-cyan-8: #0c8599;--oc-cyan-8-rgb: 12, 133, 153;--oc-cyan-9: #0b7285;--oc-cyan-9-rgb: 11, 114, 133;--oc-teal-0: #e6fcf5;--oc-teal-0-rgb: 230, 252, 245;--oc-teal-1: #c3fae8;--oc-teal-1-rgb: 195, 250, 232;--oc-teal-2: #96f2d7;--oc-teal-2-rgb: 150, 242, 215;--oc-teal-3: #63e6be;--oc-teal-3-rgb: 99, 230, 190;--oc-teal-4: #38d9a9;--oc-teal-4-rgb: 56, 217, 169;--oc-teal-5: #20c997;--oc-teal-5-rgb: 32, 201, 151;--oc-teal-6: #12b886;--oc-teal-6-rgb: 18, 184, 134;--oc-teal-7: #0ca678;--oc-teal-7-rgb: 12, 166, 120;--oc-teal-8: #099268;--oc-teal-8-rgb: 9, 146, 104;--oc-teal-9: #087f5b;--oc-teal-9-rgb: 8, 127, 91;--oc-green-0: #ebfbee;--oc-green-0-rgb: 235, 251, 238;--oc-green-1: #d3f9d8;--oc-green-1-rgb: 211, 249, 216;--oc-green-2: #b2f2bb;--oc-green-2-rgb: 178, 242, 187;--oc-green-3: #8ce99a;--oc-green-3-rgb: 140, 233, 154;--oc-green-4: #69db7c;--oc-green-4-rgb: 105, 219, 124;--oc-green-5: #51cf66;--oc-green-5-rgb: 81, 207, 102;--oc-green-6: #40c057;--oc-green-6-rgb: 64, 192, 87;--oc-green-7: #37b24d;--oc-green-7-rgb: 55, 178, 77;--oc-green-8: #2f9e44;--oc-green-8-rgb: 47, 158, 68;--oc-green-9: #2b8a3e;--oc-green-9-rgb: 43, 138, 62;--oc-lime-0: #f4fce3;--oc-lime-0-rgb: 244, 252, 227;--oc-lime-1: #e9fac8;--oc-lime-1-rgb: 233, 250, 200;--oc-lime-2: #d8f5a2;--oc-lime-2-rgb: 216, 245, 162;--oc-lime-3: #c0eb75;--oc-lime-3-rgb: 192, 235, 117;--oc-lime-4: #a9e34b;--oc-lime-4-rgb: 169, 227, 75;--oc-lime-5: #94d82d;--oc-lime-5-rgb: 148, 216, 45;--oc-lime-6: #82c91e;--oc-lime-6-rgb: 130, 201, 30;--oc-lime-7: #74b816;--oc-lime-7-rgb: 116, 184, 22;--oc-lime-8: #66a80f;--oc-lime-8-rgb: 102, 168, 15;--oc-lime-9: #5c940d;--oc-lime-9-rgb: 92, 148, 13;--oc-yellow-0: #fff9db;--oc-yellow-0-rgb: 255, 249, 219;--oc-yellow-1: #fff3bf;--oc-yellow-1-rgb: 255, 243, 191;--oc-yellow-2: #ffec99;--oc-yellow-2-rgb: 255, 236, 153;--oc-yellow-3: #ffe066;--oc-yellow-3-rgb: 255, 224, 102;--oc-yellow-4: #ffd43b;--oc-yellow-4-rgb: 255, 212, 59;--oc-yellow-5: #fcc419;--oc-yellow-5-rgb: 252, 196, 25;--oc-yellow-6: #fab005;--oc-yellow-6-rgb: 250, 176, 5;--oc-yellow-7: #f59f00;--oc-yellow-7-rgb: 245, 159, 0;--oc-yellow-8: #f08c00;--oc-yellow-8-rgb: 240, 140, 0;--oc-yellow-9: #e67700;--oc-yellow-9-rgb: 230, 119, 0;--oc-orange-0: #fff4e6;--oc-orange-0-rgb: 255, 244, 230;--oc-orange-1: #ffe8cc;--oc-orange-1-rgb: 255, 232, 204;--oc-orange-2: #ffd8a8;--oc-orange-2-rgb: 255, 216, 168;--oc-orange-3: #ffc078;--oc-orange-3-rgb: 255, 192, 120;--oc-orange-4: #ffa94d;--oc-orange-4-rgb: 255, 169, 77;--oc-orange-5: #ff922b;--oc-orange-5-rgb: 255, 146, 43;--oc-orange-6: #fd7e14;--oc-orange-6-rgb: 253, 126, 20;--oc-orange-7: #f76707;--oc-orange-7-rgb: 247, 103, 7;--oc-orange-8: #e8590c;--oc-orange-8-rgb: 232, 89, 12;--oc-orange-9: #d9480f;--oc-orange-9-rgb: 217, 72, 15}/*! reasonable colors v0.4.0 | MIT License | https://github.com/matthewhowell/reasonable-colors */:root{--color-gray-1: #f6f6f6;--color-gray-2: #e2e2e2;--color-gray-3: #8b8b8b;--color-gray-4: #6f6f6f;--color-gray-5: #3e3e3e;--color-gray-6: #222222;--color-rose-1: #fff7f9;--color-rose-2: #ffdce5;--color-rose-3: #ff3b8d;--color-rose-4: #db0072;--color-rose-5: #800040;--color-rose-6: #4c0023;--color-raspberry-1: #fff8f8;--color-raspberry-2: #ffdddf;--color-raspberry-3: #ff426c;--color-raspberry-4: #de0051;--color-raspberry-5: #82002c;--color-raspberry-6: #510018;--color-red-1: #fff8f6;--color-red-2: #ffddd8;--color-red-3: #ff4647;--color-red-4: #e0002b;--color-red-5: #830014;--color-red-6: #530003;--color-orange-1: #fff8f5;--color-orange-2: #ffded1;--color-orange-3: #fd4d00;--color-orange-4: #cd3c00;--color-orange-5: #752100;--color-orange-6: #401600;--color-cinnamon-1: #fff8f3;--color-cinnamon-2: #ffdfc6;--color-cinnamon-3: #d57300;--color-cinnamon-4: #ac5c00;--color-cinnamon-5: #633300;--color-cinnamon-6: #371d00;--color-amber-1: #fff8ef;--color-amber-2: #ffe0b2;--color-amber-3: #b98300;--color-amber-4: #926700;--color-amber-5: #523800;--color-amber-6: #302100;--color-yellow-1: #fff9e5;--color-yellow-2: #ffe53e;--color-yellow-3: #9c8b00;--color-yellow-4: #7d6f00;--color-yellow-5: #463d00;--color-yellow-6: #292300;--color-lime-1: #f7ffac;--color-lime-2: #d5f200;--color-lime-3: #819300;--color-lime-4: #677600;--color-lime-5: #394100;--color-lime-6: #222600;--color-chartreuse-1: #e5ffc3;--color-chartreuse-2: #98fb00;--color-chartreuse-3: #5c9b00;--color-chartreuse-4: #497c00;--color-chartreuse-5: #264500;--color-chartreuse-6: #182600;--color-green-1: #e0ffd9;--color-green-2: #72ff6c;--color-green-3: #00a21f;--color-green-4: #008217;--color-green-5: #004908;--color-green-6: #062800;--color-emerald-1: #dcffe6;--color-emerald-2: #5dffa2;--color-emerald-3: #00a05a;--color-emerald-4: #008147;--color-emerald-5: #004825;--color-emerald-6: #002812;--color-aquamarine-1: #daffef;--color-aquamarine-2: #42ffc6;--color-aquamarine-3: #009f78;--color-aquamarine-4: #007f5f;--color-aquamarine-5: #004734;--color-aquamarine-6: #00281b;--color-teal-1: #d7fff7;--color-teal-2: #00ffe4;--color-teal-3: #009e8c;--color-teal-4: #007c6e;--color-teal-5: #00443c;--color-teal-6: #002722;--color-cyan-1: #c4fffe;--color-cyan-2: #00fafb;--color-cyan-3: #00999a;--color-cyan-4: #007a7b;--color-cyan-5: #004344;--color-cyan-6: #002525;--color-powder-1: #dafaff;--color-powder-2: #8df0ff;--color-powder-3: #0098a9;--color-powder-4: #007987;--color-powder-5: #004048;--color-powder-6: #002227;--color-sky-1: #e3f7ff;--color-sky-2: #aee9ff;--color-sky-3: #0094b4;--color-sky-4: #007590;--color-sky-5: #00404f;--color-sky-6: #001f28;--color-cerulean-1: #e8f6ff;--color-cerulean-2: #b9e3ff;--color-cerulean-3: #0092c5;--color-cerulean-4: #00749d;--color-cerulean-5: #003c54;--color-cerulean-6: #001d2a;--color-azure-1: #e8f2ff;--color-azure-2: #c6e0ff;--color-azure-3: #008fdb;--color-azure-4: #0071af;--color-azure-5: #003b5e;--color-azure-6: #001c30;--color-blue-1: #f0f4ff;--color-blue-2: #d4e0ff;--color-blue-3: #0089fc;--color-blue-4: #006dca;--color-blue-5: #00386d;--color-blue-6: #001a39;--color-indigo-1: #f3f3ff;--color-indigo-2: #deddff;--color-indigo-3: #657eff;--color-indigo-4: #0061fc;--color-indigo-5: #00328a;--color-indigo-6: #001649;--color-violet-1: #f7f1ff;--color-violet-2: #e8daff;--color-violet-3: #9b70ff;--color-violet-4: #794aff;--color-violet-5: #2d0fbf;--color-violet-6: #0b0074;--color-purple-1: #fdf4ff;--color-purple-2: #f7d9ff;--color-purple-3: #d150ff;--color-purple-4: #b01fe3;--color-purple-5: #660087;--color-purple-6: #3a004f;--color-magenta-1: #fff3fc;--color-magenta-2: #ffd7f6;--color-magenta-3: #f911e0;--color-magenta-4: #ca00b6;--color-magenta-5: #740068;--color-magenta-6: #44003c;--color-pink-1: #fff7fb;--color-pink-2: #ffdcec;--color-pink-3: #ff2fb2;--color-pink-4: #d2008f;--color-pink-5: #790051;--color-pink-6: #4b0030}warning-list{background:var(--color-yellow-1);border-left:4px solid var(--color-yellow-2);color:var(--color-yellow-4);display:block;font-family:var(--font-system);padding:.5em}warning-list[hidden]{display:none}warning-list ul{list-style-type:none;margin:0;padding-left:0}inline-button{cursor:pointer}

</style></head><body><state-css-variables><state-dark-theme-css-overrides><div id="backdrop"><page-skip><page-transition><div id="page" aria-live="polite"><header hidden></header><article></article><warning-list></warning-list><footer hidden></footer><error-handler></error-handler><page-skip-indicator></page-skip-indicator></div></page-transition></page-skip></div></state-dark-theme-css-overrides></state-css-variables><external-fonts></external-fonts><noscript>This requires JavaScript.</noscript></body><tw-storydata name="old faith" startnode="202" creator="Twine" creator-version="2.10.0" format="Chapbook" format-version="2.3.0" ifid="AF18CD12-A04D-4A58-86D8-4CDBE3289AA0" options="" tags="" zoom="0.6" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css"></style><script role="script" id="twine-user-script" type="text/twine-javascript"></script><tw-tag name="NOTATKA-TECHNICZNA" color="orange"></tw-tag><tw-tag name="TECHNICZNE" color="blue"></tw-tag><tw-tag name="START-QUESTA" color="yellow"></tw-tag><tw-tag name="FAIL-QUESTA" color="red"></tw-tag><tw-tag name="KONIEC-QUESTA" color="green"></tw-tag><tw-tag name="ROZGAZIONA-CIEKA" color="purple"></tw-tag><tw-tag name="ENDING" color="red"></tw-tag><tw-passagedata pid="1" name=" Noc w obozie" tags="ROZGAZIONA-CIEKA" position="3850,7375" size="200,100">__BothPlayableCompanions: CompanionInquisition &amp;&amp; CompanionScientist
__AnyPlayableCompanions: CompanionInquisition || CompanionScientist
__OnlyScientist: CompanionScientist &amp;&amp; !CompanionInquisition
__OnlyInquisition: !CompanionScientist &amp;&amp; CompanionInquisition
SearchTemple: false
FoundTemple: false
FoundTempleAbsent: false
--
Ksiyc powoli pojawia si na niebie. Przed snem decydujesz si przygotowa kolacj aby mie siy na jutro. Jedzenie dostpne w obozie nie jest zbyt wykwintne - spakowae tylko suche pieczywo, jabka, smalec, worek kartofli i par innych produktw.  

[if __BothPlayableCompanions]
Powierzony w twoje rce Inkwizytor prezentuje ci zdobycze z lasu, ktre zebra wczeniej. Macie do dyspozycji par krlikw, wod z okolicznego strumyka, pk zielonych rolin oraz dosy spor sakw jagd, jeyn i innych dzikich owocw. Towarzyszcy wam naukowiec przyglda si im i zaczyna opowiada w szczegle o kadym ze skadnikw. Wydaje si by zaskakujco zaznajomiony ze sztukami kulinarnymi jak na studenta dyscypliny demonologii...

Po zakoczeniu swojego monologu uczony oferuje przygotowa posiek za ciebie.

[[Zaakceptuj propozycj-&gt;Uczony gotuje]]

[[Odrzu propozycj-&gt;Gotujesz kolacj]]
[continue]

[if __OnlyInquisition]
Powierzony w twoje rce Inkwizytor prezentuje ci zdobycze z lasu, ktre zebra wczeniej. Macie do dyspozycji par krlikw, wod z okolicznego strumyka, pk zielonych rolin oraz dosy spor sakw jagd, jeyn i innych dzikich owocw. 

aden z was nie jest wybitnym kucharzem, jednak odpowiedzialno za gotowanie spada na ciebie. Podwadny mwi co o &quot;uczeniu si od mistrza&quot;...

[[Zabierz si za gotowanie - moe nie bdzie tak le?-&gt;Gotujesz kolacj]]
[continue]

[if __OnlyScientist]
Naukowiec widzc sytuacj w polowej &quot;kuchni&quot; skrzywia si i mwi. e musi na chwil i si przewietrzy - ale przecie jestecie na dworze.

[[Zatrzymaj go i zabierz si za gotowanie - moe nie bdzie tak le?-&gt;Gotujesz kolacj]]

[[Pozwl mu pj-&gt;uczony zbiera jedzenie]]
[continue]

[if !__AnyPlayableCompanions]
Czujesz si troch samotnie siedzc przy ognisku bez adnych towarzyszy. Przypominaj ci si dni w szeregach na froncie, mimo e nie byy wcale tak dawno.

[[Zabierz si za gotowanie-&gt;Gotujesz kolacj]]</tw-passagedata><tw-passagedata pid="2" name="AKT 1" tags="" position="3800,1600" size="200,200">clue_ranger_1: false
clue_ranger_2: false
clue_key_ranger: false
clue_cave_location: false
interrogation_gossiping_women: false
attacked_village_clues: 0
clue_cows_1: false
clue_cows_2: false
clue_key_cows: false
knows_about_scared_peasant: false
cave_collapse: false
clue_key_bear: false
attacked_village_vegan_demon_corpse: false
quest_vegan_demon_accepted: false
__knowsaboutranger:false
clue_key_villagedemon: false
dialogue_village_demon: 0
attacked_village_demon_killed: false
capitalcity: &quot;Fioretto&quot;
GlobalClueDemonRuins: 0
QuestVillageComplete: false
QuestAcademyComplete: false
CompanionDemon: false
CompanionScientist: false
CompanionInquisition: false
companion_name_inquisition: &quot;Petronello&quot;
faction_mentor_demon: &quot;Xelavias&quot;
Act1VillageName: &quot;Teramo&quot;
--
{faction_mentor_inquisition} gratuluje ci wykonania zadania, i zapewnia e wasza praca jest bardzo wana dla wikszego dobra. Wrcza ci mundur inkwizytora, piecz i wybran bro.

Kilka dni pniej na zabraniu w twojej placwce pojawia si Wielki Inkwizytor. Objania twojemu dowdcy plan odszukania zaginionych ladw obecnoci demonw w dawno zapomnianych wiekach. Jego zdaniem na terenie jurysdykcji twojej placwki znajduj si staroytne ruiny dawno zapomnianej wiary. Uwaa e mog by one rdem wzmoonej obecnoci demonw w regionie.

Dowdca wysya ciebie, wraz z innymi podkomendnymi, abycie zdobyli informacje o owych ruinach. Podaje propozycje gdzie rozpocz poszukiwania: Informuje ci o wiosce, ktra ostatnimi czasy mierzy si ze wzmoon aktywnoci demonw w okolicach. 

Wspomina te, e w Krlewskiej Akademii w {capitalcity} prowadzone s badania na temat pochodzenia demonw. Uwaa, e uczeni chtnie pomogliby wikszej sprawie. W szczeglnoci Laboratorium Alchemiczne oraz Studium Historii Demonologicznej cile wsppracuj z inkwizycj.

[[Id do centrum dziaa]]</tw-passagedata><tw-passagedata pid="3" name="AKT 2" tags="" position="3850,4450" size="200,200">campSetUp: false
door_kicked_in: false
clue_demon_circle: false
clue_demon_runes: false
clue_secret_runes: false
clue_secret_circle: false
clue_secret_demon: false
QuestOnnod: false
QuestCompanionDemonStage: 0
QuestCompanionScientistStage: 0
QuestCompanionInquisitionStage: 0
QuestFindGateYourself: 0
StateInquisitionNotified: false
StateDemonicInterest: false
InqNotifiedInSecret: false
WaitLoop: 0
Act2Day: 1
GateDiscovered: false
--
Docierasz do odizolowanej od spoeczestwa wioski. W przeciwiestwie do twojej gociny w {Act1VillageName} tutaj nikt ci nie wita. Rynek jest pusty a okna domw zabite deskami. Przeczuwasz e bez pomocy tutejszych ledztwo moe zaj dugi czas.

[[Rozbij obz w pobliu]]</tw-passagedata><tw-passagedata pid="4" name="Aktywuj runy" tags="" position="3525,6000" size="100,100">[if CompanionDemon]
Runy zaczynaj wieci mocniej. Zaczynasz traci przytomno...
{embed passage: &quot;QuestRunesActivated&quot;}

[[Kontynuuj-&gt;Konwersacja z Onnodem]]</tw-passagedata><tw-passagedata pid="5" name="Aresztuj profesora" tags="" position="6550,3050" size="100,100">standing_human: standing_human+10
--
Teraz zauwaasz may noyk trzymany przez profesora. Rozcina on swoj do, i zarzuca ni, a kilka kropli krwi spada wewntrz odsonitego przez ciebie krgu.

Ogromny demon przywoany rytuaem ledwie mieci si w pomieszczeniu. Profesor szykuje si do walki.

[[Zaatakuj profesora i jego demona]]</tw-passagedata><tw-passagedata pid="6" name="Badanie wityni" tags="" position="2900,8125" size="100,100">SearchFloor: false
SearchRoof: false
SearchCenter: false
SearchTemple: true
--
witynia przypomina w swej wewntrznej budowie Katedry Nauki ktre widziae w duych miastach, cho jest o wiele mniejsza. Marmurowe ciany i sklepienie w niczym nie przypominaj jej zewntrznej budowy. Zastanawiasz si jak mieszkacy malekiej wioski mogli wznie tak okaza konstrukcj.
[if !SearchCenter]
[[Zbadaj centraln cz wityni]]
[continue]
[if !SearchRoof]
[[Zbadaj sklepienie]]
[continue]
[if !SearchFloor]
[[Rozejrzyj si]]
[continue]

[if SearchFloor &amp;&amp; SearchCenter &amp;&amp; SearchRoof]
[[Wyjd ze wityni-&gt;cieka poza wiosk]]
[continue]</tw-passagedata><tw-passagedata pid="7" name="Chata Leniczego" tags="" position="1550,3275" size="100,100">Wchodzisz do rodka. To co wydawao si skromn chatk okazuje si miejscem makabrycznej zbrodni. W pociel ka i obrus na stole wsiknita jest krew, na cianach wida lady pazurw. Wszystkie pomniejsze przedmioty s poprzewracane. 

[if !clue_ranger_1]
Moe [[rozgldajc si po chatce-&gt;Rozejrzyj si po leniczwce]] znajdziesz co, co wskazywaoby na to gdzie zabrano ofiar?

Moesz take [[Wyj z chaty i udawa, e ci tu nie byo-&gt;Las5-2]].
[else]
Nie ma tu ju niczego, co pomogoby ci w ledztwie. Pozostaje tylko [[wyj z powrotem do lasu-&gt;Las5-2]]
[continue]</tw-passagedata><tw-passagedata pid="8" name="Chata wjta" tags="" position="3000,2175" size="100,100">Chata wjta jest wiksza od pozostaych domw w wiosce. Wntrze owietlaj lampy naftowe zapalane okresowo zbatkami, na jednej ze cian wisi portret wjta i jego ony. Obok niego zawieszona jest ozdobna zastawa, a pod nim ley szabla Inkwizytora.

Moesz [[przesucha wjta-&gt;Przesuchaj wjta]] aby wycign od niego wicej informacji, lub [[wycofa si na rynek-&gt;Rynek]]</tw-passagedata><tw-passagedata pid="9" name="Chopw" tags="" position="3850,1450" size="100,100">inkwizycja brutalnie zabija wzystkich chopw. Czy to na pewno by dobry wybr?

[[AKT 1]]</tw-passagedata><tw-passagedata pid="10" name="CompanionInquisitionRecruited" tags="TECHNICZNE" position="3700,2300" size="100,100">CompanionInquisition: true
--</tw-passagedata><tw-passagedata pid="11" name="CompanionScientistDelayReward" tags="" position="5800,3975" size="100,100">QuestCompanionScientistStage: 4
--</tw-passagedata><tw-passagedata pid="12" name="Czekaj..." tags="" position="3425,7650" size="100,100">WaitLoop: WaitLoop+1
--
Uczony zdaje si nie wraca przez dosy dugi czas...

[[Czekaj dalej.,..-&gt;Czekaj...]]

[if WaitLoop&gt;3]
Jego duga nieobecno zaczyna by niepokojca...

[[Przedpole wityni]]

[[Zaufaj uczonemu i czekaj dalej...]]
[continue]</tw-passagedata><tw-passagedata pid="13" name="Demon ginie" tags="" position="4550,6625" size="100,100">Demon ley martwy u twych stp.
[if CompanionInquisition]
Twj podwadny wyraa podziw dla twoich zdolnoci. Zauwaa, e zabicie demona w trakcie przyzwania pozostawio krg w niemal nienaruszonym stanie.
{embed passage: &quot;Zinterpretuj runy na krgu&quot;}
[continue]

[[Powrt-&gt;Ponowne rozgldanie si po wiosce]]</tw-passagedata><tw-passagedata pid="14" name="Demon mutuje" tags="" position="4725,6350" size="100,100">clue_secret_demon: true
--
Demon potyka si o wasne nogi i upada przed tob z hukiem. Jego ciao przechodzi groteskow transformacj.

[if CompanionScientist]
{companion_name_scientist} krzyczy, e transformacja musi by efektem dugotrwaego godu demona. Jeli si nie ruszycie, moecie si sta jego pierwszym posikiem od dawna.

[[Zabij go-&gt;Demon ginie]]</tw-passagedata><tw-passagedata pid="15" name="Deszyfrowanie run" tags="" position="4200,9250" size="100,100">Dziki bliszemu przyjrzeniu si runom odkrywasz, e mog one zawiera informacje pozwalajce odkry obszar na ktrym moe znajdowa si Brama. Nanosisz koordynaty zaszyfrowane w jednej z run na papier. Obszar poszukiwa wyznaczony w ten sposb jest zbyt wielki eby przeczesa go bez duej grupy.

Po godzinach mudnej pracy umysowej widzisz jak ksiyc pojawia si na niebie. W takich warunkach nie bdzie si dao pracowa z tekstami pisanymi, a tym bardziej czegokolwiek szuka...

[[Zakocz ledztwo na dzi-&gt;Obz - Dzie 3]]</tw-passagedata><tw-passagedata pid="16" name="Deszyfrowanie run 2" tags="" position="4200,9550" size="100,100">Kontynuujesz deszyfrowanie glifw, jednak nie udaje ci si zrobi od rana znaczcych postpw. Gowa zaczyna ci bole od intensywnej pracy umysowej.

[if CompanionScientist]
Uczony, podobnie jak ty nie jest w stanie wyczyta nic sensownego z badanych tym razem run.
[continue]

[[Zakocz prac na dzi i pjd spa-&gt;Obz - Dzie 4]]</tw-passagedata><tw-passagedata pid="17" name="Dezaktywacja run" tags="" position="3625,6350" size="100,100">Runy zaczynaj iskrzy. Wyglda na to e ju z nich nie skorzystasz.
[if !CompanionInquisition]
{companion_name_scientist} upewnia si, e dobrze si czujesz. Mwi, e powiniene mu opowiedzie o tym co zaszo.
[[Opowiedz co widziae-&gt;Konwersacja o runach w domu]] 
[else]
{companion_name_scientist} upewnia si, e dobrze si czujesz. Dyskretnie daje ci zna, e chciaby porozmawia o tym co zaszo, gdy znajdziecie na to czas. {companion_name_inquisition} jest zajty pozostaociami run, ale widzisz, e podsuchuje wasz rozmow.
[continue]
[[Kontynuuj-&gt;Opu dom]]</tw-passagedata><tw-passagedata pid="18" name="Dialog z demonem" tags="ROZGAZIONA-CIEKA START-QUESTA" position="925,3125" size="100,100">Znajdujesz si w miejscu przypominajcym wntrze pnia drzewa. 

Przed twoimi oczami pojawia si sylwetka podobna do ludzkiej. Posiada jednak dugie krcone rogi na swoim czole i dziwnie znieksztacon twarz.

[[Rzu si na tajemnicz posta z broni-&gt;Zaatakuj demona weganina]]

[[Nie mw nic-&gt;Dialog z weganinem]]

[[Zapytaj tajemnicz posta o jej tosamo-&gt;Dialog z weganinem]]</tw-passagedata><tw-passagedata pid="19" name="Dialog z weganinem" tags="" position="850,3250" size="100,100">Posta przedstawia ci si jako Onnod Nuur. Mwi e ma dla ciebie propozycj - a raczej probe.

[[Wysuchaj propozycji]]
[[Zaatakuj go-&gt;Zaatakuj demona weganina]]</tw-passagedata><tw-passagedata pid="20" name="Docierasz do wioski" tags="" position="2975,2000" size="100,100">Docierasz na miejsce, do wioski {Act1VillageName}. W wiosce wita ci wjt, zaprasza do swojej chaty aby wyjani ci ostatnie zjawiska i przybliy sytuacj. Moesz dosta si do jego chaty, oraz innych lokacji z rynku.

Udaj si na [[Rynek]]</tw-passagedata><tw-passagedata pid="21" name="Dom z krgiem" tags="" position="3925,5550" size="100,100">Napotykasz w swoich poszukiwaniach dom, w ktrym na pododze rozrysowany jest demoniczny krg...

[[Zbadaj krg]]</tw-passagedata><tw-passagedata pid="22" name="Dostp wywyszenia" tags="" position="4175,11425" size="100,100">Nie przetrwa nikt, kto mgby opowiedzie co tu zaszo. Gdy wrcisz, bdziesz ju czym wicej ni czowiekiem.

Dotykasz bramy, a twoje ciao pokrywaj cienie.

[[ENDING 4]]</tw-passagedata><tw-passagedata pid="23" name="Docz do niego" tags="ROZGAZIONA-CIEKA" position="3475,11275" size="100,100">__NobodyKnows: !CompanionInquisition &amp;&amp; !StateInquisitionNotified
__CompanionKnows: CompanionInquisition &amp;&amp; !StateInquisitionNotified
--
[if __CompanionKnows]
Gdy ju decydujesz si i za Onnodem, twj zastpca szykuje miecz. Atakuje przyjaznego demona, na co ten odpycha go tajemnicz moc. Wyglda na to, e nie bdzie si dao pogodzi ich konfliktu interesw...

[[Zdrad Onnoda w ostatniej chwili-&gt;Zdrad go, i zabij razem z twoim zastpc]]

[[Pozbd si podwadnego - nie moe ju miesza w twoich planach]]

[continue]
[if __NobodyKnows]
Onnod prowadzi ci midzy demonami, ktre wydaj si mu ustpowa. aden z nich nie odwaa si ciebie zaatakowa. Razem z nim stabilizujesz bram, po czym Onnod dzikuje ci i znika razem z hord Demonw w otchani Bramy.

Liczysz, e twoja decyzja zaprowadzi pokj midzy ludmi a demonami...

[[ENDING 6]]
[continue]

[if StateInquisitionNotified]
Gdy ju decydujesz si i za Onnodem, twj zastpca szykuje miecz. Atakuje przyjaznego demona, na co ten odpycha go tajemnicz moc. Wyglda na to, e nie bdzie si dao pogodzi ich konfliktu interesw...

Nagle dobiega ci znajomy dwik. Powietrze przeszywa ryk rogw owieckich Inkwizycji. Z lasu za twoimi plecami wyania si {faction_mentor_inquisition}.

Sytuacja wyglda jednoznacznie - ty stoisz na uboczu, gdy twj podwadny zmaga si z demonem. Twj przeoony daje rozkaz aresztowania ci - nie masz wyjcia, musisz si broni...

Podejmujesz si walki z siami Inkwizycji. U twojego boku staje Onnod, ktry wspiera ci demoniczn magi. Bitwa trwa dugo, a ty z kadym pokonanym Inkwizytorem stajesz si coraz sabszy. Przed twoim celem stoi ju tylko twj mentor...

Zaszede ju za daleko. Nie moesz si wrci. Pokonujesz {faction_mentor_inquisition}a w pojedynku - on jako ostatni pada u twoich stp. Onnod jest zawiedziony przebiegiem sytuacji, jednak rozumie e nie byo innego wyjcia. Razem z nim idziesz ustabilizowa Bram...

[[ENDING 1]]</tw-passagedata><tw-passagedata pid="24" name="Dzienny powrt do obozu" tags="KONIEC-QUESTA" position="3450,8875" size="100,100">Wraz z naukowcem wracacie do obozu z nowo nabyt informacj o lokalizacji Bramy. 

[[Kontynuuj-&gt;Obz - Dzie 2]]</tw-passagedata><tw-passagedata pid="25" name="ENDING 1" tags="ENDING" position="2925,11600" size="200,200"></tw-passagedata><tw-passagedata pid="26" name="ENDING 2.1" tags="ENDING" position="3200,11600" size="200,200"></tw-passagedata><tw-passagedata pid="27" name="ENDING 2.2" tags="ENDING" position="3475,11600" size="200,200"></tw-passagedata><tw-passagedata pid="28" name="ENDING 3" tags="ENDING" position="3750,11600" size="200,200"></tw-passagedata><tw-passagedata pid="29" name="ENDING 4" tags="ENDING" position="4025,11600" size="200,200"></tw-passagedata><tw-passagedata pid="30" name="ENDING 5" tags="ENDING" position="4300,11600" size="200,200"></tw-passagedata><tw-passagedata pid="31" name="ENDING 6" tags="ENDING" position="4575,11600" size="200,200"></tw-passagedata><tw-passagedata pid="32" name="ENDING 7" tags="ENDING" position="4850,11600" size="200,200"></tw-passagedata><tw-passagedata pid="33" name="Findgateyourself1" tags="TECHNICZNE" position="4900,6575" size="100,100">QuestFindGateYourself: 1
QuestCompanionInquisitionStage: 1
--</tw-passagedata><tw-passagedata pid="34" name="Gotujesz kolacj" tags="" position="4125,7525" size="100,100">Podejmujesz si tytanicznego zadania gotowania z zebranych w jedno miejsce produktw. Nie masz pojcia o tym, jakie kombinacje smakuj dobrze - na szkoleniach uczyli tylko jak walczy efektywnie z demonami...


[if __AnyPlayableCompanions]
Po wyoeniu jedzenia na talerze wzdrygasz si przed tym co zrobie. Kolor i konsystencja twojego dania przypominaj boto...
[else]
Po wyoeniu jedzenia na talerz wzdrygasz si przed tym co zrobie. Kolor i konsystencja twojego dania przypominaj boto...
[continue]

[[Wstrzymaj si przed jedzeniem]]

[[Przyjmij wyzwanie od losu i zjedz swoje danie]]</tw-passagedata><tw-passagedata pid="35" name="Handlarzy" tags="" position="3975,1450" size="100,100">Inkwizycja brutalnie zabija wzystkich handlarzy. Czy to na pewno by dobry wybr?

[[AKT 1]]</tw-passagedata><tw-passagedata pid="36" name="Id do centrum dziaa" tags="" position="3850,1850" size="100,100">[if !QuestVillageComplete]
[[Udaj si do wioski bdcej miejscem czstych atakw demonw]]
[continue]
[if !QuestAcademyComplete]
[[Udaj si do Krlewskiej Akademii]]
[continue]

[if GlobalClueDemonRuins===2]
Udao ci si zawzi obszar poszukiwa demonicznych ruin do okolic odizolowanej osady.
{embed passage: &quot;InquisitorialPraise&quot;}
[[Udaj si do odizolowanej wioski-&gt;AKT 2]]
[continue]</tw-passagedata><tw-passagedata pid="37" name="Id do lasu" tags="" position="1675,2525" size="100,100">Przed tob rozpociera si gsty las. Nie da si przewidzie czy odnajdziesz drog powrotn w tym gszczu.

[[Id na poudnie-&gt;Las1-2]]

[[Wr na rynek-&gt;Rynek]]

[[Przejrzyj okoliczne tereny jeszcze raz-&gt;Rozejrzyj si po okolicznych terenach]]</tw-passagedata><tw-passagedata pid="38" name="Id do miasta" tags="START-QUESTA" position="3850,850" size="100,100">QuestionedPrologue: 0
--
Wiesz, e winny musi si ukrywa w jednej z grup.

[[Przepytaj grup chopw w polu]]

[[Przepytaj handlarzy na rynku]]

[[Przepytaj rzemielinikw]]</tw-passagedata><tw-passagedata pid="39" name="Id na polan" tags="" position="1925,2525" size="100,100">Znajdujesz si na polanie. Jest okropnie zaronita, przez co nie potrafisz dopatrze si niczego w oddali.

Moesz sprbowa swojego szczcia i bdzi w gstej trawie  [[Idc na poudnie-&gt;Polana1-2]], lub zebra wicej informacji [[wracajc na rynek-&gt;Rynek]].

Jeli czujesz si niepewny/a tej lokacji, moe [[Przejrzyj okoliczne tereny jeszcze raz-&gt;Rozejrzyj si po okolicznych terenach]] i pjd gdzie indziej.</tw-passagedata><tw-passagedata pid="40" name="Id pomc dr Holmsowi w eksperymencie" tags="" position="5050,2875" size="100,100">Dr Holmsowi brakuje rk do pracy z powodu przerwy wakacyjnej, a potrzebuje asystenta do bada polowych. Byby zaszczycony gdyby Inkwizytor dotrzyma mu towarzystwa, gdy bdzie demonstrowa metod eksperymentaln prawdziwo swojej teorii.

Ostrzega jednak, e badania s prowadzone w oddalonym od miasta obozie badawczym, wic wyprawa do niego potrwa kilka dni podczas ktrych nie moesz sam wrci do Akademii. Nie moe te czeka na ciebie duej ni dwa dni, po ktrych wynajmie najemnika do ochrony, i sprbuje sam przeprowadzi badania.

[[Udaj si do obozu badawczego]]
[[Udaj si do Akademii]]</tw-passagedata><tw-passagedata pid="41" name="Id pomc dr Rood uratowa archeologw" tags="" position="5550,2775" size="100,100">Kilkoro wsppracownikw dr Rood udao si do staroytnych ruin w pobliu miasta, i do tej pory powinno wrci. Archeolodzy nie maj przy sobie kosztownoci, wic spodziewa si, e mogy ich zaatakowa demony.

Wyprawa do wykopalisk archeologicznych zajmie najpewniej kilka dni.

[[Udaj si do wykopalisk archeologicznych]]

[[Udaj si do Akademii]]</tw-passagedata><tw-passagedata pid="42" name="Id w stron rda dwiku" tags="" position="1900,3525" size="100,100">Z ciemnoci wyania si para wieccych oczu. Runy zaczynaj wieci mocniej, ich blask owietla jam na tyle dobrze, e widzisz sylwetk zdziczaego demona.

Przygotowujesz si do walki, jednak demon nie rzuca si na ciebie. Zamiast tego prosi ci o lito.

[[Zabij demona]]

[[Porozmawiaj z demonem]]</tw-passagedata><tw-passagedata pid="43" name="Id za ladem k" tags="" position="3000,8675" size="100,100">lady prowadz na obrzea wioski. Znajdujesz gboki d, i nie masz wtpliwoci e jest to masowy grb zrobiony przez czonkw inkwizycji dla mieszkacw wioski. Pord szcztek ludzkich, zauwaasz rwniesz resztki demonw.

Kawaek dalej znajdujesz kilkanacie indywidualnych grobw, na ktrych le hemy Inkwizycji. Domylasz si, e straty po stronie najedcw musiay by tak wielkie, e nie prbowali nawet sprowadza cia inkwizytorw do miasta. Prowizoryczny pogrzeb musia by dzieem pojedyczych ocalaych. Wyjania to te dlaczego wioska nie zostaa zburzona, a jedynie przeamano otarz w wityni.

Znajdujesz may, zapadnity namiot Inkwizycji. W rodku znajduje si kopia raportu jednego z inkwizytorw.

[[Przeczytaj raport]]</tw-passagedata><tw-passagedata pid="44" name="InquisitionNotified" tags="TECHNICZNE" position="3650,7225" size="100,100">StateInquisitionNotified: true
--</tw-passagedata><tw-passagedata pid="45" name="InquisitorialPraise" tags="TECHNICZNE" position="3700,2100" size="100,100">[if standing_human&gt;30]
{faction_mentor_inquisition}, informuje, e twoje oddanie sprawie Inkwizycji zostao dostrzeone przez twoich przeoonych. Wielki Inkwizytor przyzna ci awans, oraz przydziela ci najbardziej obiecujcego rekruta z drugiego zespou jako twojego zastpc. {companion_name_inquisition} obiecuje suy ci wiernie, i docza do grona twoich towarzyszy.
{embed passage: &quot;CompanionInquisitionRecruited&quot;}
[continue]</tw-passagedata><tw-passagedata pid="46" name="Inspekcja Krw" tags="" position="2000,3100" size="100,100">clue_key_cows: clue_cows_1 &amp;&amp; clue_cows_2
attacked_village_clues(clue_key_cows): attacked_village_clues+1
--
[if clue_key_cows]
Wyglda na to, e nie ma tu nic wicej do obejrzenia.

Pozostaje [[wrci na polan-&gt;Polana3-2]] lub [[uda si gdzie indziej-&gt;Rozejrzyj si po okolicznych terenach]]
[else]
Dobrym pomysem byoby przyjrzenie si miejscu zdarzenia dokadniej.

[[Przyjrzyj si ranom-&gt;Rany krw]]

[[Poszukaj w okolicy ladw-&gt;lady w okolicy krw]]

[[Wr do przeszukiwania polany-&gt;Polana3-2]]

[continue]</tw-passagedata><tw-passagedata pid="47" name="Inspekcja Leniczego" tags="" position="1225,3125" size="100,100">clue_key_ranger: clue_ranger_1 &amp;&amp; clue_ranger_2
attacked_village_clues(clue_key_ranger): attacked_village_clues+1
--
[if clue_key_ranger]
Nie ma tu nic wicej do zobaczenia.

Pozostaje tylko [[wrci do rozgldania si po lesie-&gt;Las3-1]] lub [[rozejrze si gdzie indziej-&gt;Rozejrzyj si po okolicznych terenach]].


[else]
Podchodzisz do ciaa. Przed tob ley grna poowa jakiego mczyzny.

Moesz[[Przyjrze si jego ubraniom-&gt;Mundur leniczego]], [[Przyjrze si ranom-&gt;Rany Leniczego]], lub [[wrci do rozgldania si po lesie-&gt;Las3-1]].

[continue]</tw-passagedata><tw-passagedata pid="48" name="Jaskinia" tags="" position="850,2500" size="100,100">Wchodzisz do jaskini. Odr staje si coraz bardziej nieznony...

[[Kontynuuj-&gt;Jaskinia2]]

[[Wycofaj si-&gt;Rozejrzyj si po okolicznych terenach]]</tw-passagedata><tw-passagedata pid="49" name="Jaskinia2" tags="" position="850,2625" size="100,100">clue_key_bear: true
attacked_village_clues(clue_key_bear): attacked_village_clues+1
--
[if cave_collapse]
Nie masz po co tu wraca.

Pozostaje tylko [[cofn si-&gt;Jaskinia]]
[else]
Napotykasz ciao martwego niedwiedzia. Wydaje si by poszarpany przez ogromne pazury. Skay usyajce podoe pod twoimi nogami wydaj si niestabilne.

[[Sprbuj si wycofa-&gt;Jaskinia3]]</tw-passagedata><tw-passagedata pid="50" name="Jaskinia3" tags="" position="850,2750" size="100,100">cave_collapse: true
--
Grunt wali si pod twoimi nogami.

Poprzednia partia jaskini jest zbyt wysoko aby mg si do niej wspi.

[[Szukaj po omacku innej drogi-&gt;Jaskinia4]]</tw-passagedata><tw-passagedata pid="51" name="Jaskinia4" tags="ROZGAZIONA-CIEKA" position="850,2875" size="100,100">Szukajc innej drogi znajdujesz korytarz owietlony runami - na jego kocu znajduje si otarz powicony demonom. 

[[Zniszcz otarz]]
[[Zbadaj otarz bliej]]</tw-passagedata><tw-passagedata pid="52" name="Jestem gotowy" tags="" position="3950,10350" size="100,100">[if StateDemonicInterest&amp;&amp;CompanionDemon]
W nocy ponownie odwiedza ci {faction_mentor_demon}. A moe to ty go odwiedzasz?
Ostrzega ci przed ufaniem twojem demonicznemu sojusznikowi. Jest on renegatem pord bogw, ktry zatraci si na skutek wcielenia.

Ludzie i bogowie nie mog y na rwnych zasadach. Ludzie z natury boj si tego czego nie mog poj. Jeeli ich strach nie bedzie utrzymany w ryzach, kada prba budowania pokoju zakoczy si tak jak poprzednia.

Ludzie i bogowie potrzebuj porednika. Kogo kto bdzie siln rk pilnowa strachliwych ludzi, jednoczenie pokazujc im co moe im da wierna suba bogom.
[continue]

Budzisz si i ruszasz w kierunku bramy...

[[Kontynuuj-&gt;U Bram Drugiego wiata]]</tw-passagedata><tw-passagedata pid="53" name="Ka mu sporzdzi raport dla Wielkiego Inkwizytora" tags="" position="3475,7100" size="100,100">QuestCompanionInquisitionStage: 2
--
{embed passage: &quot;InquisitionNotified&quot;}
Zastpca salutuje ci, i wraca do swoich obowizkw.

[[Zakocz konwersacj-&gt;Wr do obozu]]</tw-passagedata><tw-passagedata pid="54" name="Konfrontacja z pomniejszymi demonami" tags="" position="2325,1675" size="100,100">Tak jak mylae, demony nie maj szans przeciwko specjalistycznemu orowi Inkwizycji. Z atwoci je zwyciasz- teraz le przed tob obezwadnione.

ycie demonw jest w twoich rkach...

[[Pojmasz je ywcem?-&gt;pojmanie pomniejszych demonw]]

A moe [[pozbdziesz si ich na dobre?-&gt;zabicie pomniejszych demonw]]</tw-passagedata><tw-passagedata pid="55" name="Konwersacja o runach" tags="" position="4175,7100" size="100,100">QuestCompanionScientistStage: 2
--
Gdy koczysz swoj opowie, {companion_scientist_name} dugo nic nie mwi. Popiera pomys bezkrwawego rozwizania konfliktu, jednak ma wtpliwoci, czy jest w ogle moliwy. To o czym powiedzia demon pokrywa si z jego wasnymi badaniami, jednak wymaga dodatkowych dowodw.

Jeeli ta wioska rzeczywicie bya prb budowania pokoju midzy wiatami, chce si dowiedzie jak daleko zaszli, i co poszo nie tak.

[[Zakocz rozmow-&gt;Wr do obozu]]</tw-passagedata><tw-passagedata pid="56" name="Konwersacja o runach w domu" tags="" position="3625,6475" size="100,100">QuestCompanionScientistStage: 2
--
Gdy koczysz swoj opowie, {companion_scientist_name} dugo nic nie mwi. Popiera pomys bezkrwawego rozwizania konfliktu, jednak ma wtpliwoci, czy jest w ogle moliwy. To o czym powiedzia demon pokrywa si z jego wasnymi badaniami, jednak wymaga dodatkowych dowodw.

Jeeli ta wioska rzeczywicie bya prb budowania pokoju midzy wiatami, chce si dowiedzie jak daleko zaszli, i co poszo nie tak.

[[Opu dom]]</tw-passagedata><tw-passagedata pid="57" name="Konwersacja z Onnodem" tags="" position="3350,6100" size="100,100">Przed twoimi oczami pojawia si Onnod Nuur. Wok was panuje ciemno. Tumaczy ci, e teraz moe rozmawia z tob bez obawy przed byciem obserwowanym. 

Onnod mwi ci, e jest w rzeczywistoci reprezentantem grupy, ktra dy do przywrcenia &quot;dawnego&quot; pokoju midzy ludmi a demonami. 

Oznajmia, e demon ktrego oddae w jego rce by wanym okazem dla jego bada nad odwracaniem &quot;dziczenia&quot; jego gatunku - wyjania, e wielu jego zwolennikw stao si ofiarami powolnej degeneracji intelektu jako skutek godu przez brak ofiar od ludzi oraz stanowcz postaw przeciwko ywieniu si nimi jako alternatywie.

[[Kontynuuj-&gt;Konwersacja z Onnodem cd]]</tw-passagedata><tw-passagedata pid="58" name="Konwersacja z Onnodem cd" tags="" position="3200,6225" size="100,100">Wioska w ktrej si znajdujesz miaa by prb stworzenia pokojowej koegzystencji ludzi i demonw.

Onnod wspomina o twojej nagrodzie - mwi, e moe zaproponowa ci bezkrwawe rozwizanie dla konfliktu midzy ludmi a demonami, jednak najpierw musisz zrobi dla niego kolejn przysug.

[[Wysuchaj proby Onnoda]]</tw-passagedata><tw-passagedata pid="59" name="Konwersacja z zastpc w obozie" tags="" position="3650,7050" size="100,100">Twj zastpca salutuje ci i z penym profesjonalizmem zaczyna zdawa raport. 
Udao wam si znale lad rda wzmoonej obecnoci demonw w regionie. Nalega, by wysa raport Wielkiemu Inkwizytorowi, aby przysa wam militarne wsparcie.

[[Ka mu sporzdzi raport dla Wielkiego Inkwizytora]]
[[Zabro mu kontaktu z dowdztwem]]</tw-passagedata><tw-passagedata pid="60" name="Krg si aktywuje" tags="" position="4300,6000" size="100,100">Wbrew twoim oczekiwaniom czciowo zatarty krg aktywuje si na twoich oczach!

[[Kontynuuj-&gt;Wyania si demon]]</tw-passagedata><tw-passagedata pid="61" name="Laboratorium Alchemiczne" tags="" position="4950,2675" size="100,100">QuestAlchemyStage: 1
--
W labolatorium wita ci Dr Holms. Opowiada jak to za modu rwnie nalea do Inkwizycji, jednak przekona si e bardziej przyda si w laboratorium ni w centrum akcji.

Pracuje obecnie nad zbadaniem nawykw ywieniowych demonw, aby dowiedzie si co przyciga demony do osad ludzkich. Jego zdaniem zachodzi korelacja midzy obecnoci pewnych substancji, a intensywnoci atakw demonw.

Zauwaasz, e wynik jego bada mgby pomc ci w zlokalizowaniu rda demonw.

[[Wyra zainteresowanie badaniami]]
[[Udaj si do Akademii]]</tw-passagedata><tw-passagedata pid="62" name="Laboratorium podejrzanego profesora" tags="" position="6350,2475" size="100,100">[if QuestLabElapsedTime===4]
{embed passage: &quot;Nieoczekiwana wizyta&quot;}
[else]
Laboratorium jest opustoszae i pogrone w mroku, rozwietlanym jedynie przez wiec ktrej uyczy ci odwierny. Stanowiska badawcze s zastawione rnego rodzaju demonicznymi preparatami, narzdziami, ksikami i zwojami. ciany pokrywaj rysunki przedstawiajce budow rnych rodzajw demonw.

Sama ta wiedza nie stanowi niczego zakazanego: Inkwizycja korzysta z dostarczanych przez Akademi informacji by skuteczniej walczy z demonami.

Jeeli {companion_name_scientist} si nie myli, gdzie tu mog by dowody prb rytualnego przywoania demonw. Nie powiniene jednak spdza tu za duo czasu. Nie wiadomo kiedy wrci tu podejrzany.
[if QuestLabElapsedTime===3]
W swoich poszukiwaniach potykasz si o pofadowany dywan...
[[Przeszukaj podog pod dywanem]]
[continue]
[if QuestLabElapsedTime!=3]
[[Przeszukaj stosy ksiek]]
[[Przeszukaj soje z preparatami]]
[[Przeszukaj biurko]]
[[Opu laboratorium]]
[continue]</tw-passagedata><tw-passagedata pid="63" name="Las1-1" tags="" position="1300,2650" size="100,100">Nic tu nie ma.

[[Wschd-&gt;Las1-2]]

[[Poudnie-&gt;Las2-1]]</tw-passagedata><tw-passagedata pid="64" name="Las1-2" tags="" position="1425,2650" size="100,100">Nic tu nie ma.

[[Zachd-&gt;Las1-1]]

[[Wschd-&gt;Las1-3]]

[[Poudnie-&gt;Las2-2]]

[[Powrt-&gt;Id do lasu]]</tw-passagedata><tw-passagedata pid="65" name="Las1-3" tags="" position="1550,2650" size="100,100">Nic tu nie ma.

[[Zachd-&gt;Las1-2]]

[[Poudnie-&gt;Las2-3]]</tw-passagedata><tw-passagedata pid="66" name="Las2-1" tags="" position="1300,2775" size="100,100">Widzisz pod nogami lady duego zwierzcia biegnce na poudnie.

[[Pnoc-&gt;Las1-1]]

[[Wschd-&gt;Las2-2]]

[[Poudnie-&gt;Las3-1]]</tw-passagedata><tw-passagedata pid="67" name="Las2-2" tags="" position="1425,2775" size="100,100">Nic tu nie ma. Z pnocy blokuje ci wyjtkowo wielkie drzewo.

[[Zachd-&gt;Las2-1]]

[[Pnoc-&gt;Las1-2]]

[[Wschd-&gt;Las2-3]]</tw-passagedata><tw-passagedata pid="68" name="Las2-3" tags="" position="1550,2775" size="100,100">Widzisz lady duego zwierzcia biegnce na zachd.

[[Pnoc-&gt;Las1-3]]

[[Zachd-&gt;Las2-2]]

[[Wschd-&gt;Las2-4]]

[[Poudnie-&gt;Las3-3]]</tw-passagedata><tw-passagedata pid="69" name="Las2-4" tags="" position="1675,2775" size="100,100">[[Zachd-&gt;Las2-3]]</tw-passagedata><tw-passagedata pid="70" name="Las3-1" tags="" position="1300,2900" size="100,100">[unless clue_key_ranger]
Widzisz midzy drzewami jakie ciao. Moesz [[przyjrze si mu bliej-&gt;Inspekcja Leniczego]] lub zostawi je i wrci do przedzierania si przez las. 
[continue]

Oprcz ciaa nie ma tutaj nic wartego uwagi. Ze wschodu blokuje ci wielkie drzewo.
[[Pnoc-&gt;Las2-1]]</tw-passagedata><tw-passagedata pid="71" name="Las3-3" tags="" position="1550,2900" size="100,100">Nic tu nie ma. Z zachodu blokuje ci wyjtkowo wielkie drzewo.

[[Pnoc-&gt;Las2-3]]

[[Poudnie-&gt;Las4-3]]</tw-passagedata><tw-passagedata pid="72" name="Las4-2" tags="" position="1425,3025" size="100,100">Nic tu nie ma. Na poudniu widzisz jak drobn chatk.

[[Wschd-&gt;Las4-3]]

[[Poudnie-&gt;Las5-2]]</tw-passagedata><tw-passagedata pid="73" name="Las4-3" tags="" position="1550,3025" size="100,100">[if __sufficientvillageclues]
A dziwne, e leniczy nie napotka demona wczeniej. To miejsce jest cakiem niedaleko jego chaty.

[else]
Nic tu nie ma.

[continue]
[[Pnoc-&gt;Las3-3]]

[[Zachd-&gt;Las4-2]]

[if __sufficientvillageclues]
[[Wejd do kryjwki]]

[continue]</tw-passagedata><tw-passagedata pid="74" name="Las5-2" tags="" position="1425,3150" size="100,100">Trafiasz na prg chaty leniczego. Jest skromna, nie ma wok niej wiele ciekawych rzeczy. Na jednym ze schodkw do drzwi wejciowych jest pokana wnka, jakby wydarta z desek.


Moesz [[wej do rodka-&gt;Chata Leniczego]] lub [[wrci si na pnoc-&gt;Las4-2]].</tw-passagedata><tw-passagedata pid="75" name="Mundur leniczego" tags="" position="1300,3250" size="100,100">clue_ranger_2: true
--
Ubrania trupa wskazuj, e nosi umundurowanie martwego leniczego. 
Moesz [[kontynuowa inspekcj-&gt;Inspekcja Leniczego]] lub [[wycofa si-&gt;Las3-1]].</tw-passagedata><tw-passagedata pid="76" name="NOTATKI DO OBOZU" tags="NOTATKA-TECHNICZNA" position="3500,6750" size="200,100">[todo]

QuestCompanionScientistStage:
1 - oczekuje na komentarz dot. aktywacji run
2 - czeka na dalsze info
3 - po wityni


QuestCompanionInquisitionStage:
1 - oczekuje w obozie na raport
2 - wysa raport do inkwizycji  // ! jeli twj standing_human jest za may i mu zabronisz, inkwizycja i tak przybdzie</tw-passagedata><tw-passagedata pid="77" name="Natychmiast Zaatakuj Demona" tags="" position="5650,3175" size="100,100">standing_human=standing_human+10
--
[if archeologist_alive === 0]
Po dugiej walce przeszukujesz ciao mczyzny. Znajdujesz nadszarpnity przez demona dziennik bada. Opisuje on ewidentne lady oddawania czci jakim wyszym istotom przez okolicznych mieszkacw. Znaleli te wyryte na tablicach opisy wykorzystywanych w tym celu rytuaw.

Wszystko wskazuje na to e archeolodzy prbowali bez wiedzy dr Rood odtworzy taki rytua, co jednak zwrcio uwag pobliskich demonw.
[else]
Po dugiej walce zbliasz si do lecego ju bez ruchu mczyzny. Po udzieleniu mu pomocy odzyskuje on przytomno, jednak nie jest w stanie wymwi ani sowa. Zamiast tego podaje ci swj dziennik. Opisuje on ewidentne lady oddawania czci jakim wyszym istotom przez okolicznych mieszkacw. Znaleli te wyryte na tablicach opisy wykorzystywanych w tym celu rytuaw.

Wszystko wskazuje na to e archeolodzy prbowali bez wiedzy dr Rood odtworzy taki rytua, co jednak zwrcio uwag pobliskich demonw.
[continue]

[[Zastanw si, czego si dowiedzie]]</tw-passagedata><tw-passagedata pid="78" name="Nieoczekiwana wizyta" tags="" position="6550,2875" size="100,100">QuestCompanionScientistStage: 3
LeftLab: 1
--
W blasku wiata wpadajcego do pokoju z jasno owietlonego korytarza stoi mczyzna. Jest to twj podejrzany, i nie jeste w stanie ukry, e odkrye ju dowd jego winy.

Wiesz te, e jeli pozwolisz mu zniszczy krg, nie bdziesz mia dowodu, bez ktrego Inkwizytor twojej rangi nie moe go aresztowa.

Proponuje ci ukad: Opucisz laboratorium, a on ci wynagrodzi. Jeli odmwisz, bdzie zmuszony ci zatrzyma.

[[Opu laboratorium]]
[[Aresztuj profesora]]</tw-passagedata><tw-passagedata pid="79" name="Nocne odwiedziny" tags="" position="4075,8325" size="100,100">Tacy jak ty rzadko maj jednak okazj spokojnie si wyspa. Gdy budzisz si w nocy, uwadamiasz sobie, e nie jeste w obozie. Nie jeste jednak w stanie stwierdzi gdzie jeste: zewszd otacza ci nieprzenikniona ciemno.

Nagle twoim oczom ukazuje si czekoksztatna posta, zoona jakby z ciemnoci, ktra j otacza. W mroku ledwie jeste w stanie dostrzec jej kontur.

Posta odzywa si gosem, brzmicym jakby mwia z pod wody.

[[Suchaj cienistej postaci]]</tw-passagedata><tw-passagedata pid="80" name="Nocny powrt do obozu" tags="KONIEC-QUESTA" position="3400,8500" size="100,100">Mwisz uczonemu, e na dzi lepiej skoczy ju ledztwo i przekonujesz go do powrotu do obozu.

[if SearchTemple]
{embed passage: &quot;StageSearchedTemple&quot;}
[continue]


[[Id spa-&gt;Sen]]</tw-passagedata><tw-passagedata pid="81" name="NotifiedInSecret" tags="" position="3800,7250" size="100,100">InqNotifiedInSecret: true
--</tw-passagedata><tw-passagedata pid="82" name="O przestraszonym chopie" tags="" position="2425,2650" size="100,100">Grupa chopw zastanawia si chwil, jednak na myl o potencjalnym konflikcie z Inkwizytorem decyduj si zapozna ci z ich znajomym.
[[Kontynuuj-&gt;Przestraszony chop]]</tw-passagedata><tw-passagedata pid="83" name="Obz - Dzie 2" tags="" position="3850,8825" size="200,100">Nastaje ju wczesne popoudnie. Niebo jest czyste, pogoda sprzyja kontynuacji ledztwa.

[if GateDiscovered]
[[Szukaj Bramy na podstawie wskazwek z raportu]]
[continue]

[if QuestFindGateYourself===1]
[[Rozpocznij poszukiwania Bramy &quot;na lepo&quot;]]
[continue]

[if StateInquisitionNotified]
{embed passage: &quot;InqCountdown&quot;}
[continue]</tw-passagedata><tw-passagedata pid="84" name="Obz - Dzie 3" tags="" position="4150,9400" size="200,100">Gdy budzisz si z rana, od razu zabierasz si za deszyfrowanie run z krgu. Udaje ci si rozczyta  w kolejnej z nich, co daje ci kolejny obszar do przeszukania. Nanoszc go na roboczo spisan map, zauwaasz e obie strefy poszukiwa pokrywaj si...

[[Pracuj dalej -&gt;Deszyfrowanie run 2]]</tw-passagedata><tw-passagedata pid="85" name="Obz - Dzie 4" tags="" position="4125,9700" size="200,100">Zaczyna si kolejny dzie, co oznacza kolejne kilkanacie godzin czytania demonicznych run...

[if CompanionScientist]
Uczony zabiera si do pracy ze znacznie wikszym entuzjazmem ni ty.
[continue]

Po kilku godzinach udaje si tobie rozszyfrowa ostatni wan z punktu widzenia misji run - otrzymujesz trzeci obszar, na ktrym moe znajdowa si Brama. Tak jak si spodziewae, przecina si z dwoma pozostaymi. Wszystkie razem spotykaj si tylko w jednym punkcie - warto bdzie zacz od szukania portalu tam...

Zaczyna robi si pno. Lepiej odoy podr w stron bramy na jutro.

[[Przepij si-&gt;Obz - Dzie 5]]</tw-passagedata><tw-passagedata pid="86" name="Obz - Dzie 5" tags="KONIEC-QUESTA" position="3900,9900" size="200,100">To ju ostatni moment przed wyruszeniem do bramy. Nocne niebo jest czerwonawe od jej bliskoci. Czas na ostatni wsplny odpoczynek. Cokolwiek si stanie, nie ma ju odwrotu.

[if CompanionInquisition]
Modszy Inkwizytor bierze ze sob sporzdzon uprzednio map - bdzie odpowiada za nawigacj w terenie. Oprcz mapy zabiera ze sob te same przedmioty co ty.
[continue]

[if CompanionScientist]
Naukowiec dostaje od ciebie polecenie, eby notowa cay przebieg zdarze - moe przyda si na przyszo...
[continue]

[[Wyrusz do Bramy]]</tw-passagedata><tw-passagedata pid="87" name="Oddaj Archeologa w rce Inkwizycji" tags="" position="5850,3775" size="100,100">standing_human=standing_human+20
--
Po powrocie do miasta oddajesz mczyzn, cigle nie w peni sprawnego, w rce patrolu Inkwizycji, aby przesuchali go i wymierzyli stosown kar za demoniczne praktyki.

[[Wr do holu Akademii]]</tw-passagedata><tw-passagedata pid="88" name="Odrzu prob" tags="FAIL-QUESTA" position="875,3500" size="100,100">Onnod Nuur mwi, e rozumie twoj decyzj i pokazuje ci wyjcie z pomieszczenia, w ktrym si znajdujecie. Wyglda na zawiedzionego.

[[Kontynuuj-&gt;Wyjcie z wielkiego drzewa]]</tw-passagedata><tw-passagedata pid="89" name="Odrzu prob Onnoda" tags="FAIL-QUESTA" position="3250,6525" size="100,100">Odrzucasz prob Onnoda.

Onnod zawiedziony owiadcza, e w takim razie nie bdzie si z tob kontaktowa dalej i odsya ci z powrotem do domu...

[[Kontynuuj-&gt;Dezaktywacja run]]</tw-passagedata><tw-passagedata pid="90" name="Ogldziny odizolowanej wioski" tags="START-QUESTA ROZGAZIONA-CIEKA" position="3900,4875" size="100,100">Brak oznak ycia w okolicy zaczyna by niepokojcy. Oznacza to jednak, e uycie nietypowych metod w ledztwie jest w domyle dozwolone - nikt ci raczej nie powstrzyma.

[[Zagldaj do szpar w zabarykadowanych oknach-&gt;Zagldaj przez okna]]

[[Pukaj do drzwi domw w nadziei e kto otworzy-&gt;Pukaj do drzwi]]

[[Zacznij wywaa drzwi domw-&gt;Zacznij wywaa drzwi]]</tw-passagedata><tw-passagedata pid="91" name="OnnodDemonDead" tags="TECHNICZNE" position="1100,3050" size="100,100">QuestOnnodDemonBountyStage: 1
--</tw-passagedata><tw-passagedata pid="92" name="Opu dom" tags="" position="3925,6425" size="100,100">Przebadawszy runy rozgldasz si ponownie i nie zauwaasz niczego wartego inspekcji.

[[Przeszukaj wicej domw-&gt;Ponowne rozgldanie si po wiosce]]</tw-passagedata><tw-passagedata pid="93" name="Opu laboratorium" tags="" position="6350,2175" size="100,100">standing_human: standing_human-10
--
Opuszczasz laboratorium podejrzanego uczonego. Nie masz dowodw na jakkolwiek nielegaln dziaalno. Czas wrci do Akademii i skupi si na twoim gwnym zadaniu.
{embed passage: &quot;ScientistCompanionExpired&quot;}

[[Udaj si do Akademii]]</tw-passagedata><tw-passagedata pid="94" name="Oskar jedn z grup" tags="" position="3850,1325" size="100,100">Kogo chcesz oskary?

[[Rzemielnikw]]

[[Chopw]]

[[Handlarzy]]</tw-passagedata><tw-passagedata pid="95" name="Ostatnia konwersacja z wegaskim demonem" tags="KONIEC-QUESTA" position="2650,4250" size="100,100">standing_demon: standing_demon+15
CompanionDemon: true
--
Onnod Nuur dzikuje ci za zasug. Obiecuje, e ju nie zobaczysz lokalnego demona oraz mwi, e zobaczysz swoj nagrod ju niedugo...

[[Wr do wjta-&gt;Ostatnia konwersacja z wjtem]]</tw-passagedata><tw-passagedata pid="96" name="Ostatnia konwersacja z wjtem" tags="ROZGAZIONA-CIEKA" position="2225,4375" size="100,100">Wracasz do chaty wjta po raz ostatni. Nie masz w wiosce ju nic do roboty.

Wjt niecierpliwie oczekuje na twoje sprawozdanie z zadania.

[if attacked_village_demon_killed]
[[Poka wjtowi trofeum]]

[continue]
[else]
[[Powiedz, e &quot;problem zosta zlikwidowany&quot;]]

[[Powiedz, e zadanie ci si nie udao]]

[if QuestOnnodDemonBountyStage===1]
[[Poka gow Onnoda]]
[continue]</tw-passagedata><tw-passagedata pid="97" name="Oszczd demona" tags="" position="2300,4000" size="100,100">Na podstawie rozmowy z demonem decydujesz si go oszczdzi. Moesz go zostawi lub pojma go ywcem.

[[Zostaw demona w spokoju]]

[[Pojmij demona i oddaj go w rce Inkwizycji]]

[if quest_vegan_demon_accepted]
[[Pojmij demona i oddaj go Onnodowi Nuurowi]]</tw-passagedata><tw-passagedata pid="98" name="Plan cienistego demona" tags="" position="4600,8400" size="100,100">{faction_mentor_demon} pokada w tobie wielkie nadzieje, dlatego w porozumieniu ze swoimi sojusznikami chce doprowadzi do twojego Wywyszenia. 

Moesz sta si pierwszym pbogiem od stuleci, i stworzy pomost midzy wiatami.
Pokaesz ludziom wiar ktrej zapomnieli i nauczysz ich y w subie wcielonym bogom.

Zakocz si krwawe metody Inkwizycji, zakoczy si przeladowanie ludzi za choby podejrzeniem nieporzdanej aktywnoci. Zapanuje pokj, a ty bdziesz jego inicjatorem. Czy podzielasz jego wizj?

[[Powiedz, e brzmi piknie]]
[[Powiedz, e masz wtpliwoci]]
[[Powiedz, e nie wierzysz mu]]</tw-passagedata><tw-passagedata pid="99" name="Poborowy" tags="" position="3975,450" size="100,100">standing_demon: 5
standing_human: 5
background: &quot;drafted&quot;
--
Obz szkoleniowy umoliwiajcy doczenie do Inkwizycji jest niewiarygodnie trudny - rygorystyczne testy sprawnociowe przeplatane wykadami o demonach, geografii, taktykach walki i innych tematach sprawiaj, e wielu odpada. Tobie jednak udaje si przetrwa, co umoliwia ci oficjalnie zacign si do Inkwizycji...

[[Kontynuuj-&gt;Prolog]]</tw-passagedata><tw-passagedata pid="100" name="Podejd z wycignit broni, zwracajc na siebie uwag" tags="" position="5850,3175" size="100,100">archeologist_alive: 0
--
[if standing_demon&gt;=15]
{embed passage: &quot;Rozmowa z demonem i archeologiem&quot;}
[else]
Demon zauwaa ci, i wykorzystuje twj moment zawahania. Rzuca si na mczyzn po czym rusza do ataku
[[Natychmiast Zaatakuj Demona]] 
[continue]</tw-passagedata><tw-passagedata pid="101" name="Podr z chopami" tags="" position="2275,2650" size="100,100">Przed rozstaniem si z tob chopi wspominaj, e krowy le na poudniowym zachodzie od miejsca do ktrego planuj ci zabra.
[[Kontynuuj-&gt;Polana2-3]]</tw-passagedata><tw-passagedata pid="102" name="Podaj za tajemnicz figur" tags="" position="2700,1375" size="100,100">Gonisz w niezbyt zgrabnym pancerzu Inkwizycji tajemnicz sylwetk przez las - cigle ci umyka, do momentu a w pewnym momencie si zatrzymuje na tyle daleko, e nie moesz dojrze kim - lub czym - jest. 

[[Kontynuuj-&gt;Pomniejsze zdziczae demony]]</tw-passagedata><tw-passagedata pid="103" name="Pojmij demona i oddaj go Onnodowi Nuurowi" tags="" position="2500,4125" size="100,100">Gdy prbujesz znienacka oguszy demona aby go pojma, ten atakuje ci w samoobronie. Udaje ci si jednak pokona go i zabra ze sob.

[[Wr do Onnoda Nuura-&gt;Ostatnia konwersacja z wegaskim demonem]]</tw-passagedata><tw-passagedata pid="104" name="Pojmij demona i oddaj go w rce Inkwizycji" tags="FAIL-QUESTA" position="1975,4250" size="100,100">Gdy prbujesz znienacka oguszy demona aby go pojma, ten atakuje ci w samoobronie. Udaje ci si jednak pokona go i zabra ze sob. Kto wie czy lepszym losem dla niego nie byaby mier...

[[Wr do wjta-&gt;Ostatnia konwersacja z wjtem]]</tw-passagedata><tw-passagedata pid="105" name="Poka gow Onnoda" tags="" position="2525,4475" size="100,100">standing_human: standing_human+5
QuestOnnodDemonBountyStage: 2
--


Wjt dzikuje ci za twoj zasug, jednak mwi, e demony ktre krciy si w okolicach wioski wyglday inaczej. Wyglda na to, e twoja robota tutaj si nie skoczya.

[[Powrt-&gt;Ostatnia konwersacja z wjtem]]</tw-passagedata><tw-passagedata pid="106" name="Poka wjtowi gow Onnoda Nuura" tags="" position="3400,2775" size="100,100">standing_human: standing_human+5
QuestOnnodDemonBountyStage: 2
--


Wjt dzikuje ci za twoj zasug, jednak mwi, e demony ktre krciy si w okolicach wioski wyglday inaczej. Wyglda na to, e twoja robota tutaj si nie skoczya.

[[Powrt-&gt;Przesuchaj wjta]]</tw-passagedata><tw-passagedata pid="107" name="Poka wjtowi trofeum" tags="KONIEC-QUESTA" position="2225,4500" size="100,100">GlobalClueDemonRuins: GlobalClueDemonRuins+1
standing_human:standing_human+10
QuestVillageComplete: true
--
Wjt jest bardzo zadowolony twoim wyczynem. Oferuje ci wysok nagrod pienin oraz dozgonn wdziczno.

[[Kontynuuj-&gt;Id do centrum dziaa]]</tw-passagedata><tw-passagedata pid="108" name="Polana1-1" tags="" position="1800,2650" size="100,100">Nic tu nie ma.
Z zachodu i pnocy blokuje ci gsty las.
[[Wschd-&gt;Polana1-2]]</tw-passagedata><tw-passagedata pid="109" name="Polana1-2" tags="" position="1925,2650" size="100,100">Nic tu nie ma. 

[[Powrt-&gt;Id na polan]]

[[Wschd-&gt;Polana1-3]]

[[Zachd-&gt;Polana1-1]]

[[Poudnie-&gt;Polana2-2]]</tw-passagedata><tw-passagedata pid="110" name="Polana1-3" tags="" position="2050,2650" size="100,100">Nic tu nie ma.

[[Zachd-&gt;Polana1-2]]

[[Poudnie-&gt;Polana2-3]]</tw-passagedata><tw-passagedata pid="111" name="Polana2-2" tags="" position="1925,2775" size="100,100">Nic tu nie ma.
Z zachodu blokuje ci gsty las.
Na poudnu jest bagno ktrego nie mona przej na piechot.
[[Pnoc-&gt;Polana1-2]]
[[Wschd-&gt;Polana2-3]]</tw-passagedata><tw-passagedata pid="112" name="Polana2-3" tags="" position="2050,2775" size="100,100">Nic tu nie ma.

[[Zachd-&gt;Polana2-2]]

[[Poudnie-&gt;Polana3-3]]

[[Pnoc-&gt;Polana1-3]]</tw-passagedata><tw-passagedata pid="113" name="Polana3-1" tags="" position="1800,2900" size="100,100">[[Wschd-&gt;Polana3-2]]
[[Poudnie-&gt;Polana4-1]]</tw-passagedata><tw-passagedata pid="114" name="Polana3-2" tags="" position="1925,2900" size="100,100">Na polanie widzisz grup martwych krw. Zdaje si, e dopady je dzikie zwierzta.

[unless clue_key_cows]
[[Przyjrzyj si bliej-&gt;Inspekcja Krw]]
[continue]

[[Wschd-&gt;Polana3-3]]

[[Zachd-&gt;Polana3-1]]</tw-passagedata><tw-passagedata pid="115" name="Polana3-3" tags="" position="2050,2900" size="100,100">Widzisz martw krow.

[[Pnoc-&gt;Polana2-3]]

[[Zachd-&gt;Polana3-2]]</tw-passagedata><tw-passagedata pid="116" name="Polana4-1" tags="" position="1800,3025" size="100,100">[[Pnoc-&gt;Polana3-1]]
[[Krta droga do lasu-&gt;Las1-3]]</tw-passagedata><tw-passagedata pid="117" name="Pomniejsze zdziczae demony" tags="ROZGAZIONA-CIEKA" position="2450,1525" size="100,100">Posta ktr gonie okazaa si by pomniejszym zdziczaym demonem, powoli przymierzajcym si do skoku w twoj stron. Okolice wioski rzeczywicie maj problem z panoszcymi si tutaj potworami.

Chwil po waszym pojedynku na wzrok pojawia si przed tob grupa demonw bardzo podobnych do niego. Wyglda na to e przemieszczaj si w paczce.

Nadal masz opcj [[wycofa si i udawa e ich nie widziae-&gt;Ucieczka od konfrontacji z pomniejszymi demonami]]. Szansa, e pod za tob jest znikoma - w kocu to ty je zapdzie w rg. Pomniejszymi demonami mog zaj si nawet niewyszkoleni chopi, a zapata za nie nie bdzie wysoka.

Moesz take [[podj walk-&gt;Konfrontacja z pomniejszymi demonami]] i pokaza im, jak Inkwizycja rozprawia si z takimi stworzeniami jak one.</tw-passagedata><tw-passagedata pid="118" name="Ponowne rozgldanie si po wiosce" tags="" position="4175,6575" size="100,100">__allcluesVillage: clue_demon_circle &amp;&amp; clue_demon_runes
--
[if __allcluesVillage]
Przeszukae ju chyba wszystkie warte uwagi domy w wiosce. Czujesz si wykoczony, a na dodatek wyglda na to e nie ma ju czego tu oglda. Zaczyna robi si ciemno.

[[Wr do obozu i zregeneruj siy-&gt;Wr do obozu]]
[continue]
[if !clue_demon_circle]
Po bliskim kontakcie z runami czujesz si troch zdezorientowany. Dzie nadal si jednak nie skoczy i by moe znajdziesz co jeszcze w swoich poszukiwaniach.

[[Obejd wiosk jeszcze raz-&gt;Dom z krgiem]]

[[Wr do obozu i zregeneruj siy-&gt;Wr do obozu]]
[if !clue_demon_runes]
Niespodziewana konfrontacja z demonem sprawia, e czujesz si zmczony. Dzie nadal si jednak nie skoczy i moe warto byoby zbada runy zanim wrcisz do obozu.

[[Obejd wiosk jeszcze raz-&gt;Zbadaj runy]]

[[Wr do obozu i zregeneruj siy-&gt;Wr do obozu]]</tw-passagedata><tw-passagedata pid="119" name="Porozmawiaj z demonem" tags="ROZGAZIONA-CIEKA" position="1975,3775" size="100,100">dialogue_village_demon: dialogue_village_demon+1
--
Skoro demon wykazuje wystarczajco wysok inteligencj eby baga o lito, decydujesz si aby z nim porozmawia.

[[Zapytaj o incydent z krowami]]

[[Zapytaj o leniczego]]

[if clue_key_bear]
[[zapytaj o niedwiedzia]]

[continue]
[if dialogue_village_demon&gt;=2]

[[Zabij demona]]

[[Oszczd demona]]</tw-passagedata><tw-passagedata pid="120" name="PowerWithin" tags="ROZGAZIONA-CIEKA" position="3850,11100" size="100,100">[if StateDemonicInterest]
Inkwizytor mwi, e twoja niesubordynacja zostanie ukarana gdy wrcicie do 
kwatery gwnej. W tym momencie potrzebuje kadego dostpnego onierza.
Mia ju do czynienia z t bram przed laty, i nie spocznie pki nie zostanie zamknita ponownie.

Szept odzywa si w twoim pprzytomnym umyle. Pierwiastek mocy ktra jest ci obiecana. jest na wycignicie rki. Musisz tylko po niego sign.

[[Przysigaj, e twoja niesubordynacja bya wycznie w interesie Inkwizycji -&gt;Walka po stronie Inkwizycji]]

[[Zaczerpnij boskiej mocy]]
[else]
Inkwizytor mwi, e twoja niesubordynacja zostanie ukarana gdy wrcicie do 
kwatery gwnej. W tym momencie potrzebuje kadego dostpnego onierza.
Mia ju do czynienia z t bram przed laty, i nie spocznie pki nie zostanie zamknita ponownie.

[[Popro by oddali ci bro i docz do si Inkwizycji-&gt;Walka po stronie Inkwizycji]]</tw-passagedata><tw-passagedata pid="121" name="Powiedz o leniczym" tags="" position="3275,2775" size="100,100">Wjt pacze. Leniczy by jego ulubionym dalekim kuzynem.
[[Zapytaj o incydenty]]</tw-passagedata><tw-passagedata pid="122" name="Powiedz, e &quot;problem zosta zlikwidowany&quot;" tags="KONIEC-QUESTA" position="2350,4500" size="100,100">GlobalClueDemonRuins: GlobalClueDemonRuins+1
QuestVillageComplete: true
--
Wjt przez chwil si waha, jednak wrcza ci redni nagrod pienin.

[[Kontynuuj-&gt;Id do centrum dziaa]]</tw-passagedata><tw-passagedata pid="123" name="Powiedz, e brzmi piknie" tags="" position="4600,8525" size="100,100">{faction_mentor_demon} wydaje z siebie stumiony miech zadowolenia. Mwi, e bdzie oczekiwa a odnajdziesz bram do Drugiego wiata, aby mc powit ci po drugiej stronie. 

Z t obietnic odsya ci do obozu. Nie pisz wiele, rozmylajc o przyszoci.

[[Kontynuuj-&gt;Przebudzenie]]</tw-passagedata><tw-passagedata pid="124" name="Powiedz, e masz wtpliwoci" tags="" position="4725,8525" size="100,100">{faction_mentor_demon} oznajmia, e wtpliwoci s rzecz ludzk. Po Wywyszeniu wszystko stanie si jasne. Bdzie z niecierpliwoci oczekiwa twojej decyzji. Gdy przejdziesz na drug stron bramy, on powita ci po drugiej stronie.

To powiedziawszy, odsya ci do obozu. Pochonity niepewnociami, niewiele pisz przez reszt nocy.
[[Kontynuuj-&gt;Przebudzenie]]</tw-passagedata><tw-passagedata pid="125" name="Powiedz, e nie wierzysz mu" tags="" position="4475,8525" size="100,100">StateDemonicInterest: false
--
Ton gosu i postawa demona zmieniaj si. Wydaje si uraony. Mwi, e widocznie popeni bd wybierajc ci. Zostawia ci wic z odzyskan wiedz i odsya do obozu.

Reszta nocy duy ci si od rozmyla nad jego sowami.

[[Kontynuuj-&gt;Przebudzenie]]</tw-passagedata><tw-passagedata pid="126" name="Powiedz, e zadanie ci si nie udao" tags="KONIEC-QUESTA" position="2100,4500" size="100,100">GlobalClueDemonRuins: GlobalClueDemonRuins+1
standing_demon:standing_demon+5
standing_human:standing_human-10
QuestVillageComplete: true
--
Wjt jest wyranie zawiedziony. Odmawia wrczenia ci nagrody.

[[Kontynuuj-&gt;Id do centrum dziaa]]</tw-passagedata><tw-passagedata pid="127" name="Powrt do wozu:poraka" tags="KONIEC-QUESTA" position="2800,1700" size="100,100">standing_demon: standing_demon+5
--
Ostronie cofasz si i zostawiasz demony w tyle. Mimo ich zdziczaej natury nie goni ci - prawdopodobnie przeczuy e w tak maej grupie nie maj szans...

Mwisz wonicy e nie ma si czym martwi, a w lesie nic nie znalaze. Walka z pomniejszymi demonami to strata czasu, ale jednak wiadomo o ucieczce od nich jest haniebna.

[[Docierasz do wioski]]</tw-passagedata><tw-passagedata pid="128" name="Powrt do wityni" tags="" position="3675,8125" size="100,100">[if CompanionInquisition]
Naukowiec robi wymwk, e potrzebuje w czym twojej pomocy. Twj podwadny zdaje si co podejrzewa...
[else]
Razem z naukowcem podacie udeptan ciek i docieracie znw do wityni...

[[Kontynuuj-&gt;Przedpole wityni]]</tw-passagedata><tw-passagedata pid="129" name="Pozbd si podwadnego - nie moe ju miesza w twoich planach" tags="" position="3625,11400" size="100,100">Atakujesz modego Inkwizytora od tyu - ten nawet nie zauwaa, gdy zostaje zabity.

Zaginicie Inkwizytora pod twoj opiek na pewno nie umknie twojemu przeoonemu. Najprawdopodobniej odkrycie twojej zbrodni jest tylko kwesti czasu...

Nie masz jednak teraz czasu si tym martwi. Pora dokoczy twoje dzieo. 

Onnod prowadzi ci midzy demonami, ktre wydaj si mu ustpowa. aden z nich nie odwaa si ciebie zaatakowa. Razem z nim stabilizujesz bram, po czym Onnod dzikuje ci i znika razem z hord Demonw.

Liczysz, e twoja decyzja zaprowadzi pokj midzy ludmi a demonami...

[[ENDING 3]]</tw-passagedata><tw-passagedata pid="130" name="Pozwl Demonowi odej i uratuj archeologa" tags="" position="5950,3325" size="100,100">archeologist_alive: 1
standing_demon: standing_demon+20
--
Demon ostronie wycofuje si w kierunku lasu, a gdy czuje si ju bezpiecznie kadzie archeologa na ziemi.

Zbliasz si do lecego ju bez ruchu mczyzny. Po udzieleniu mu pomocy odzyskuje on przytomno, jednak nie jest w stanie wymwi ani sowa. Zamiast tego podaje ci swj dziennik. Opisuje on ewidentne lady oddawania czci jakim wyszym istotom przez okolicznych mieszkacw. Znaleli te wyryte na tablicach opisy wykorzystywanych w tym celu rytuaw.

Wszystko wskazuje na to e archeolodzy prbowali bez wiedzy dr Rood odtworzy taki rytua, co jednak zwrcio uwag pobliskich demonw.

[[Zastanw si, czego si dowiedzie]]</tw-passagedata><tw-passagedata pid="131" name="Pozwl demonom zje chleb" tags="" position="4850,3275" size="100,100">standing_demon: standing_demon+5
--

Najedzone demony, uciekaj do lasu. Dr Holms wydaje si usatysfakcjonowany.

Prosi ci o pomoc w przeniesieniu skrzy z wozu na rodek polany. Znasz ich zawarto jeszcze zanim zostaj otwarte - z otworw dochodzi ci zapach zwierzt hodowlanych. W istocie, po otwarciu skrzy twoim oczom ukazuj si mae kozy. ywe, ale pod wpywem zakl uspokajajcych dla atwego transportu.

Ich obecno przyciga na polan demony rozmiarw czowieka, ktre rzucaj si na swoje ofiary. Te, wci pod wpywem zaklc nie s w stanie stawia oporu, a jedynie wydaj z siebie odgosy blu.

Dr Holms zwraca twoj uwag na mniejsze demony, ktre kr wok duych szukajc resztek aby si poywi. ywe istoty s najwyraniej dla nich okazjonalnym rarytasem.

[[Pozwl demonom zje kozy]]
[[Zabij demony, podczas gdy s zajte kozami]]</tw-passagedata><tw-passagedata pid="132" name="Pozwl demonom zje kozy" tags="" position="4850,3475" size="100,100">standing_demon: standing_demon+5
--

Due demony odchodz w las, czciowo nasycone. Dr Holms ogasza, e eksperyment uwaa za zakocony pomylnie, i chce z tob przedyskutowa wyniki.

Zanim zda co powiedzie, na polanie pojawia si grupa chopw z prowizorycznym uzbrojeniem. Najwyraniej kto zauway obecno demonw i powiadomi poblisk wiosk.

Nagle z lasu wychodzi ogromny, wygodniay demon i rzuca si na chopw, ktrzy rozbiegaj si w panice. Mniejsze rodzaje demonw, rzucaj si na rannych.

[[Uratuj chopw]]
[[Schowaj si i obserwuj]]</tw-passagedata><tw-passagedata pid="133" name="Prolog" tags="" position="3850,600" size="100,100">Jeste wieym rekrutem w siach zbrojnych Inkwizycji. 
[if background === &quot;cultist&quot;]
Inni czonkowie twojego plutonu gardz tob, jednak twj dowdca dostrzega w tobie ch odkupienia twoich przeszych wykrocze.
[if background === &quot;recruit&quot;]
Inni czonkowie twojego plutonu zazdroszcz ci yczliwoci, ktr obdarzaj ci przeoeni.
[if background === &quot;drafted&quot;]
Zaskakujco szybko odnajdujesz si w nowym rodowisku, udaje ci si znale wsplny jzyk z pozostaymi czonkami swojego plutonu, jednak weterani patrz na ciebie z politowaniem.
[continue]

[[Kontynuuj-&gt;Prolog - 2]]</tw-passagedata><tw-passagedata pid="134" name="Prolog - 2" tags="" position="3850,725" size="100,100">Dowodca przedstawia ci si jako {faction_mentor_inquisition}, objania ci twj zakres obowizkw, zapoznaje ci ze struktur inkwizycji oraz planem najbliszych dziaa w placwce do ktrej ci przydzielono.

Nagle placwka zostaje zaatakowana przez siy Demonw. Razem z innymi rekrutami walczysz o przetrwanie, i w chaosie prbujesz odnale swojego dowdc. Gdy twoja druyna zostaje przygwodona przez potnego demona, zjawia si zesp weteranw i ratuje sytuacj. Dowdca daje ci pierwsze zadanie: odszuka ludzi ktrzy przywoali demony.

[[Id do miasta]]</tw-passagedata><tw-passagedata pid="135" name="Przebadaj runy z krgu jeszcze raz - moe co przeoczye" tags="" position="4200,9100" size="100,100">Wracasz do domu w ktrym doszo do twojej konfrontacji z demonem. Analizujesz znaki jeszcze raz, dziki czemu zauwaasz e niektre z nich przypominaj znajome ci z czasw szkolenia glify teleportacji uywane przez heretykw - te w domu s jednak o wiele bardziej zoone.

[if CompanionScientist]
Naukowiec towarzyszy ci przez cay czas i rwnolegle z tob sporzdza notatki.
[continue]

[if CompanionInquisition]
W midzyczasie twj podwadny przeczesuje tereny wok wioski w celu poszukiwania jedzenia i surowcw niezbdnych do przetrwania.

[[Sprbuj rozszyfrowa glify-&gt;Deszyfrowanie run]]</tw-passagedata><tw-passagedata pid="136" name="Przebudzenie" tags="ROZGAZIONA-CIEKA" position="3900,8600" size="100,100">__CompanionNotSearchedTemple: CompanionScientist &amp;&amp; FoundTempleAbsent &amp;&amp; !SearchTemple
__TogetherNotSearchedTemple: CompanionScientist &amp;&amp; FoundTemple &amp;&amp; !SearchTemple
--
[if __BothPlayableCompanions]
Budzisz si nagle z pytkiego snu gdy soce uderza w twoje oczy. Okazuje si e zaspae i twoi towarzysze wyrczyli ci w niektrych obowizkach. Na stole ley ju niadanie przygotowane przez uczonego, ktre wyglda jak danie przygotowane dla samego Krla.
[continue]

[if __OnlyScientist]
Budzisz si nagle z pytkiego snu gdy soce uderza w twoje oczy. Okazuje si e zaspae i twj towarzysz wyrczy ci w niektrych obowizkach.
[continue]

[if __OnlyInquisition]
Budzisz si nagle z pytkiego snu gdy soce uderza w twoje oczy. Okazuje si e zaspae i twj towarzysz wyrczy ci w niektrych obowizkach.
[continue]

[if !__AnyPlayableCompanions]
Budzisz si nagle z pytkiego snu gdy soce uderza w twoje oczy. Jest dosy wczenie, wic masz szans na zakoczenie dzisiejszej partii ledztwa o wiele wczeniej ni wczoraj.
[continue]

[if __CompanionNotSearchedTemple]
{embed passage: &quot;Wyprawa do wityni&quot;}

[continue]

[if __TogetherNotSearchedTemple]
{embed passage: &quot;Powrt do wityni&quot;}

[continue]

[if QuestFindGateYourself===1]
[[Rozpocznij poszukiwania Bramy &quot;na lepo&quot;]]
[continue]

[if GateDiscovered]
[[Szukaj Bramy na podstawie wskazwek z raportu]]
[continue]

[[Zabij czas w obozie-&gt;Obz - Dzie 2]]</tw-passagedata><tw-passagedata pid="137" name="Przeczytaj raport" tags="" position="3175,8675" size="100,100">GateDiscovered: true
--
Wyglda na to, e inkwizytorzy znaleli du bram przez ktr demony przechodz do waszego wiata. Udao im si j zamkn, jednak tylko jeden z nich ocala. Zostawi kopi raportu na wypadek gdyby nie udao mu si wrci do miasta.

Inkwizytor podpisa si jako {faction_mentor_inquisition}, twj przeoony.

[if Act2Day===1]
[[Wr do obozu-&gt;Nocny powrt do obozu]] 
[else]
[[Wr do obozu-&gt;Dzienny powrt do obozu]]</tw-passagedata><tw-passagedata pid="138" name="Przedpole wityni" tags="START-QUESTA" position="3150,8050" size="100,100">FoundTemple: true
--
[if Act2Day===1]
Idziesz za uczonym, podajc za ladami ktre wydepta w rolinnoci. Widzisz go midzy drzewami, a w miar zbliania si do jego pozycji zauwaasz podniszczony budynek z grubo ciosanych belek wygldajcy jak may wiejski koci... 
[continue]

[if CompanionDemon]
Wok budowli stoj prymitywne posgi z kamienia, ktre przypominaj w pewien sposb sylwetki ludzi i znajomego tobie demona...

[else]
Wok budowli stoj prymitywne posgi z kamienia, ktre przypominaj w pewien sposb sylwetki ludzi i czego na ksztat demonw ze starych opowiada...
[continue]

[if Act2Day===1]
Podchodzisz do naukowca od tyu, przez co ten podskakuje ze strachu. Widzc e to tylko ty od razu si relaksuje. Mwi, e przebadawszy zewntrzne partie konstrukcji wnioskuje, i jest to jaka pierwotna forma czczenia demonw przez ludzi.

Naukowiec proponuje eby zajrze do rodka.
[continue]

[[Przebadaj wraz z naukowcem budowl od wewntrz-&gt;Badanie wityni]]

[if Act2Day===1]
[[Od badanie wntrza budowli na jutro-&gt;Nocny powrt do obozu]]
[continue]</tw-passagedata><tw-passagedata pid="139" name="Przepytaj grup chopw w polu" tags="" position="3850,975" size="100,100">QuestionedPrologue: QuestionedPrologue + 1
--
Chopi zarczaj, e s niewinni i obarczaj win handlarza, ktry sprzedaje nieznane im dziwne przedmioty.

[[wr do placwki]]</tw-passagedata><tw-passagedata pid="140" name="Przepytaj handlarzy na rynku" tags="" position="3975,975" size="100,100">QuestionedPrologue: QuestionedPrologue + 1
--
Handlarze zaprzeczaj wszelkim zarzutom, i obarczaj win rzemielnika z ktego warsztatu dobiegaj po zmroku dziwne odgosy.

[[wr do placwki]]</tw-passagedata><tw-passagedata pid="141" name="Przepytaj rzemielinikw" tags="" position="3725,975" size="100,100">QuestionedPrologue: QuestionedPrologue + 1
--
Rzemielnicy przysigaj e s niewinni i obarczaj win jednego z chopw, ktrego widzieli chodzcego po polu pn noc.

[[wr do placwki]]</tw-passagedata><tw-passagedata pid="142" name="Przestraszony chop" tags="" position="2475,2775" size="100,100">Chopi prowadz ci do swojego znajomego. Wyglda na to, e jest pijany - trudno bdzie wycign od niego wartociowe informacje. 

[[Poddaj si i szukaj innego rda informacji-&gt;Rozejrzyj si po wiosce]]

[[Sprbuj go przepyta-&gt;Przesuchaj przestraszonego chopa]]</tw-passagedata><tw-passagedata pid="143" name="Przeszukaj biurko" tags="" position="6550,2575" size="100,100">QuestLabElapsedTime: QuestLabElapsedTime +1
--
W biurku znajdujesz jedynie listy obecnoci, raporty, prace studentw i zapasowe przybory do pisania.
[[Laboratorium podejrzanego profesora]]</tw-passagedata><tw-passagedata pid="144" name="Przeszukaj podog pod dywanem" tags="" position="6550,2275" size="100,100">QuestLabElapsedTime: QuestLabElapsedTime +1
--
W laboratorium nie powinno by adnych dywanw. Po zwiniciu podejrzanego dywanu, twoim oczom ukazuje si wielki rytualny krg. To jest dowd ktrego szukae.

[[Laboratorium podejrzanego profesora]]</tw-passagedata><tw-passagedata pid="145" name="Przeszukaj stosy ksiek" tags="" position="6550,2375" size="100,100">QuestLabElapsedTime: QuestLabElapsedTime +1
--
Ksiki s przepenione naukowym argonem, ktry nawet takiego dowiadczonego owc demonw jak ty przyprawiaj o zawroty gowy. Nawet gdyby byo tu co niezgodnego z wytycznymi Inkwizycji, ty nie umiaby tego wskaza.
[[Laboratorium podejrzanego profesora]]</tw-passagedata><tw-passagedata pid="146" name="Przeszukaj soje z preparatami" tags="" position="6550,2475" size="100,100">QuestLabElapsedTime: QuestLabElapsedTime +1
--
Preparaty w sojach s zabezpieczone przed rozkadem i wyciekiem demonicznych esencji na badaczy. Nie sposb jednak stwierdzi czy s pobrane z przywoanych demonw, czy te zwyczajnie zebrane z pola bitwy.
[[Laboratorium podejrzanego profesora]]</tw-passagedata><tw-passagedata pid="147" name="Przesuchaj chopw" tags="" position="2350,2525" size="100,100">Na twarzach chopw wyranie wida ulg e ci widz. Z zapaem opowiadaj ci o demonie w polu i o tym, e zjad ich krowy oraz e od tamtego momentu nie wybierali si w tamte okolice. Mwi take e nie widzieli demona na wasne oczy.

Chopi oferuj, [[aby zaprowadzi ci w stron miejsca zdarzenia-&gt;Podr z chopami]] ale mwi e reszt drogi bdziesz musia przeby sam. 

Masz take moliwo [[przeczesa polan samemu-&gt;Id na polan]] i zobaczy czy nie ma tam innych punktw zainteresowania.

Moesz take dalej [[rozglda si po wiosce-&gt;Rozejrzyj si po wiosce]].


[if knows_about_scared_peasant]
Od plotkujcych kobiet dowiedziae si o chopie, ktry natkn si na trupa w lesie. [[Moe czas wykorzysta t wiedz?-&gt;O przestraszonym chopie]]

[continue]</tw-passagedata><tw-passagedata pid="148" name="Przesuchaj grup plotkujcych kobiet" tags="ROZGAZIONA-CIEKA" position="2850,2625" size="100,100">[if interrogation_gossiping_women]
Kobiety nie s chtne do rozmowy, odpowiadaj wymijajco na pytania, wida e nic z nich nie wycigniesz.

Pozostaje tylko [[dalej rozglda sie po wiosce-&gt;Rozejrzyj si po wiosce]]

[else]
Podchodzisz do grupy kobiet, wydaj si by przejte jak wan spraw. Mwi midzy sob tak cicho e nie moesz ich po prostu podsucha.

[[Sprbuj je przekupi]]

[[Zagr im]]

[[Sprbuj by &quot;dobrym glin&quot;]]

Daj im spokj i id na [[Rynek]]
[continue]</tw-passagedata><tw-passagedata pid="149" name="Przesuchaj przestraszonego chopa" tags="ROZGAZIONA-CIEKA" position="2525,2900" size="100,100">Chop mwi nieskadnie, jednak moesz z jego bekotu wycign e ciao znajduje si gdzie w zachodniej czci lasu. Zaraz po odpowiedzeniu ci usypia.

Pozostaje [[wrci do rozgldania si po wiosce-&gt;Rozejrzyj si po wiosce]]. Moesz take [[uda si do lasu-&gt;Las1-2]] i sprbowa poda za wskazwkami pijanego chopa.</tw-passagedata><tw-passagedata pid="150" name="Przesuchaj wjta" tags="" position="3275,2525" size="100,100">Wjt jest widocznie zakopotany sytuacj w wiosce. Zwierza si, e ma wiele na gowie i ostatnie incydenty przysporzyy mu wiele problemw. 

[todo]
poprawi flavor text
[continue]

[[Zapytaj o incydenty]]

[[Zapytaj o okoliczne tereny]]

[[Zapytaj o mieszkacw ktrzy mog co wiedzie]]

[[Zapytaj o demony w okolicy]]

[if QuestOnnodDemonBountyStage===1]
[[Poka wjtowi gow Onnoda Nuura]]
[continue]
Wr na [[Rynek]]</tw-passagedata><tw-passagedata pid="151" name="Przyjmij wyzwanie od losu i zjedz swoje danie" tags="" position="4300,7875" size="100,100">[if __BothPlayableCompanions]
Nie ma innego wyjcia - jedzenie nie moe si zmarnowa. Z obrzydzeniem zjadasz wykonan przez siebie potraw...

Twoi towarzysze decyduj si wstrzyma przed jedzeniem.
[continue]

[if __OnlyScientist]
Nie ma innego wyjcia - jedzenie nie moe si zmarnowa. Z obrzydzeniem zjadasz wykonan przez siebie potraw...

Naukowiec decyduje si wstrzyma przed jedzeniem.
[continue]

[if __OnlyInquisition]
Nie ma innego wyjcia - jedzenie nie moe si zmarnowa. Z obrzydzeniem zjadasz wykonan przez siebie potraw...

Inkwizytor bdcy pod twoj komend decyduje si wstrzyma przed jedzeniem.
[continue]

[If !__AnyPlayableCompanions]
Nie ma innego wyjcia - jedzenie nie moe si zmarnowa. Z obrzydzeniem zjadasz wykonan przez siebie potraw...
[continue]

[[Sprztnij i po si spa-&gt;Sen]]</tw-passagedata><tw-passagedata pid="152" name="Pukaj do drzwi" tags="" position="3900,5100" size="100,100">Zdaje si, e w okolicznych domach rzeczywicie nikogo nie ma - a przynajmniej wskazuje na to brak odpowiedzi z drugiej strony drzwi.

[[Pukaj dalej-&gt;Pukaj do drzwi]]

[[Zagldaj przez okna]]

[[Zacznij wywaa drzwi]]</tw-passagedata><tw-passagedata pid="153" name="Pjd za uczonym" tags="" position="3400,8125" size="100,100">[if CompanionInquisition]
Naukowiec robi wymwk, e potrzebuje w czym twojej pomocy. Twj podwadny zdaje si co podejrzewa...
[else]
Uczony zabiera ci przez wydeptan wczeniej przez niego ciek. W trakcie podry opowiada z zapaem o budowli, ktr odkry...
[continue]

w miar zbliania si do budynku zauwaasz par szczegw - jest z grubo ciosanych belek i wyglda jak may wiejski koci... 

[[Kontynuuj-&gt;Przedpole wityni]]</tw-passagedata><tw-passagedata pid="154" name="QuestRunesActivated" tags="TECHNICZNE" position="3375,5775" size="100,100">QuestCompanionScientistStage: 1
--</tw-passagedata><tw-passagedata pid="155" name="Rany Leniczego" tags="" position="1150,3250" size="100,100">clue_ranger_1: true
--
Na pozostaociach ciaa leniczego wida, e zosta rozszarpany wielkimi pazurami. Jego klatka piersiowa ma gbokie rany.

Moesz [[kontynuowa inspekcj-&gt;Inspekcja Leniczego]] lub [[wycofa si-&gt;Las3-1]].</tw-passagedata><tw-passagedata pid="156" name="Rany krw" tags="" position="1925,3225" size="100,100">clue_cows_1: true
--
Krowy zostay zaatakowane pazurami, wida na nich gbokie rany szarpane. Wyglda na to e zwierz ktre je dopado nie miao apetytu na ich miso - wida jest jednak e upucio im mnstwo krwi zanim je wykoczyo.
[[Kontynuuj dochodzenie-&gt;Inspekcja Krw]]</tw-passagedata><tw-passagedata pid="157" name="Rekrut" tags="" position="3850,450" size="100,100">standing_demon: 0
standing_human: 10
background: &quot;recruit&quot;
--
Obz szkoleniowy umoliwiajcy doczenie do Inkwizycji jest niewiarygodnie trudny - rygorystyczne testy sprawnociowe przeplatane wykadami o demonach, geografii, taktykach walki i innych tematach sprawiaj, e wielu odpada. Tobie jednak udaje si przetrwa, co umoliwia ci oficjalnie zacign si do Inkwizycji...

[[Kontynuuj-&gt;Prolog]]</tw-passagedata><tw-passagedata pid="158" name="Rozbij obz w pobliu" tags="" position="3900,4725" size="100,100">Act2Day: 1
--
Rozbijasz niedaleko wioski may obz, kompletny w wielki namiot, ognisko oraz pojemny garnek zawieszony tu nad nim. 

[if CompanionScientist]
Naukowiec towarzyszcy ci rozkada w trakcie swoj polow stacj badawcz, gdzie organizuje swoje notatki oraz wyjmuje zestaw dziwnych fiolek z nieznajomymi ci pynami, jak i rne mechanizmy napdzane zbatkami.
[continue]

[if CompanionInquisition]
Powierzony w twoj &quot;opiek&quot; inkwizytor rozbija swj wasny namiot, po czym idzie zebra w lesie najpotrzebniejsze zasoby, takie jak drewno na opa i miso na wieczorn kolacj.
[continue]

Na ten moment nie masz tu nic do zrobienia, wic pozostaje ci tylko rozpocz dochodzenie.

[[Rozejrzyj si po wiosce-&gt;Ogldziny odizolowanej wioski]]</tw-passagedata><tw-passagedata pid="159" name="Rozejrzyj si" tags="" position="2700,8325" size="100,100">Poow wityni wypeniaj awy, ktre razem mogy zapewne pomieci ca populacj wioski. Twoj uwag przykuwa jednak druga poowa: wyoona dywanami, z postrzpionymi i brudnymi ju poduszkami. Czyby wioska dzielia si na dwie odrbne klasy spoeczne?

[if QuestCompanionScientistStage===2]
{companion_scientist_name} przyglda si wyoonej dywanami przestrzeni. Stwierdza, e nie bya przeznaczona dla ludzi. w tym miejscu demony zbieray si razem z ludmi.

{embed passage: &quot;TempleFloorMoreComments&quot;}
[continue]


[[Zbadaj co innego-&gt;Badanie wityni]]</tw-passagedata><tw-passagedata pid="160" name="Rozejrzyj si po leniczwce" tags="" position="1675,3400" size="100,100">Na pododze znajdujesz list, ktry wskazuje, e leniczy by dalekim kuzynem wjta. Moe warto bdzie [[zapyta wjta, czy sysza ostatnio od leniczego?-&gt;Chata wjta]]</tw-passagedata><tw-passagedata pid="161" name="Rozejrzyj si po okolicznych terenach" tags="" position="1950,2375" size="100,100">Wychodzisz z rynku, przed tob rozpociera si polana. W oddali widzisz okoliczny las.
Wr na [[Rynek]]

[[Id na polan]]

[[Id do lasu]]
[if clue_cave_location]
[[Udaj si do jaskini]]
[continue]</tw-passagedata><tw-passagedata pid="162" name="Rozejrzyj si po wiosce" tags="" position="2475,2325" size="100,100">Wioska jest maa, a w wietle ostatnich wydarze niewiele mieszkacw wychodzi poza swoje domy. Widzisz tylko par grupek ludzi wok - kobiety wydajce si o czym plotkowa i przejtych chopw siedzcych w somie.

[[Wr na rynek-&gt;Rynek]]

[[Przesuchaj chopw]]

[[Przesuchaj grup plotkujcych kobiet]]</tw-passagedata><tw-passagedata pid="163" name="Rozmowa z demonem i archeologiem" tags="" position="6050,3175" size="100,100">archeologist_alive: 1
--

Demon zauwaa ci i szykuje si do ataku. W ostatniej chwili dostrzegasz u niego moment zawahania. Demon zdaje si dostrzega co w tobie...

Nie atakuje ci, zamiast tego chwyta archeologa za kark i gbokim, gulgoczcym gosem stawia ci propozycj. Moesz pozwoli mu odej w pokoju, w zamian za co zostawi on archeologa.

Wyjania, e do obozu cigna go aktywno archeologw. Nie szuka z nimi zwady, jednak gdy chwycili za bro, musia si broni.

[[Pozwl Demonowi odej i uratuj archeologa]]
[[Zabij demona, powicajc ycie archeologa]]</tw-passagedata><tw-passagedata pid="164" name="Rozpocznij poszukiwania Bramy &quot;na lepo&quot;" tags="START-QUESTA" position="4200,8950" size="100,100">Oprcz znakw na demonicznym krgu nie masz wielu wskazwek za ktrymi moesz poda... 

[[Przebadaj runy z krgu jeszcze raz - moe co przeoczye]]</tw-passagedata><tw-passagedata pid="165" name="Runy nie dziaaj" tags="" position="3775,6000" size="100,100">Gdy prbujesz aktywowa jedn z run, tamta zaczyna iskrzy. Wyglda na to, e nic z tego nie bdzie.

[[Opu dom]]</tw-passagedata><tw-passagedata pid="166" name="Rynek" tags="" position="2475,2150" size="100,100">__sufficientvillageclues: attacked_village_clues&gt;=3
--
Rynek jest niewielki, stoi na nim par wozw z luksusowymi wg. chopw towarami. W oddali z niego wida chat wjta oraz koci. Na rynku stoi kilka grupek ludzi.

[[Udaj si do chaty wjta-&gt;Chata wjta]]

[[Rozejrzyj si po wiosce]]

[[Rozejrzyj si po okolicznych terenach]]

[if __sufficientvillageclues]
[[Zacznij tropi demona nkajcego wiosk]] - UWAGA! NIE BDZIESZ MG WRCI DO WIOSKI.

[continue]</tw-passagedata><tw-passagedata pid="167" name="Rzemielnikw" tags="" position="3725,1450" size="100,100">Inkwizycja brutalnie zabija wzystkich rzemielnikw. Czy to na pewno by dobry wybr?

[[AKT 1]]</tw-passagedata><tw-passagedata pid="168" name="Rzu si z broni na wyaniajcego si demona" tags="" position="4300,6300" size="100,100">standing_human: standing_human+20
standing_demon: standing_demon-20
--
Demon wydaje si oszoomiony. Wycigasz bro i ruszasz do walki, zanim wyrzdzi komu krzywd.

[[Zabij go-&gt;Demon ginie]]</tw-passagedata><tw-passagedata pid="169" name="SUGESTIE" tags="NOTATKA-TECHNICZNA" position="2900,6800" size="200,100">[todo]

ogolnie mysle ze fajnie by zrobic te sciezke z obozem jako osobny mini quest bo nie umiem zintegrowac go w aktualn

mozna dodac system ze trzeba zebrac iles poszlak zeby znalezc droge do portalu albo odblokowywac kolejne etapy poszukiwan

Onnod ma sidequest gdzie prosi zebys zostawil gate otwarty i mozna zrobic ze tylko jak masz jego to nie stanie sie krzywda jak go zostawisz

Onnod z zalozenia rozmawia z graczem sam na sam wiec towarzysze go nie widzieli

npc z inkwizycji ogolnie killuje demony nawet jak sie wahasz (passage &quot;wyania si demon&quot;)

scientist dalem ze moze badac te krgi i runy i dodaje ci to wicej poszlak ale idk co z tym zrobic

----------

wydaje mi sie ze companion scientist moze byc niezbednym elementem do questa dla Onnoda albo przynajmniej skracajacego go znaczco, np umozliwilby ci wziac sprawy w swoje rce i samemu robic research na temat odwracania demonow

zmodyfikowalem troche ten sidequest z Onnodem jesli chodzi o dialogi, teraz hintuje ze stara sie odwrocic dziczenie demonow

sciezka z demonem w chatce hintuje ze zdziczale demony tez przechodz stopniowo coraz bardziej obrzydliwe mutacje, mysle ze scientist moglby cos z tego wyciagnac

imo mozna zrobic ze corruption arc mozna przejsc w tym akcie i skonczyc gre wczesniej bo troche przeszlismy z typowego rpga troszeczke w taki puzzle game z naszymi interakcjami bo idk jak w tym momencie dodac pelnoprawna sciezke demonow

------------
zmienna QuestFindGateYourself ledzi postp szukania bramy bez pomocy Onnoda. 
pierwsz wskazwk do ruszenia w jej kierunku jest wyznaczenie zasigu poszukiwa, przez znalezienie nienaruszonego krgu</tw-passagedata><tw-passagedata pid="170" name="Samotna walka o Bram" tags="ROZGAZIONA-CIEKA" position="4400,11275" size="100,100">Walka jest duga i wyczerpujca.
[if CompanionScientist]
Uczony pad jako pierwszy. Tym razem wiedza teoretyczna nie wystarczya mu do pretrwania.
[continue]
[if CompanionInquisition]
Widzisz tylko grn poow twojego zastpcy. Dolnej nie ma nigdzie w pobliu, lub jest w trzewiach jednego z demonw ktrych zwoki pokrywaj cae twoje otoczenie.
[continue]
Jeli brama nie zostanie zaraz zamknita, wicej demonw niebawem doczy do walki.
[if StateDemonicInterest]
Twoje Wywyszenie czeka.

[[Dostp wywyszenia]]

[[Sprbuj zamkn bram. Za wszelk cen.]]</tw-passagedata><tw-passagedata pid="171" name="Schowaj si i obserwuj" tags="" position="5050,3675" size="100,100">GlobalClueDemonRuins: GlobalClueDemonRuins+1
standing_demon: standing_demon+20
--
Obserwujesz jak duy demon zabija i zjada chopw, za mae demony dobijaj rannych i rozszarpuj ich na strzpki. Obok ciebie, dr Holms zwraca zawarto odka. Po kilku ducych si chwilach, makabryczne sceny dobiegaj koca, a demony poczwszy od najwikszego znikaj w lesie.

wychodzicie z kryjwki i dr Holms objania, e nieoczekiwanie udowodnilicie fragment jego teorii, ktrego nie miaby sprawdzi eksperymentalnie: gd najwikszych demonw mog zaspokoi wycznie istoty ludzkie.

Ta wiedza moe ci pomc zlokalizowa demoniczne ruiny: miejsce poszukiwa musi by w pobliu siedlisk ludzkich.

[[Wr do holu Akademii]]</tw-passagedata><tw-passagedata pid="172" name="ScientistCompanionAlive" tags="" position="5000,2300" size="100,100">QuestCompanionScientistStage: 2
standing_human: standing_human+5
--</tw-passagedata><tw-passagedata pid="173" name="ScientistCompanionExpired" tags="" position="5275,2900" size="100,100">QuestCompanionScientistStage: 1
--</tw-passagedata><tw-passagedata pid="174" name="ScientistCompanionRecruited" tags="" position="5000,2175" size="100,100">CompanionScientist: true
--</tw-passagedata><tw-passagedata pid="175" name="ScientistCompanionTooLate" tags="" position="5000,2425" size="100,100">QuestCompanionScientistStage: 1
standing_demon: standing_demon+5
--</tw-passagedata><tw-passagedata pid="176" name="Sen" tags="" position="3900,8350" size="100,100">Act2Day: 2
--
[if __BothPlayableCompanions]
Ty i twoi towarzysze idziecie spa po dugim dniu.
[continue]

[if __OnlyScientist]
Wraz z twoim towarzyszem kadziesz si spa po dugim dniu.
[continue]

[if __OnlyInquisition]
Wraz z twoim towarzyszem kadziesz si spa po dugim dniu.
[continue]

[if !__AnyPlayableCompanions]
Kadziesz si spa po dugim dniu.
[continue]

[if standing_demon &lt; 50]
[[Kontynuuj-&gt;Przebudzenie]]
[else]
[[Kontynuuj-&gt;Nocne odwiedziny]]</tw-passagedata><tw-passagedata pid="177" name="Sprbuj by &quot;dobrym glin&quot;" tags="" position="2700,2750" size="100,100">interrogation_gossiping_women: true
knows_about_scared_peasant: true
--
Kobiety opowiadaj ci niechtnie, jednak wycigasz od nich potencjalnie kluczow informacj: ostatnio, gdy jeden z chopw poszed ci drzewo na opa potkn si o zjedzonego w poowie trupa mczyzny.

Ju raczej si nic od nich nie dowiesz, pozostaje tylko [[rozglda si dalej-&gt;Rozejrzyj si po wiosce]].</tw-passagedata><tw-passagedata pid="178" name="Sprbuj je przekupi" tags="" position="3000,2750" size="100,100">interrogation_gossiping_women: true
--
Kobiety odrzucaj twoj apwk i nie chc z tob dalej rozmawia.

Ju raczej si nic od nich nie dowiesz, pozostaje tylko [[rozglda si dalej-&gt;Rozejrzyj si po wiosce]].</tw-passagedata><tw-passagedata pid="179" name="Sprbuj zamkn bram. Za wszelk cen." tags="" position="4375,11425" size="100,100">Piecz runiczna trzyma bram otwart. Wycigasz bro i uderzasz j raz za razem. W kocu piecz przeamuje si.

Czujesz ulg i satysfakcj. Nie trwaj one jednak dugo: piecz zaczyna si wieci coraz janiej krwawo czerwonym wiatem.

Blask czerwonego wiata. Huk. Nage szarpnicie. Gorc. To ostatnie rzeczy ktrych dowiadczasz w swoim yciu.

[[ENDING 5]]</tw-passagedata><tw-passagedata pid="180" name="StageSearchedTemple" tags="TECHNICZNE" position="3450,8650" size="100,100">[if QuestCompanionScientistStage===3]
On komentuje tylko, e to wystarcza mu jako dowd, e kooperacja z demonami jest moliwa.
[continue]

[if CompanionInqusition]
Prosi o zachowanie waszego znaleziska w tajemnicy przed twoim zastpc.
[continue]

[if Act1Day===1]
Obaj stracilicie ju apetyt.
[continue]</tw-passagedata><tw-passagedata pid="181" name="Studium Historii Demonologicznej" tags="" position="5650,2575" size="100,100">QuestDemonologyStage: 1
--
Wita ci badaczka, dr Rood. Wok krc si inni uczeni, ktrych przedstawia jako swj zesp. S archeologami badajcymi ruiny staroytnych miejsc kultu. Chce zaprezentowa ci wyniki swoich bada, jednak w pierwszej kolejnoci prosi o pomoc. 

[[Zapytaj w czym potrzebuje pomocy]]</tw-passagedata><tw-passagedata pid="182" name="Stj i czekaj na wyonienie si demona" tags="" position="4600,6300" size="100,100">Demon wychodzi z krgu na twoich oczach. Od razu gdy ci zauwaa zaczyna i w twoj stron...

[[Przygotuj si do walki-&gt;Demon ginie]]

[[Czekaj dalej-&gt;Demon mutuje]]</tw-passagedata><tw-passagedata pid="183" name="Szukaj Bramy na podstawie wskazwek z raportu" tags="START-QUESTA" position="3575,9525" size="100,100">Raport przeoonego, po bliszej inspekcji zawiera par wskazwek ktre napisane s szyfrem zrozumiaym tylko dla wtajemniczonych, aka. Inkwizytorw. Bez problemu udaje ci si rozczyta w jego kodzie, co pozwala ci na sporzdzenie mapy.

[[Udaj si w podr do bramy-&gt;Obz - Dzie 5]]</tw-passagedata><tw-passagedata pid="184" name="Szykuj si do walki. Od Bramy dzieli was jej bez miary" tags="ROZGAZIONA-CIEKA" position="4100,10900" size="100,100">[if StateInquisitionNotified]
Wtem, dobiega ci znajomy dwik. Powietrze przeszywa ryk rogw owieckich Inkwizycji. Z lasu za twoimi plecami wyania si {faction_mentor_inquisition}. Salutuje ci, i gratuluje wykonania zadania. Teraz zostaje ju tylko jedno: dokoczy to co zaczlicie.

[[Walka o Bram po stronie inkwizycji]]
[continue]
[if InqNotifiedInSecret]
Wtem, dobiega ci znajomy dwik. Powietrze przeszywa ryk rogw owieckich Inkwizycji. Z lasu za twoimi plecami wyania si {faction_mentor_inquisition}.
Salutujesz mu, jednak od uderza ci w brzuch, a dwch jego przybocznych apie ci i rozbraja. Twj zastpca salutuje mu i staje u jego boku. 

Twoja nieautoryzowana aktywno nie usza uwadze Inkwizycji, dziki inicjatywie twojego zastpcy. Donis on przeoonym o twoich poczynaniach.
{embed passage: &quot;PowerWithin&quot;}
[continue]
[if !StateInquisitionNotified &amp;&amp; !InqNotifiedInSecret]
{embed passage: &quot;Samotna walka o Bram&quot;}
[continue]</tw-passagedata><tw-passagedata pid="185" name="Suchaj cienistej postaci" tags="" position="4250,8325" size="100,100">Posta przedstawia si jako {faction_mentor_demon}. Wyraa podziw dla twoich dokona, ktre obserwowa z wielk nadziej. Mwi, e jest dawno zapomnianym bogiem ktry kontaktuje si z tob z Drugiego wiata.

Ostrzega ci, e Inkwizycja zataia przed tob kluczowe informacje o twojej rzeczywistoci. By moe, Inkwizycja sama zapomniaa ju, co prbowaa zatai.

Chce podzieli si z tob ukryt wiedz, jeli zechcesz go wysucha. Jeli nie, obudzisz si w obozie i nie bdziesz mia drugiej okazji.

[[Podzikuj i wr do spania-&gt;Przebudzenie]]
[[Wysuchaj cienistego demona]]</tw-passagedata><tw-passagedata pid="186" name="TempleFloorMoreComments" tags="TECHNICZNE" position="2525,8325" size="100,100">QuestCompanionScientistStage: 3
--
[if background=== &quot;cultist&quot;]
W kadej wityni kultystw jak odwiedzie miejsce demonw byo przy otarzu, nie pord tych, ktrzy oddawali im cze.
[continue]
[if background=== &quot;recruit&quot;]
W kadej wityni kultystw jak spalie miejsce demonw byo przy otarzu, nie pord heretykw, ktrzy oddawali im cze.
[continue]
[if background=== &quot;drafted&quot;]
Syszae, e kultyci oddaj demonom cze jak wyszym istotom. Czemu wic w tej wityni znajdoway si na rwni z ludmi?
[continue]
[if CompanionDemon]
Wyglda na to e demony przebyway w tej wityni na rwni z ludmi. Wsppraca na rzecz bezkrwawego pokoju.</tw-passagedata><tw-passagedata pid="187" name="U Bram Drugiego wiata" tags="ROZGAZIONA-CIEKA" position="3950,10725" size="100,100">Po godzinie marszu twoim oczom ukazuje si Brama. Ogromna kamienna pyta pokryta runami, ktrej wiksz cz pokrywa runiczny krg przypominajcy mniejsze krgi przyzwania z ktrymi si spotkae. Bram otaczaj liczne zmutowane demony.

[if QuestOnnod]
Nieoczekiwanie Onnod pojawia si obok ciebie.
[continue]
[if CompanionInquisition]
Twj zastpca przyjmuj postaw gotowoci do walki.
[continue]


[if QuestOnnod]
[[Docz do niego]]

[[Zdrad go, i zabij razem z twoim zastpc]]
[else]
[[Szykuj si do walki. Od Bramy dzieli was jej bez miary]]</tw-passagedata><tw-passagedata pid="188" name="Ucieczka od konfrontacji z pomniejszymi demonami" tags="" position="2625,1650" size="100,100">[[Wycofujesz si-&gt;Powrt do wozu:poraka]] z konfrontacji. Jest niewarta twojego czasu.</tw-passagedata><tw-passagedata pid="189" name="Uczony gotuje" tags="" position="3925,7875" size="100,100">Uczony zabiera si do gotowania. Wyciga ze swojej torby zestaw ostrych narzdzi, ktre zwodniczo przypominaj implementy do bada naukowych...

Na twoich oczach naukowiec przygotowuje danie, ktre wyglda niebiasko w porwnaniu do czegokolwiek co jade przez ostatnie par miesicy. Sam zapach sprawia, e nie moesz myle o niczym innym ni jedzeniu.

[if CompanionInquisition]
Zerkasz na swojego podwadnego. Podobnie do ciebie jest zafascynowany technik naukowca. W kompletnej ciszy obserwujecie mistrzowskie przygotowywanie dania.

Naukowiec prezentuje wam potrawk z krlika, ktra wietnie odnalazaby si nawet na Krlewskim stole. Zaraz potem wszyscy trzej zasiadacie do stou...

To jest chyba najlepsza potrawa jak kiedykolwiek jedlicie.

[[Posprztaj i po si spa -&gt;Sen]]

[else]

Naukowiec prezentuje ci potrawk z krlika, ktra wietnie odnalazaby si nawet na Krlewskim stole. Zaraz potem obaj zasiadacie do stou...

To jest chyba najlepsza potrawa jak kiedykolwiek jade.

[[Posprztaj i po si spa -&gt;Sen]]</tw-passagedata><tw-passagedata pid="190" name="Udaj si do Akademii" tags="" position="5650,2375" size="100,100">QuestLabElapsedTime: 0
--
W holu wita ci przyguchy odwierny, i prosi o zachowanie ciszy poniewa w budynku prowadzone s badania. Hol jest opustoszay - studenci maj przerw od zaj w zwizku z wakacyjn przerw. 

Moesz poprosi odwiernego aby wskaza ci drog do wybranego miejsca.
[if QuestCompanionScientistStage!=2]
[[Udaj si do mieszkania uczonego]]
[continue]
[if QuestCompanionScientistStage===2]
[[Laboratorium podejrzanego profesora]]
[continue]
[if QuestAlchemyStage===0]
[[Laboratorium Alchemiczne]]
[continue]
[if QuestAlchemyStage===1]
[[Id pomc dr Holmsowi w eksperymencie]]
[continue]
[if QuestDemonologyStage===0]
[[Studium Historii Demonologicznej]]
[continue]
[if QuestDemonologyStage===1]
[[Id pomc dr Rood uratowa archeologw]]
[continue]</tw-passagedata><tw-passagedata pid="191" name="Udaj si do Krlewskiej Akademii" tags="START-QUESTA" position="5650,2075" size="100,100">companion_name_scientist: &quot;Pablo Ivette&quot;
QuestCompanionScientistStage: 0
QuestAlchemyStage: 0
QuestDemonologyStage: 0
--
Przybywasz do {capitalcity}, duego miasta w ktrym mieci si Krlewska Akademia. Pokazujesz stranikom u bram piecz Inkwizycji, a oni wskazuj ci drog. Akademi nietrudno jest znale - ogromny gmach Wydziau Demonologii gruje nawet nad wysok, wielkomiejsk zabudow.

Na placu przed Akademi zatrzymuje ci czowiek, z wygldu uczony. Przedstawia si jako {companion_name_scientist}. Informuje ci, e potrzebuje pomocy Inkwizycji.

[[Zapytaj czowieka z czym potrzebuje pomocy]] lub
zignoruj go, i [[Udaj si do Akademii]]</tw-passagedata><tw-passagedata pid="192" name="Udaj si do jaskini" tags="" position="1250,2175" size="100,100">Docierasz do jaskini ukrytej w pobliu okolicznego lasu. Dochodzi z niej nieprzyjemny zapach.

[[Wejd do rodka-&gt;Jaskinia]]

[[Wycofaj si-&gt;Rozejrzyj si po okolicznych terenach]]</tw-passagedata><tw-passagedata pid="193" name="Udaj si do mieszkania uczonego" tags="" position="5250,2275" size="100,100">[if QuestCompanionScientistStage === 0]
Mczyzna dzikuje ci za wysuchanie jego proby. Wyjania, e studiuje Demonologi Stosowan i podejrzewa jednego ze swoich wykadowcw o nielegalne przywoywanie demonw. 

Niestety, gdy prbowa wkra si do laboratorium by zebra dowody, jego obecno zostaa zauwaona, i obawia si e wspomniany profesor mg go rozpozna. {companion_name_scientist} nie mia nigdy do czynienia z prawdziwymi kultystami ani demonami, ale wierzy, e jego ycie jest zagroone. 

Prosi ci o zebranie dowodw, jednak zaleca dyskrecj i nienaduywanie autorytetu Inkwizycji. Obecno inkwizytora mogaby sposzy profesora, a potencjalne dowody mogyby osta zniszczone.
{embed passage: &quot;ScientistCompanionAlive&quot;}
[[Udaj si do Akademii]]
[continue]
[if QuestCompanionScientistStage === 1]
Przed drzwiami do mieszkania uczonego stoj stranicy miejscy. Przez uchylone drzwi zauwaasz plamy krwi na cianach i pododze pokoju, oraz inne lady walki. 
Najbliszy stranik tumaczy e uczony zosta zabity przez przyzwanego przez siebie demona. Oznajmia, e Inkwizycja zostanie zawiadomiona najszybciej jak to moliwe, i wraca do pisania protokou.
{embed passage: &quot;ScientistCompanionTooLate&quot;}
[[Wr do holu Akademii]]
[continue]

[if QuestCompanionScientistStage === 3]
{companion_name_scientist} dzikuje ci za szybk pomoc. W podzice za uratowanie mu ycia oferuje wyruszenie z tob w dalsz podr, aby mc wesprze ci swoj wiedz o demonach.
{embed passage: &quot;ScientistCompanionRecruited&quot;}
[[Udaj si do Akademii]]
[continue]


[if QuestCompanionScientistStage === 4]
{companion_name_scientist} dzikuje ci za pomoc. Wspomina, e obawia si e ju po tobie. W podzice za uratowanie mu ycia oferuje wyruszenie z tob w dalsz podr, aby mc wesprze ci swoj wiedz o demonach.
{embed passage: &quot;ScientistCompanionRecruited&quot;}
[[Wr do holu Akademii]]
[continue]</tw-passagedata><tw-passagedata pid="194" name="Udaj si do obozu badawczego" tags="" position="4950,3075" size="100,100">QuestAlchemyStage: 2
--
[if QuestCompanionScientistStage === 0]
{embed passage: &quot;ScientistCompanionExpired&quot;}
[continue]

Po rozoeniu obozu, dr Holms zaczyna eksperyment. Ze szczelnie zabezpieczonego pojemnika wyciga... kilka bochenkw chleba. Objania, e wedug jego teorii, mae demony s przycigane przez przygotowane przez ludzi jedzenie.

Zostawia chleb na rodku polany, i chowa si z tob w przygotowanej kryjwce. Po chwili, pojawiaj si demony niewielkich rozmiarw, i po chwili wszenia zaczynaj paaszowa chleb.

[[Pozwl demonom zje chleb]]
[[Zabij demony, podczas gdy s zajte chlebem]]</tw-passagedata><tw-passagedata pid="195" name="Udaj si do wioski bdcej miejscem czstych atakw demonw" tags="START-QUESTA" position="3550,1925" size="100,100">QuestOnnodDemonBountyStage: 0
--
Droga do wioski nie jest zbytnio interesujca. Wok ciebie cign si naprzemiennie lasy i polany, a w miar zbliania si do wioski polany i pola.

W pewnym momencie przechodzi ci jednak dreszcz. Masz poczucie e jeste obserwowany...

[[Popro wonic o zatrzymanie si-&gt;Zatrzymaj si i id za przeczuciem]]

[[Jed dalej-&gt;Docierasz do wioski]]</tw-passagedata><tw-passagedata pid="196" name="Udaj si do wykopalisk archeologicznych" tags="" position="5650,2975" size="100,100">QuestDemonologyStage: 2
archeologist_alive: 1
--
[if QuestCompanionScientistStage === 0]
{embed passage: &quot;ScientistCompanionExpired&quot;}
[continue]
Gdy zbliasz si do obozu znajdujesz zwoki mczyzny zjedzonego przez demony, ktrego stan nie pozwala na dokadniejsz identyfikacj. Pospiesznie udajesz si do centrum obozu.

Spalone resztki namiotw przygasaj ju, a u stp ogromnego demona zauwaasz szcztki archeologw. Tylko jeden mczyzna wykazuje oznaki ycia, jednak z rany na jego gowie sczy si krew. Wydaje si nie w peni wiadom swojego otoczenia.

[[Natychmiast Zaatakuj Demona]]
[[Podejd z wycignit broni, zwracajc na siebie uwag]]</tw-passagedata><tw-passagedata pid="197" name="Uratuj chopw" tags="" position="4850,3675" size="100,100">GlobalClueDemonRuins: GlobalClueDemonRuins+1
standing_human: standing_human+20
--
Po trudnej walce ledwie garstka chopw uchodzi z yciem, i dzikuje ci za pomoc.

Dr Holms wychodzi z kryjwki i objania, e nieoczekiwanie udowodnilicie fragment jego teorii, ktrego nie miaby sprawdzi eksperymentalnie: gd najwikszych demonw mog zaspokoi wycznie istoty ludzkie.

Ta wiedza moe ci pomc zlokalizowa demoniczne ruiny: miejsce poszukiwa musi by w pobliu siedlisk ludzkich.

[[Wr do holu Akademii]]</tw-passagedata><tw-passagedata pid="198" name="Walka o Bram po stronie inkwizycji" tags="" position="4175,11275" size="100,100">Wycinasz sobie droge do Bramy przez hordy demonw. W bitwie pada wikszo inkwizytorw.

Gdy docierasz do bramy twj przeoony zatrzymuje ci. Brama jest zapieczetowana, a rozwalenie pieczci zabije kadego w pobliu. Kae ci zabra ocalaych na bezpieczn odlego. Chce si powici, gdy to samo przed laty zrobi jego najlepszy przyjaciel by zamkn t sam bram. To dla niego sprawa osobista. 

Z umiechem dzikuje ci za wasz wspln prac. Jest z ciebie dumny i liczy na to e go zastpisz.

{companion_name_inquisition} salutuje mu, a nastpnie daje ci znak, e powinnicie si pospieszy. Jasny rozbysk wiata i rozrywajcy powetrze huk sygnalizuj ci, e Brama zostaa zamknita.


[[ENDING 2.2]]</tw-passagedata><tw-passagedata pid="199" name="Walka po stronie Inkwizycji" tags="" position="3725,11275" size="100,100">Wycinasz sobie droge do Bramy przez hordy demonw. W bitwie pada wikszo inkwizytorw.

Gdy docierasz do bramy twj przeoony zatrzymuje ci. Brama jest zapieczetowana, a rozwalenie pieczci zabije kadego w pobliu. Sygnalizuje twojemu byemu zastpcy aby zabra ocalaych na bezpieczn odlego. Chce si powici, gdy to samo przed laty zrobi jego najlepszy przyjaciel by zamkn t sam bram. To dla niego sprawa osobista.

{companion_name_inquisition} zakuwa ci w kajdany i odciga na bezpieczn odlego. Jasny rozbysk wiata i rozrywajcy powetrze huk sygnalizuj ci, e Brama zostaa zamknita.

[[ENDING 2.1]]</tw-passagedata><tw-passagedata pid="200" name="Wejd do kryjwki" tags="START-QUESTA" position="1900,3400" size="100,100">Kryjwka demona jest usiana runami. Jama, w ktrej owa si znajduje jest wiksza od wewntrz ni moe si wydawa. Z gbi jamy dobiega cichy jk.

Chwil po twoim wejciu w jamie robi si kompletnie ciemno, mimo e nie ruszye si z miejsca. Jedyne owietlenie to cienne runy.

[[Id w stron rda dwiku]]

[[Wycofaj si]]</tw-passagedata><tw-passagedata pid="201" name="Wejd do lasu" tags="" position="2975,1475" size="100,100">Zostawiasz wonic na drodze i sam wyruszasz wgb lasu. Mczyzna musi by cakiem zdezorientowany twoj decyzj.

Nagle co przebiega midzy drzewami.

[[Wr si]]

[[Podaj za tajemnicz figur]]</tw-passagedata><tw-passagedata pid="202" name="Wprowadzenie + Kreacja postaci" tags="" position="3800,0" size="200,200">faction_mentor_inquisition: &quot;Antonio Michel&quot;
act1villagename: &quot;Monte Valdetta&quot;
--
Od lat na wiecie panuje wojna z potworami ktre ludzie nazywaj &quot;demonami&quot;. Jako mieszkaniec jednego z miast Imperium wstpujesz w szeregi Inkwizycji. [[Dlaczego doczye do inkwizycji?-&gt;wybr backgroundu]]

[note]
probly doda opnienia?
https://klembot.github.io/chapbook/guide/modifiers-and-inserts/delayed-text.html</tw-passagedata><tw-passagedata pid="203" name="Wr do holu Akademii" tags="" position="5650,3975" size="100,100">QuestAcademyComplete: true
--
[if QuestCompanionScientistStage===3]
{embed passage: &quot;CompanionScientistDelayReward&quot;}
[continue]
W holu raz jeszcze wita ci przyguchy odwierny, i informuje e w budynku obecnie nie ma innych poszukiwnych przez ciebie uczonych. Wszyscy prowadz aktualnie badania polowe.
[[Id do centrum dziaa]]
[[Udaj si do mieszkania uczonego]]</tw-passagedata><tw-passagedata pid="204" name="Wr do obozu" tags="START-QUESTA ROZGAZIONA-CIEKA" position="3850,6775" size="200,200">[if QuestCompanionInquisitionStage===1]
Twj zastpca prosi ci o chwil twojego czasu.
[[Podejd do twojego zastpcy-&gt;Konwersacja z zastpc w obozie]]
[continue]

[if QuestCompanionScientistStage===1]
[[Powiedz uczonemu, co si stao po aktywacji run, ktre znalelicie-&gt;Konwersacja o runach]]
[continue]

[[Po si spa i kontynuuj ledztwo jutro -&gt; Noc w obozie]]</tw-passagedata><tw-passagedata pid="205" name="Wr si" tags="FAIL-QUESTA" position="3100,1725" size="100,100">Rozgldasz si chwil wok siebie, jednak nie zauwaasz niczego co zwrcioby twoj uwag. Twoje przeczucie musiao by bdne - zdarza si najlepszym. 

Wracasz na wz i kontynuujesz jazd, po czym [[docierasz do wioski-&gt;Docierasz do wioski]].</tw-passagedata><tw-passagedata pid="206" name="Wstrzymaj si przed jedzeniem" tags="" position="4125,7875" size="100,100">[if __BothPlayableCompanions]
Ty i twoi towarzysze patrzycie na talerze w martwej ciszy. Wyglda na to, e pjdziecie spa godni...
[continue]

[if __OnlyScientist]
Ty i towarzyszcy tobie naukowiec patrzycie na talerze w martwej ciszy. Wyglda na to, e pjdziecie spa godni...
[continue]

[if __OnlyInquisition]
Ty i towarzyszcy tobie Inkwizytor patrzycie na talerze w martwej ciszy. Wyglda na to, e pjdziecie spa godni...
[continue]

[If !__AnyPlayableCompanions]
Patrzysz na talerz w martwej ciszy. Wyglda na to, e pjdziesz spa godny...
[continue]

[[Po si spa-&gt;Sen]]</tw-passagedata><tw-passagedata pid="207" name="Wstrzymaj si przed zabijaniem demona" tags="" position="4450,6300" size="100,100">standing_human: standing_human-5
--
Wahasz si w rozprawianiu si z demonem, jednak towarzyszcy ci Inkwizytor wyrcza ci i atakuje demona za ciebie.

[[Wesprzyj go w walce-&gt;Demon ginie]]</tw-passagedata><tw-passagedata pid="208" name="Wycofaj si" tags="" position="2025,3525" size="100,100">Droga powrotna zostaa zablokowana przez lit ska.

[[Moesz tylko prze przed siebie-&gt;Wejd do kryjwki]]</tw-passagedata><tw-passagedata pid="209" name="Wyjcie z wielkiego drzewa" tags="" position="1075,3400" size="100,100">Stajesz przed wyjciem z pomieszczenia, w ktrym si znajdowae. Przy wietle z zewntrz orientujesz si, e jeste w gigantycznej dziupli. Okazuje si, e znajdujesz si w wielkim drzewie w centrum okolicznego lasu.

[[Zejd z drzewa-&gt;Las2-2]]</tw-passagedata><tw-passagedata pid="210" name="Wyprawa do wityni" tags="" position="3600,8275" size="100,100">[if CompanionInquisition]
Uczony dyskretnie przekazuje ci notatk, ktra mwi e znalaz w lesie co bardzo przydatnego dla ledztwa...
[else]
Uczony opowiada tobie o wityni, ktr znalaz w lesie. Mwi e jest ona ladem funkcjonujcej cywilizacji skadajcej si z ludzi i demonw...
[continue]

[[Pjd za uczonym]]</tw-passagedata><tw-passagedata pid="211" name="Wyra zainteresowanie badaniami" tags="" position="4850,2875" size="100,100">Dr Holmsowi brakuje rk do pracy z powodu przerwy wakacyjnej, a potrzebuje asystenta do bada polowych. Byby zaszczycony gdyby Inkwizytor dotrzyma mu towarzystwa, gdy bdzie demonstrowa metod eksperymentaln prawdziwo swojej teorii.

Ostrzega jednak, e badania s prowadzone w oddalonym od miasta obozie badawczym, wic wyprawa do niego potrwa kilka dni podczas ktrych nie moesz sam wrci do Akademii. Nie moe te czeka na ciebie duej ni dwa dni, po ktrych wynajmie najemnika do ochrony, i sprbuje sam przeprowadzi badania.

[[Udaj si do obozu badawczego]]
[[Udaj si do Akademii]]</tw-passagedata><tw-passagedata pid="212" name="Wyrusz do Bramy" tags="START-QUESTA PUNKT-BEZ-POWROTU" position="3900,10075" size="200,200">UWAGA - TA MISJA JEST PUNKTEM BEZ POWROTU.

Czy jeste gotowy aby wyruszy na poszukiwanie Bramy?

[[Jestem gotowy]]

[[Nie jestem gotowy-&gt;Obz - Dzie 5]]</tw-passagedata><tw-passagedata pid="213" name="Wysuchaj cienistego demona" tags="" position="4425,8325" size="100,100">StateDemonicInterest: true
--
Demon mwi, e wikszo ludzi zapomiaa ju, e wiat w ktrym yj jest podporzdkowany rzeczywistoci bogw, do ktrej najlepsi spord ludzi zostawali Wywyszeni. Ludzie porzucili jednak sw star wiar, wic bogowie odpowiedieli si. Nie mogli pozwoli na zaprzestanie ich czci, gdy jest im ona niezbdna do ycia.

Ludzie nie zrozumieli jednak komunikatu bogw. Okrzyknli ich demonami, i rozpoczli walk z ich osabionymi wcieleniami. Powstaa Inkwizycja.

Ty jednak masz okazj zaprowadzi pokj w tym krwawym konflikcie.

[[Kontynuuj-&gt;Plan cienistego demona]]</tw-passagedata><tw-passagedata pid="214" name="Wysuchaj propozycji" tags="ROZGAZIONA-CIEKA" position="750,3375" size="100,100">Onnod Nuur prosi ci o to, eby przyprowadzi okolicznego oszalaego demona do niego ywcem. Mwi, e rozumie jeli mu nie ufasz, jednak oferuje ci &quot;co, co bardzo moe ci si przyda w przyszoci&quot;.

[[Zaakceptuj prob]]
[[Odrzu prob]]
[[Rzu si na demona z broni-&gt;Zaatakuj demona weganina]]</tw-passagedata><tw-passagedata pid="215" name="Wysuchaj proby Onnoda" tags="START-QUESTA ROZGAZIONA-CIEKA" position="3075,6350" size="100,100">Onnod oznajmia, e gdy odnajdziesz portal nie powiniene go zamyka. Obiecuje, e zadba o bezpieczestwo okolicy i zamknie go sam, gdy bdzie to konieczne.

[[Zaakceptuj prob Onnoda]]

[[Odrzu prob Onnoda]]

[[Zabij Onnoda]]</tw-passagedata><tw-passagedata pid="216" name="Wyania si demon" tags="START-QUESTA ROZGAZIONA-CIEKA" position="4450,6175" size="100,100">Z krgu zaczyna wyania si demon - jego sylwetka przypomina w pewien sposb sylwetk demona z wioski...

[[Rzu si z broni na wyaniajcego si demona]]

[if !CompanionInquisition]
[[Stj i czekaj na wyonienie si demona]]

[else]
[[Wstrzymaj si przed zabijaniem demona]]</tw-passagedata><tw-passagedata pid="217" name="Zaakceptuj prob" tags="START-QUESTA" position="625,3500" size="100,100">quest_vegan_demon_accepted: true
--
Demon dzikuje ci za wyrozumiao i yczy powodzenia w prbach pojmania demona. Swoj niemono pomocy tumaczy obecnoci ludzi w okolicach oraz &quot;oczami lasu&quot;. 

Po krtkiej rozmowie demon pokazuje ci wyjcie.

[[Kontynuuj-&gt;Wyjcie z wielkiego drzewa]]</tw-passagedata><tw-passagedata pid="218" name="Zaakceptuj prob Onnoda" tags="START-QUESTA" position="3075,6525" size="100,100">QuestOnnod: true
--
Przyjmujesz prob Onnoda.

Onnod dzikuje ci za przyjcie jego proby i odsya ci z powrotem do domu. Tu przed utraceniem przytomnoci syszysz, jak mwi e skontaktuje si z tob w odpowiednim czasie...

[[Kontynuuj-&gt;Dezaktywacja run]]</tw-passagedata><tw-passagedata pid="219" name="Zaatakuj demona weganina" tags="FAIL-QUESTA" position="1000,3250" size="100,100">standing_human: standing_human+15
standing_demon: standing_demon-15
attacked_village_vegan_demon_corpse: true
--
Zabijasz tajemnicz posta - by to najprawdopodobniej jeden z demonw wywoujcych problemy w wiosce.

Zabierasz gow demona jako dowd spenionego zadania. Moe wjt ci za ni wynagrodzi?
{embed passage: &quot;OnnodDemonDead&quot;}

[[Poszukaj wyjcia-&gt;Wyjcie z wielkiego drzewa]]</tw-passagedata><tw-passagedata pid="220" name="Zaatakuj profesora i jego demona" tags="" position="6550,3200" size="100,100">Profesor ley martwy na pododze laboratorium. Czas powiadomi patrol Inkwizycji oraz wadze uczelni. Nastpnie powiniene uda si do mieszkania uczonego.

[[Udaj si do Akademii]]</tw-passagedata><tw-passagedata pid="221" name="Zabij Onnoda" tags="FAIL-QUESTA" position="2900,6525" size="100,100">standing_human: standing_human+15
--
Zabijasz Onnoda.

Zostajesz gwatownie odesany do domu z ktrego si przeniose...

[[Kontynuuj-&gt;Dezaktywacja run]]</tw-passagedata><tw-passagedata pid="222" name="Zabij demona" tags="FAIL-QUESTA" position="1600,4000" size="100,100">standing_human:standing_human+10
attacked_village_demon_killed:true
--
Caa ta sytuacja wyglda jak puapka - decydujesz si zabi demona, ktry stawia silny opr. Ledwo uchodzisz z yciem. 

Bierzesz jego gow jako trofeum.

[[Wr do wjta-&gt;Ostatnia konwersacja z wjtem]]</tw-passagedata><tw-passagedata pid="223" name="Zabij demona, powicajc ycie archeologa" tags="" position="6150,3375" size="100,100">archeologist_alive: 0
standing_human: standing_human+20
standing_demon: standing_demon-10
--
Po dugiej walce przeszukujesz ciao mczyzny. Znajdujesz nadszarpnity przez demona dziennik bada. Opisuje on ewidentne lady oddawania czci jakim wyszym istotom przez okolicznych mieszkacw. Znaleli te wyryte na tablicach opisy wykorzystywanych w tym celu rytuaw.

Wszystko wskazuje na to e archeolodzy prbowali bez wiedzy dr Rood odtworzy taki rytua, co jednak zwrcio uwag pobliskich demonw.

[[Zastanw si, czego si dowiedzie]]</tw-passagedata><tw-passagedata pid="224" name="Zabij demony, podczas gdy s zajte chlebem" tags="" position="5050,3275" size="100,100">standing_human: standing_human+5
--

Po krtkiej walce nie ma ju ani ladu po maych demonach. Dr Holms wspomina, e wolaby by nie interweniowa, ale eksperyment jak na razie przebiega pomylnie.

Prosi ci o pomoc w przeniesieniu skrzy z wozu na rodek polany. Znasz ich zawarto jeszcze zanim zostaj otwarte - z otworw dochodzi ci zapach zwierzt hodowlanych. W istocie, po otwarciu skrzy twoim oczom ukazuj si mae kozy. ywe, ale pod wpywem zakl uspokajajcych dla atwego transportu.

Ich obecno przyciga na polan demony rozmiarw czowieka, ktre rzucaj si na swoje ofiary. Te, wci pod wpywem zaklc nie s w stanie stawia oporu, a jedynie wydaj z siebie odgosy blu.

Dr Holms zwraca twoj uwag na mniejsze demony, ktre kr wok duych szukajc resztek aby si poywi. ywe istoty s dla nich najwyraniej okazjonalnym rarytasem.

[[Pozwl demonom zje kozy]]
[[Zabij demony, podczas gdy s zajte kozami]]</tw-passagedata><tw-passagedata pid="225" name="Zabij demony, podczas gdy s zajte kozami" tags="" position="5050,3475" size="100,100">standing_human: standing_human+5
--

Nie zostawiasz adnego demona przy yciu. Dr Holms wyraa dezaprobat z powodu interweniowania w eksperyment, ale nie wydaje si te bardzo przejty. Uwaa eksperyment za sukces, i chce przedyskutowa wyniki.

Zanim zda co powiedzie, na polanie pojawia si grupa chopw z prowizorycznym uzbrojeniem. Najwyraniej kto zauway obecno demonw i powiadomi poblisk wiosk.

Nagle z lasu wychodzi ogromny, wygodniay demon i rzuca si na chopw, ktrzy rozbiegaj si w panice. Mniejsze rodzaje demonw, rzucaj si na rannych.

[[Uratuj chopw]]
[[Schowaj si i obserwuj]]</tw-passagedata><tw-passagedata pid="226" name="Zabro mu kontaktu z dowdztwem" tags="" position="3800,7100" size="100,100">QuestCompanionInquisitionStage: 2
--
[if standing_human&gt;50]
Twj zastpca jest zaskoczony, ale ufa, e wiesz co robisz.
[else]
Twj zastpca jest zaskoczony, ale szybko prostuje si i bez sowa salutuje ci.
{embed passage: &quot;InquisitionNotified&quot;}
{embed passage: &quot;NotifiedInSecret&quot;}
[continue]

[[Zakocz konwersacj-&gt;Wr do obozu]]</tw-passagedata><tw-passagedata pid="227" name="Zaczerpnij boskiej mocy" tags="" position="3950,11275" size="100,100">Przestajesz sysze gosy ludzi wok siebie. Niebo ciemnieje, a kolory znikaj w cieniu gstych chmur i czarnej mgy. Ale ty nie boisz si ciemnoci. Sam stajesz si ciemnoci.

Niespotkana wczeniej moc pozwala ci zgadzi kadego inkwizytora ktry staje ci na drodze. Demony kul si przed tob lub api i rozszarpuj uciekajcych inkwizytorw.

Gdy bitwa dobiega koca podchodzisz do bramy i dotykasz jej.

[[ENDING 7]]</tw-passagedata><tw-passagedata pid="228" name="Zacznij tropi demona nkajcego wiosk" tags="" position="1950,2100" size="100,100">Posiadajc wystarczajco informacji na temat jednego z wikszych demonw, ktry ostatnio przeladuje mieszkacw wioski wyruszasz za jego tropem.

Okazuje si, e demon zagniedzi si gboko w okolicznym lesie - jego kryjwka jest naprawd dobrze schowana. Jak na dzikiego potwora wykazuje cakiem duo inteligencji...

[[Kontynuuj-&gt;Las4-3]]</tw-passagedata><tw-passagedata pid="229" name="Zacznij wywaa drzwi" tags="" position="4025,5325" size="100,100">door_kicked_in: true
--
W niektrych domach na cianach sabo wiec runy. Jeden z nich posiada nawet zatarty czciowo demoniczny krg. Moe warto go zbada?

[[Zbadaj krg]]

[[Zbadaj runy]]</tw-passagedata><tw-passagedata pid="230" name="Zagldaj przez okna" tags="" position="3775,5325" size="100,100">Wikszo domw wyglda w rodku na opuszczone i zaniedbane, jednak w niektrych z nich widniej na cianach runy sabo owietlajce pomieszczenia.

[if !clue_demon_runes]
[[Wam si do jednego z domw aby zbada runy-&gt;Zbadaj runy]]
[continue]

[if !clue_demon_circle]
[[Rozgldaj si po domach dalej-&gt;Dom z krgiem]] w nadziei e odkryjesz co oprcz run.
[continue]</tw-passagedata><tw-passagedata pid="231" name="Zagr im" tags="" position="2850,2750" size="100,100">interrogation_gossiping_women: true
--
Kobiety przestraszone mwi ci o tym, ze w lesie znaleziony zosta podobno jaki trup.

Ju raczej si nic od nich nie dowiesz, pozostaje tylko [[rozglda si dalej-&gt;Rozejrzyj si po wiosce]].</tw-passagedata><tw-passagedata pid="232" name="Zapytaj czowieka z czym potrzebuje pomocy" tags="" position="5450,2175" size="100,100">{companion_name_scientist} rozglda si z niepokojem, i zaprasza ci do swojego mieszkania.

[[Udaj si do mieszkania uczonego]]
Powiedz, e odwiedzisz go gdy znajdziesz czas i [[Udaj si do Akademii]]</tw-passagedata><tw-passagedata pid="233" name="Zapytaj o demony w okolicy" tags="" position="3150,2775" size="100,100">clue_key_villagedemon: true
attacked_village_clues(clue_key_villagedemon): attacked_village_clues+1
--
Wjt mwi, e widzia raz par lat temu jednego z okolicznych demonw. Demon porusza si na czterech apach, mia jelenie rogi i paszcz ktra otwieraa si w 3 strony. Demon napadby go, gdyby nie patrol Inkwizycji stacjonujcy wtedy w wiosce. 

Opowiada take o pomniejszych demonach, ktre co jaki czas wychodz z lasu i podkradaj zwierzta gospodarskie takie jak kury.

Zaraz po podaniu tych informacji wjt zaczyna wywody na temat szabli ktra dosta od Inkwizytorw.

[[Powrt-&gt;Przesuchaj wjta]]</tw-passagedata><tw-passagedata pid="234" name="Zapytaj o incydent z krowami" tags="" position="1850,3900" size="100,100">Demon mwi w prostych, przerywanych zdaniach e to on zabi krowy chopw.

[[Powrt-&gt;Porozmawiaj z demonem]]</tw-passagedata><tw-passagedata pid="235" name="Zapytaj o incydenty" tags="" position="3275,2650" size="100,100">__knowsaboutranger: clue_ranger_1 &amp;&amp; clue_ranger_2
__partialrangerinfo: clue_ranger_1 || clue_ranger_2
clue_ranger_1: true
--
[if !__knowsaboutranger]
Wjt opowiada o zaginionym leniczym, s podstawy do wierzenia e zosta porwany przez demony.
[continue]

[if clue_ranger_1]
zakopotany wjt jeszcze raz opowiada o zaginionym leniczym.
[continue]

[if __partialrangerinfo]
Wjt mwi o zaginionym leniczym. Dochodzisz do wniosku e chodzi o martwego mczyzn ktrego znalaze w lesie. [[Powiedz o leniczym]]
[continue]

[[Zapytaj wjta o co innego-&gt;Przesuchaj wjta]]
[note]
wartoci info_missing_ranger:
0 - brak 
1 - zagin
2 - jaki trup
3 - wiesz e trup to ranger
[continue]
[note]
zmienilem wartosci info missing ranger bo nie dzialaly
[continue]
[todo]
ogolnie to dziala  zmiana variabla ale nie tak jak powinna bo wartosc sie zmienia przed wyswietleniem kodu</tw-passagedata><tw-passagedata pid="236" name="Zapytaj o leniczego" tags="" position="1975,3900" size="100,100">Demon wpada w lekk panik, jka si, wydaje si by na skraju paczu. Informuje ci e &quot;to nie jego wina&quot;.

[[Powrt-&gt;Porozmawiaj z demonem]]</tw-passagedata><tw-passagedata pid="237" name="Zapytaj o mieszkacw ktrzy mog co wiedzie" tags="" position="3425,2650" size="100,100">Wjt opowiada o chopach, ktrzy ostatnio skaryli si na utracone bydo. Mwi e wypowiadali si nieskadnie i byli przeraeni gdy przybiegli do niego wczesnym rankiem.
[[Zapytaj wjta o co innego-&gt;Przesuchaj wjta]]
[note]
zmienilem info lost cows na boolean true false o nazwie keyclue1 bo gracz bedzie szukal wskazowek na podstawie tego co powiedzieli chlopi, po czym inspekcja krowy pokae</tw-passagedata><tw-passagedata pid="238" name="Zapytaj o okoliczne tereny" tags="" position="3125,2650" size="100,100">clue_cave_location: true
--
Wjt opowiada o jaskini, ktra w ostatnich czasach niepokoi mieszkacw dobiegajcymi z niej dziwnymi odgosami.
[[Zapytaj wjta o co innego-&gt;Przesuchaj wjta]]</tw-passagedata><tw-passagedata pid="239" name="Zapytaj w czym potrzebuje pomocy" tags="" position="5750,2775" size="100,100">Kilkoro wsppracownikw dr Rood udao si do staroytnych ruin w pobliu miasta, i do tej pory powinno wrci. Archeolodzy nie maj przy sobie kosztownoci, wic spodziewa si, e mogy ich zaatakowa demony.

Wyprawa do wykopalisk archeologicznych zajmie najpewniej kilka dni.

[[Udaj si do wykopalisk archeologicznych]]

[[Udaj si do Akademii]]</tw-passagedata><tw-passagedata pid="240" name="Zastanw si, czego si dowiedzie" tags="" position="5775,3575" size="100,100">GlobalClueDemonRuins: GlobalClueDemonRuins+1
--
Wyglda na to, e demony nie s obojtne wobec staroytnych rytuaw praktykowanych przez ludzi w zapomnianych wiekach. Cho rytuay wykorzystywane przez staroytnych rni si od tych praktykowanych przez kultystw, musi istnie midzy nimi jakie niezauwaone jak dotd podobiestwo. 

Wnioskujesz, e poszukiwane przez ciebie ruiny musz si znajdow w pobliu ruin staroytnych osad ludzkich.

Interkcje demonw i ludzi mog nie by tak nowym zjawiskiem jak ci si zdawao...

[if archeologist_alive===1]
[[Oddaj Archeologa w rce Inkwizycji]]
[continue]
[[Wr do holu Akademii]]</tw-passagedata><tw-passagedata pid="241" name="Zatrzymaj si i id za przeczuciem" tags="START-QUESTA ROZGAZIONA-CIEKA" position="3325,1800" size="100,100">Wonica, zaskoczony twoj prob o zatrzymanie si staje na rodku drogi.

[[Wejd do lasu]]

[[Rozejrzyj si - przeczucie moe by bdne-&gt;Wr si]]</tw-passagedata><tw-passagedata pid="242" name="Zaufaj uczonemu i czekaj dalej..." tags="START-QUESTA" position="3650,7750" size="100,100">FoundTempleAbsent: true
--
Ju gdy zaczynasz si niecierpliwi ogarniajc obz, uczony wraca do ciebie z paroma zapanymi krlikami, sakiewk owocw lenych oraz jak zielenin. W popiechu zaczyna szykowa si do gotowania.

[[Kontynuuj-&gt;Uczony gotuje]]</tw-passagedata><tw-passagedata pid="243" name="Zbadaj centraln cz wityni" tags="" position="2900,8325" size="100,100">W centrum znajduje si rozamany na p otarz. Rni si jednak od tych ktre widziae w innych wityniach: nie ma na nim ladw krwi. Brakuje te run przyzwania.
Uwiadamiasz sobie, e nie przypomina on stou ofiarnego, a bardziej miejsce wsplnego posiku. 

Szybko zauwaasz powd jego obecnego stanu: piecz inkwizycji przytwierdza do niego pergamin Inkwizycji. Miejsce to zostao najechane przez inkwizycj po odkryciu obecnoci heretykw.

[[Zbadaj co innego-&gt;Badanie wityni]]</tw-passagedata><tw-passagedata pid="244" name="Zbadaj krg" tags="" position="4150,5575" size="100,100">clue_demon_circle: true
--
Krg posiada wiele skomplikowanych znakw ktrych jako Inkwizytor nie widywae zwykle na amatorskich wytworach chopw przyzywajcych demony...

[if CompanionScientist]
[[Zbadaj znaki na krgu]]

[[Powrt-&gt;Krg si aktywuje]]</tw-passagedata><tw-passagedata pid="245" name="Zbadaj otarz bliej" tags="" position="925,3000" size="100,100">Runy wok otarza zaczynaj wieci - tracisz przytomno...

[[Kontynuuj-&gt;Dialog z demonem]]</tw-passagedata><tw-passagedata pid="246" name="Zbadaj runy" tags="" position="3675,5550" size="100,100">clue_demon_runes: true
--
Wchodzisz do jednego z domw owietlonych runami. Runy wydaj si by wykonane bardzo starannie - ciko uwierzy e zrobi je przecitny czowiek...

[if CompanionScientist]
[[Zbadaj runy bliej]]
[continue]

[if CompanionDemon]
[[Sprbuj aktywowa runy-&gt;Aktywuj runy]]

[else]
[[Sprbuj aktywowa runy-&gt;Runy nie dziaaj]]</tw-passagedata><tw-passagedata pid="247" name="Zbadaj runy bliej" tags="" position="3650,5800" size="100,100">clue_secret_runes: true
--
Naukowiec ktrego wzie ze sob z akademii przyglda si runom bliej. Informuje ci, e niektre z nich to zaawansowane runy teleportacyjne. Towarzysz notuje to znalezisko w swoim zeszycie.

[if CompanionDemon]
[[Sprbuj aktywowa runy-&gt;Aktywuj runy]]

[else]
[[Sprbuj aktywowa runy-&gt;Runy nie dziaaj]]

[continue]

[[Powrt-&gt;Zbadaj runy]]</tw-passagedata><tw-passagedata pid="248" name="Zbadaj sklepienie" tags="" position="3100,8325" size="100,100">Przygldasz si sklepieniu wityni i nie moesz zrozumie jak co tak masywnego moe by podtrzymywane przez tak lich konstrukcj. Nagle zauwaasz jak li wpada do rodka wityni, niemal jakby materializowa si w jej wntrzu.

Twj towarzysz te to zauwaa, i zaczyna maca ciany wityni. Prosi ci, by zrobi to samo i uwiadamiasz sobie, e jest to iluzja! witynia jest w istocie zbudowana z drewna, jednak na jej wntrze naoono jaki potny czar aby wygldaa dostojniej.

Uczony mwi ci, e taka permanentna iluzja dalece wykracza ponad ludzkie zdolnoci magiczne.

[[Zbadaj co innego-&gt;Badanie wityni]]</tw-passagedata><tw-passagedata pid="249" name="Zbadaj znaki na krgu" tags="" position="4025,5800" size="100,100">clue_secret_circle:true
--
Naukowiec, ktry przyczy si do ciebie zaczyna przyglda si znakom z ktrych skada si krg. Towarzysz notuje nieznajome symbole w swoim zeszycie. W trakcie obserwacji znaki zaczynaj wieci...	

[[Kontynuuj-&gt;Krg si aktywuje]]</tw-passagedata><tw-passagedata pid="250" name="Zdrad go, i zabij razem z twoim zastpc" tags="ROZGAZIONA-CIEKA" position="3800,10900" size="100,100">Onnod ley u twych stp. Zaskoczony twoj decyzj ze smutkiem akceptuje swj los.
Inne demony wydaj z siebie dzikie wrzaski. Przed tob najwiksza walka twojego ycia.

[if StateInquisitionNotified]
Wtem, dobiega ci znajomy dwik. Powietrze przeszywa ryk rogw owieckich Inkwizycji. Z lasu za twoimi plecami wyania si {faction_mentor_inquisition}. Salutuje ci, i gratuluje wykonania zadania. Teraz zostaje ju tylko jedno: dokoczy to co zaczlicie.

[[Walka o Bram po stronie inkwizycji]]
[continue]
[if InqNotifiedInSecret]
Wtem, dobiega ci znajomy dwik. Powietrze przeszywa ryk rogw owieckich Inkwizycji. Z lasu za twoimi plecami wyania si {faction_mentor_inquisition}.
Salutujesz mu, jednak od uderza ci w brzuch, a dwch jego przybocznych apie ci i rozbraja. Twj zastpca salutuje mu i staje u jego boku. 

Twoja nieautoryzowana aktywno nie usza uwadze Inkwizycji, dziki inicjatywie twojego zastpcy. Donis on przeoonym o twoich poczynaniach.
{embed passage: &quot;PowerWithin&quot;}
[continue]
[if !StateInquisitionNotified &amp;&amp; !InqNotifiedInSecret]
{embed passage: &quot;Samotna walka o Bram&quot;}
[continue]</tw-passagedata><tw-passagedata pid="251" name="Zinterpretuj runy na krgu" tags="START-QUESTA" position="4725,6525" size="100,100">[if CompanionScientist]
{embed passage: &quot;Findgateyourself1&quot;}
Uczony zauwaa e runy na krgu da si czciowo zinterpretowa. Taki krg stanowi jedynie swego rodzaju wze, przenoszcy do siebie demony z duo wikszej bramy.

Duo wikszej bramy, ktra musi si znajdowa w pobliu.</tw-passagedata><tw-passagedata pid="252" name="Zniszcz otarz" tags="" position="775,3000" size="100,100">standing_human: standing_human+5
standing_demon: standing_demon-5
--
Demolujesz otarz, w wyniku czego zaczyna ci si krci w gowie. Tracisz przytomno...

[[Kontynuuj-&gt;Dialog z demonem]]</tw-passagedata><tw-passagedata pid="253" name="Zostaw demona w spokoju" tags="" position="2300,4125" size="100,100">standing_demon: standing_demon+30
--
Demon otwiera przed tob drog do jamy i wypuszcza ci. Pozostaje ufa mu, e nie zmieni swojego pokojowego nastawienia...

[[Wr do wjta-&gt;Ostatnia konwersacja z wjtem]]</tw-passagedata><tw-passagedata pid="254" name="Zreformowany Kultysta" tags="" position="3725,450" size="100,100">standing_demon: 10
standing_human: 0
background: &quot;cultist&quot;
--
Obz szkoleniowy umoliwiajcy doczenie do Inkwizycji jest niewiarygodnie trudny - rygorystyczne testy sprawnociowe przeplatane wykadami o demonach, geografii, taktykach walki i innych tematach sprawiaj, e wielu odpada. Tobie jednak udaje si przetrwa, co umoliwia ci oficjalnie zacign si do Inkwizycji...

[[Kontynuuj-&gt;Prolog]]</tw-passagedata><tw-passagedata pid="255" name="pojmanie pomniejszych demonw" tags="KONIEC-QUESTA" position="2200,1850" size="100,100">standing_human: standing_human+5
--
Oguszasz kadego pomniejszego demona z osobna, po czym odnosisz je nieprzytomne jeden po drugim do wozu. Poyczasz od wonicy lin ktra zwykle suy do stabilizowania bagau aby zwiza demony. Dajesz mu take polecenie, aby odwiz je pniej do placwki badawczej Akademii Krlewskiej.

Wyruszasz ponownie w drog z tyu wozu, teraz penego maych nieprzytomnych demonw, po czym [[docierasz do wioski-&gt;Docierasz do wioski]].</tw-passagedata><tw-passagedata pid="256" name="uczony zbiera jedzenie" tags="" position="3650,7525" size="100,100">Puszczasz uczonego wolno. Pozostaje tylko czeka i sprztn troch w obozie...

[[Czekaj...]]</tw-passagedata><tw-passagedata pid="257" name="wr do placwki" tags="" position="3850,1150" size="100,100">[if QuestionedPrologue===3]
Dowdca prosi ci o raport.
[[Oskar jedn z grup]]
[else]
Dowdca pyta, czy chcesz ju zoy raport, chocia nie przepytae jeszcze kadej z grup.

[[Oskar jedn z grup]]

[[Przepytaj grup chopw w polu]] 

[[Przepytaj handlarzy na rynku]] 

[[Przepytaj rzemielinikw]]</tw-passagedata><tw-passagedata pid="258" name="wybr backgroundu" tags="" position="3850,250" size="100,100">[[Podejmuj si suby dobrowolnie, czuj e powinienem dziaa dla dobra Krla-&gt;Rekrut]]

[[Zacignito mnie wbrew mojej woli, teraz nie mam innego wyboru ni suba-&gt;Poborowy]]

[[Kiedy sam czciem demony i chc odkupi swoje winy-&gt;Zreformowany Kultysta]]</tw-passagedata><tw-passagedata pid="259" name="zabicie pomniejszych demonw" tags="KONIEC-QUESTA" position="2475,1775" size="100,100">standing_human: standing_human+5
--
Zabijasz z atwoci pomniejsze demony. Zostawiasz ich ciaa w lesie - or inkwizycji nie zostawi wiele do zbierania. Informujesz wonic o truchach, na wypadek gdyby chcia sobie zarobi troch dodatkowych pienidzy.

Wyruszasz na wozie w drog, a niewiele pniej [[docierasz do wioski-&gt;Docierasz do wioski]].</tw-passagedata><tw-passagedata pid="260" name="zapytaj o niedwiedzia" tags="" position="2100,3900" size="100,100">Demon mwi ci, e zaatakowa okolicznego niedwiedzia w jaskini, gdy tamten napad leniczego. Zaraz po tym zaczyna cicho szlocha.

[[Powrt-&gt;Porozmawiaj z demonem]]</tw-passagedata><tw-passagedata pid="261" name="cieka poza wiosk" tags="" position="3000,8525" size="100,100">Ju bye gotowy wraca do obozu, gdy nagle zauwaasz co na ksztat cieki. Nie wyglda jak inne, czsto uywane cieki w wiosce. To lad wozu lub taczek przejedajcych wielokrotnie do wityni.

[[Id za ladem k]]</tw-passagedata><tw-passagedata pid="262" name="lady w okolicy krw" tags="" position="2075,3225" size="100,100">clue_cows_2: true
--
Widzisz lady biegnce w stron lasu na zachd std. Nie ma jednak w pobliu dostrzegalnego przejcia przez gste drzewa wgb niego.
[[Kontynuuj dochodzenie-&gt;Inspekcja Krw]]</tw-passagedata></tw-storydata></html>